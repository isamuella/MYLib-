var Yk=Object.defineProperty;var nA=n=>{throw TypeError(n)};var Kk=(n,e,t)=>e in n?Yk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var O=(n,e,t)=>Kk(n,typeof e!="symbol"?e+"":e,t),wv=(n,e,t)=>e.has(n)||nA("Cannot "+t);var a=(n,e,t)=>(wv(n,e,"read from private field"),t?t.call(n):e.get(n)),w=(n,e,t)=>e.has(n)?nA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),p=(n,e,t,s)=>(wv(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),E=(n,e,t)=>(wv(n,e,"access private method"),t);var bt=(n,e,t,s)=>({set _(i){p(n,e,i,t)},get _(){return a(n,e,s)}});function Qk(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function xE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var CE={exports:{}},By={},_E={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp=Symbol.for("react.element"),Jk=Symbol.for("react.portal"),Zk=Symbol.for("react.fragment"),eP=Symbol.for("react.strict_mode"),tP=Symbol.for("react.profiler"),nP=Symbol.for("react.provider"),sP=Symbol.for("react.context"),iP=Symbol.for("react.forward_ref"),rP=Symbol.for("react.suspense"),oP=Symbol.for("react.memo"),aP=Symbol.for("react.lazy"),sA=Symbol.iterator;function lP(n){return n===null||typeof n!="object"?null:(n=sA&&n[sA]||n["@@iterator"],typeof n=="function"?n:null)}var TE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kE=Object.assign,PE={};function Nh(n,e,t){this.props=n,this.context=e,this.refs=PE,this.updater=t||TE}Nh.prototype.isReactComponent={};Nh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Nh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function RE(){}RE.prototype=Nh.prototype;function Mb(n,e,t){this.props=n,this.context=e,this.refs=PE,this.updater=t||TE}var Db=Mb.prototype=new RE;Db.constructor=Mb;kE(Db,Nh.prototype);Db.isPureReactComponent=!0;var iA=Array.isArray,LE=Object.prototype.hasOwnProperty,Nb={current:null},ME={key:!0,ref:!0,__self:!0,__source:!0};function DE(n,e,t){var s,i={},r=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)LE.call(e,s)&&!ME.hasOwnProperty(s)&&(i[s]=e[s]);var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(n&&n.defaultProps)for(s in l=n.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:Xp,type:n,key:r,ref:o,props:i,_owner:Nb.current}}function cP(n,e){return{$$typeof:Xp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Ib(n){return typeof n=="object"&&n!==null&&n.$$typeof===Xp}function uP(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var rA=/\/+/g;function bv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?uP(""+n.key):e.toString(36)}function zg(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Xp:case Jk:o=!0}}if(o)return o=n,i=i(o),n=s===""?"."+bv(o,0):s,iA(i)?(t="",n!=null&&(t=n.replace(rA,"$&/")+"/"),zg(i,e,t,"",function(u){return u})):i!=null&&(Ib(i)&&(i=cP(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(rA,"$&/")+"/")+n)),e.push(i)),1;if(o=0,s=s===""?".":s+":",iA(n))for(var l=0;l<n.length;l++){r=n[l];var c=s+bv(r,l);o+=zg(r,e,t,c,i)}else if(c=lP(n),typeof c=="function")for(n=c.call(n),l=0;!(r=n.next()).done;)r=r.value,c=s+bv(r,l++),o+=zg(r,e,t,c,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dg(n,e,t){if(n==null)return n;var s=[],i=0;return zg(n,s,"","",function(r){return e.call(t,r,i++)}),s}function hP(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var En={current:null},Ug={transition:null},dP={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:Ug,ReactCurrentOwner:Nb};function NE(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:dg,forEach:function(n,e,t){dg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return dg(n,function(){e++}),e},toArray:function(n){return dg(n,function(e){return e})||[]},only:function(n){if(!Ib(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};de.Component=Nh;de.Fragment=Zk;de.Profiler=tP;de.PureComponent=Mb;de.StrictMode=eP;de.Suspense=rP;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dP;de.act=NE;de.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=kE({},n.props),i=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Nb.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)LE.call(e,c)&&!ME.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Xp,type:n.type,key:i,ref:r,props:s,_owner:o}};de.createContext=function(n){return n={$$typeof:sP,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:nP,_context:n},n.Consumer=n};de.createElement=DE;de.createFactory=function(n){var e=DE.bind(null,n);return e.type=n,e};de.createRef=function(){return{current:null}};de.forwardRef=function(n){return{$$typeof:iP,render:n}};de.isValidElement=Ib;de.lazy=function(n){return{$$typeof:aP,_payload:{_status:-1,_result:n},_init:hP}};de.memo=function(n,e){return{$$typeof:oP,type:n,compare:e===void 0?null:e}};de.startTransition=function(n){var e=Ug.transition;Ug.transition={};try{n()}finally{Ug.transition=e}};de.unstable_act=NE;de.useCallback=function(n,e){return En.current.useCallback(n,e)};de.useContext=function(n){return En.current.useContext(n)};de.useDebugValue=function(){};de.useDeferredValue=function(n){return En.current.useDeferredValue(n)};de.useEffect=function(n,e){return En.current.useEffect(n,e)};de.useId=function(){return En.current.useId()};de.useImperativeHandle=function(n,e,t){return En.current.useImperativeHandle(n,e,t)};de.useInsertionEffect=function(n,e){return En.current.useInsertionEffect(n,e)};de.useLayoutEffect=function(n,e){return En.current.useLayoutEffect(n,e)};de.useMemo=function(n,e){return En.current.useMemo(n,e)};de.useReducer=function(n,e,t){return En.current.useReducer(n,e,t)};de.useRef=function(n){return En.current.useRef(n)};de.useState=function(n){return En.current.useState(n)};de.useSyncExternalStore=function(n,e,t){return En.current.useSyncExternalStore(n,e,t)};de.useTransition=function(){return En.current.useTransition()};de.version="18.3.1";_E.exports=de;var P=_E.exports;const Wi=xE(P),fP=Qk({__proto__:null,default:Wi},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP=P,gP=Symbol.for("react.element"),mP=Symbol.for("react.fragment"),yP=Object.prototype.hasOwnProperty,vP=pP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wP={key:!0,ref:!0,__self:!0,__source:!0};function IE(n,e,t){var s,i={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)yP.call(e,s)&&!wP.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:gP,type:n,key:r,ref:o,props:i,_owner:vP.current}}By.Fragment=mP;By.jsx=IE;By.jsxs=IE;CE.exports=By;var C=CE.exports,i0={},OE={exports:{}},ys={},FE={exports:{}},BE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,$){var J=N.length;N.push($);e:for(;0<J;){var te=J-1>>>1,Q=N[te];if(0<i(Q,$))N[te]=$,N[J]=Q,J=te;else break e}}function t(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var $=N[0],J=N.pop();if(J!==$){N[0]=J;e:for(var te=0,Q=N.length,ie=Q>>>1;te<ie;){var we=2*(te+1)-1,Ve=N[we],We=we+1,be=N[We];if(0>i(Ve,J))We<Q&&0>i(be,Ve)?(N[te]=be,N[We]=J,te=We):(N[te]=Ve,N[we]=J,te=we);else if(We<Q&&0>i(be,J))N[te]=be,N[We]=J,te=We;else break e}}return $}function i(N,$){var J=N.sortIndex-$.sortIndex;return J!==0?J:N.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,g=!1,m=!1,v=!1,A=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(N){for(var $=t(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=N)s(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=t(u)}}function x(N){if(v=!1,S(N),!m)if(t(c)!==null)m=!0,B(_);else{var $=t(u);$!==null&&j(x,$.startTime-N)}}function _(N,$){m=!1,v&&(v=!1,y(R),R=-1),g=!0;var J=f;try{for(S($),d=t(c);d!==null&&(!(d.expirationTime>$)||N&&!I());){var te=d.callback;if(typeof te=="function"){d.callback=null,f=d.priorityLevel;var Q=te(d.expirationTime<=$);$=n.unstable_now(),typeof Q=="function"?d.callback=Q:d===t(c)&&s(c),S($)}else s(c);d=t(c)}if(d!==null)var ie=!0;else{var we=t(u);we!==null&&j(x,we.startTime-$),ie=!1}return ie}finally{d=null,f=J,g=!1}}var T=!1,k=null,R=-1,D=5,M=-1;function I(){return!(n.unstable_now()-M<D)}function H(){if(k!==null){var N=n.unstable_now();M=N;var $=!0;try{$=k(!0,N)}finally{$?W():(T=!1,k=null)}}else T=!1}var W;if(typeof b=="function")W=function(){b(H)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Z=z.port2;z.port1.onmessage=H,W=function(){Z.postMessage(null)}}else W=function(){A(H,0)};function B(N){k=N,T||(T=!0,W())}function j(N,$){R=A(function(){N(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){m||g||(m=!0,B(_))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(N){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var J=f;f=$;try{return N()}finally{f=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,$){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var J=f;f=N;try{return $()}finally{f=J}},n.unstable_scheduleCallback=function(N,$,J){var te=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,N){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=J+Q,N={id:h++,callback:$,priorityLevel:N,startTime:J,expirationTime:Q,sortIndex:-1},J>te?(N.sortIndex=J,e(u,N),t(c)===null&&N===t(u)&&(v?(y(R),R=-1):v=!0,j(x,J-te))):(N.sortIndex=Q,e(c,N),m||g||(m=!0,B(_))),N},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(N){var $=f;return function(){var J=f;f=$;try{return N.apply(this,arguments)}finally{f=J}}}})(BE);FE.exports=BE;var bP=FE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP=P,gs=bP;function F(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jE=new Set,jd={};function lc(n,e){Eh(n,e),Eh(n+"Capture",e)}function Eh(n,e){for(jd[n]=e,n=0;n<e.length;n++)jE.add(e[n])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),r0=Object.prototype.hasOwnProperty,AP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oA={},aA={};function EP(n){return r0.call(aA,n)?!0:r0.call(oA,n)?!1:AP.test(n)?aA[n]=!0:(oA[n]=!0,!1)}function xP(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function CP(n,e,t,s){if(e===null||typeof e>"u"||xP(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xn(n,e,t,s,i,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Yt[n]=new xn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Yt[e]=new xn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Yt[n]=new xn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Yt[n]=new xn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Yt[n]=new xn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Yt[n]=new xn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Yt[n]=new xn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Yt[n]=new xn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Yt[n]=new xn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ob=/[\-:]([a-z])/g;function Fb(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Ob,Fb);Yt[e]=new xn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Ob,Fb);Yt[e]=new xn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Ob,Fb);Yt[e]=new xn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Yt[n]=new xn(n,1,!1,n.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Yt[n]=new xn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Bb(n,e,t,s){var i=Yt.hasOwnProperty(e)?Yt[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CP(e,t,i,s)&&(t=null),s||i===null?EP(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Qr=SP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fg=Symbol.for("react.element"),Cc=Symbol.for("react.portal"),_c=Symbol.for("react.fragment"),jb=Symbol.for("react.strict_mode"),o0=Symbol.for("react.profiler"),zE=Symbol.for("react.provider"),UE=Symbol.for("react.context"),zb=Symbol.for("react.forward_ref"),a0=Symbol.for("react.suspense"),l0=Symbol.for("react.suspense_list"),Ub=Symbol.for("react.memo"),io=Symbol.for("react.lazy"),HE=Symbol.for("react.offscreen"),lA=Symbol.iterator;function Wh(n){return n===null||typeof n!="object"?null:(n=lA&&n[lA]||n["@@iterator"],typeof n=="function"?n:null)}var st=Object.assign,Sv;function id(n){if(Sv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Sv=e&&e[1]||""}return`
`+Sv+n}var Av=!1;function Ev(n,e){if(!n||Av)return"";Av=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),o=i.length-1,l=r.length-1;1<=o&&0<=l&&i[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==r[l]){var c=`
`+i[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{Av=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?id(n):""}function _P(n){switch(n.tag){case 5:return id(n.type);case 16:return id("Lazy");case 13:return id("Suspense");case 19:return id("SuspenseList");case 0:case 2:case 15:return n=Ev(n.type,!1),n;case 11:return n=Ev(n.type.render,!1),n;case 1:return n=Ev(n.type,!0),n;default:return""}}function c0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _c:return"Fragment";case Cc:return"Portal";case o0:return"Profiler";case jb:return"StrictMode";case a0:return"Suspense";case l0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case UE:return(n.displayName||"Context")+".Consumer";case zE:return(n._context.displayName||"Context")+".Provider";case zb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ub:return e=n.displayName||null,e!==null?e:c0(n.type)||"Memo";case io:e=n._payload,n=n._init;try{return c0(n(e))}catch{}}return null}function TP(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return c0(e);case 8:return e===jb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ga(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $E(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kP(n){var e=$E(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function pg(n){n._valueTracker||(n._valueTracker=kP(n))}function VE(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=$E(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function Dm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function u0(n,e){var t=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function cA(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=ga(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WE(n,e){e=e.checked,e!=null&&Bb(n,"checked",e,!1)}function h0(n,e){WE(n,e);var t=ga(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?d0(n,e.type,t):e.hasOwnProperty("defaultValue")&&d0(n,e.type,ga(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function uA(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function d0(n,e,t){(e!=="number"||Dm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var rd=Array.isArray;function Hc(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+ga(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function f0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function hA(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(F(92));if(rd(t)){if(1<t.length)throw Error(F(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ga(t)}}function GE(n,e){var t=ga(e.value),s=ga(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function dA(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function qE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?qE(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var gg,XE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(gg=gg||document.createElement("div"),gg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function zd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Pd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PP=["Webkit","ms","Moz","O"];Object.keys(Pd).forEach(function(n){PP.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Pd[e]=Pd[n]})});function YE(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Pd.hasOwnProperty(n)&&Pd[n]?(""+e).trim():e+"px"}function KE(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=YE(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var RP=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function g0(n,e){if(e){if(RP[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function m0(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var y0=null;function Hb(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var v0=null,$c=null,Vc=null;function fA(n){if(n=Qp(n)){if(typeof v0!="function")throw Error(F(280));var e=n.stateNode;e&&(e=$y(e),v0(n.stateNode,n.type,e))}}function QE(n){$c?Vc?Vc.push(n):Vc=[n]:$c=n}function JE(){if($c){var n=$c,e=Vc;if(Vc=$c=null,fA(n),e)for(n=0;n<e.length;n++)fA(e[n])}}function ZE(n,e){return n(e)}function ex(){}var xv=!1;function tx(n,e,t){if(xv)return n(e,t);xv=!0;try{return ZE(n,e,t)}finally{xv=!1,($c!==null||Vc!==null)&&(ex(),JE())}}function Ud(n,e){var t=n.stateNode;if(t===null)return null;var s=$y(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(F(231,e,typeof t));return t}var w0=!1;if($r)try{var Gh={};Object.defineProperty(Gh,"passive",{get:function(){w0=!0}}),window.addEventListener("test",Gh,Gh),window.removeEventListener("test",Gh,Gh)}catch{w0=!1}function LP(n,e,t,s,i,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Rd=!1,Nm=null,Im=!1,b0=null,MP={onError:function(n){Rd=!0,Nm=n}};function DP(n,e,t,s,i,r,o,l,c){Rd=!1,Nm=null,LP.apply(MP,arguments)}function NP(n,e,t,s,i,r,o,l,c){if(DP.apply(this,arguments),Rd){if(Rd){var u=Nm;Rd=!1,Nm=null}else throw Error(F(198));Im||(Im=!0,b0=u)}}function cc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function nx(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function pA(n){if(cc(n)!==n)throw Error(F(188))}function IP(n){var e=n.alternate;if(!e){if(e=cc(n),e===null)throw Error(F(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return pA(i),n;if(r===s)return pA(i),e;r=r.sibling}throw Error(F(188))}if(t.return!==s.return)t=i,s=r;else{for(var o=!1,l=i.child;l;){if(l===t){o=!0,t=i,s=r;break}if(l===s){o=!0,s=i,t=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===t){o=!0,t=r,s=i;break}if(l===s){o=!0,s=r,t=i;break}l=l.sibling}if(!o)throw Error(F(189))}}if(t.alternate!==s)throw Error(F(190))}if(t.tag!==3)throw Error(F(188));return t.stateNode.current===t?n:e}function sx(n){return n=IP(n),n!==null?ix(n):null}function ix(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=ix(n);if(e!==null)return e;n=n.sibling}return null}var rx=gs.unstable_scheduleCallback,gA=gs.unstable_cancelCallback,OP=gs.unstable_shouldYield,FP=gs.unstable_requestPaint,ft=gs.unstable_now,BP=gs.unstable_getCurrentPriorityLevel,$b=gs.unstable_ImmediatePriority,ox=gs.unstable_UserBlockingPriority,Om=gs.unstable_NormalPriority,jP=gs.unstable_LowPriority,ax=gs.unstable_IdlePriority,jy=null,Gi=null;function zP(n){if(Gi&&typeof Gi.onCommitFiberRoot=="function")try{Gi.onCommitFiberRoot(jy,n,void 0,(n.current.flags&128)===128)}catch{}}var ai=Math.clz32?Math.clz32:$P,UP=Math.log,HP=Math.LN2;function $P(n){return n>>>=0,n===0?32:31-(UP(n)/HP|0)|0}var mg=64,yg=4194304;function od(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Fm(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var l=o&~i;l!==0?s=od(l):(r&=o,r!==0&&(s=od(r)))}else o=t&~i,o!==0?s=od(o):r!==0&&(s=od(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-ai(e),i=1<<t,s|=n[t],e&=~i;return s}function VP(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WP(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-ai(r),l=1<<o,c=i[o];c===-1?(!(l&t)||l&s)&&(i[o]=VP(l,e)):c<=e&&(n.expiredLanes|=l),r&=~l}}function S0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function lx(){var n=mg;return mg<<=1,!(mg&4194240)&&(mg=64),n}function Cv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Yp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ai(e),n[e]=t}function GP(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-ai(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function Vb(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-ai(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var _e=0;function cx(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var ux,Wb,hx,dx,fx,A0=!1,vg=[],oa=null,aa=null,la=null,Hd=new Map,$d=new Map,oo=[],qP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mA(n,e){switch(n){case"focusin":case"focusout":oa=null;break;case"dragenter":case"dragleave":aa=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":Hd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(e.pointerId)}}function qh(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=Qp(e),e!==null&&Wb(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function XP(n,e,t,s,i){switch(e){case"focusin":return oa=qh(oa,n,e,t,s,i),!0;case"dragenter":return aa=qh(aa,n,e,t,s,i),!0;case"mouseover":return la=qh(la,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return Hd.set(r,qh(Hd.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,$d.set(r,qh($d.get(r)||null,n,e,t,s,i)),!0}return!1}function px(n){var e=Ia(n.target);if(e!==null){var t=cc(e);if(t!==null){if(e=t.tag,e===13){if(e=nx(t),e!==null){n.blockedOn=e,fx(n.priority,function(){hx(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=E0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);y0=s,t.target.dispatchEvent(s),y0=null}else return e=Qp(t),e!==null&&Wb(e),n.blockedOn=t,!1;e.shift()}return!0}function yA(n,e,t){Hg(n)&&t.delete(e)}function YP(){A0=!1,oa!==null&&Hg(oa)&&(oa=null),aa!==null&&Hg(aa)&&(aa=null),la!==null&&Hg(la)&&(la=null),Hd.forEach(yA),$d.forEach(yA)}function Xh(n,e){n.blockedOn===e&&(n.blockedOn=null,A0||(A0=!0,gs.unstable_scheduleCallback(gs.unstable_NormalPriority,YP)))}function Vd(n){function e(i){return Xh(i,n)}if(0<vg.length){Xh(vg[0],n);for(var t=1;t<vg.length;t++){var s=vg[t];s.blockedOn===n&&(s.blockedOn=null)}}for(oa!==null&&Xh(oa,n),aa!==null&&Xh(aa,n),la!==null&&Xh(la,n),Hd.forEach(e),$d.forEach(e),t=0;t<oo.length;t++)s=oo[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<oo.length&&(t=oo[0],t.blockedOn===null);)px(t),t.blockedOn===null&&oo.shift()}var Wc=Qr.ReactCurrentBatchConfig,Bm=!0;function KP(n,e,t,s){var i=_e,r=Wc.transition;Wc.transition=null;try{_e=1,Gb(n,e,t,s)}finally{_e=i,Wc.transition=r}}function QP(n,e,t,s){var i=_e,r=Wc.transition;Wc.transition=null;try{_e=4,Gb(n,e,t,s)}finally{_e=i,Wc.transition=r}}function Gb(n,e,t,s){if(Bm){var i=E0(n,e,t,s);if(i===null)Iv(n,e,s,jm,t),mA(n,s);else if(XP(i,n,e,t,s))s.stopPropagation();else if(mA(n,s),e&4&&-1<qP.indexOf(n)){for(;i!==null;){var r=Qp(i);if(r!==null&&ux(r),r=E0(n,e,t,s),r===null&&Iv(n,e,s,jm,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else Iv(n,e,s,null,t)}}var jm=null;function E0(n,e,t,s){if(jm=null,n=Hb(s),n=Ia(n),n!==null)if(e=cc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=nx(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return jm=n,null}function gx(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BP()){case $b:return 1;case ox:return 4;case Om:case jP:return 16;case ax:return 536870912;default:return 16}default:return 16}}var sa=null,qb=null,$g=null;function mx(){if($g)return $g;var n,e=qb,t=e.length,s,i="value"in sa?sa.value:sa.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===i[r-s];s++);return $g=i.slice(n,1<s?1-s:void 0)}function Vg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function wg(){return!0}function vA(){return!1}function vs(n){function e(t,s,i,r,o){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?wg:vA,this.isPropagationStopped=vA,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=wg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=wg)},persist:function(){},isPersistent:wg}),e}var Ih={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xb=vs(Ih),Kp=st({},Ih,{view:0,detail:0}),JP=vs(Kp),_v,Tv,Yh,zy=st({},Kp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Yh&&(Yh&&n.type==="mousemove"?(_v=n.screenX-Yh.screenX,Tv=n.screenY-Yh.screenY):Tv=_v=0,Yh=n),_v)},movementY:function(n){return"movementY"in n?n.movementY:Tv}}),wA=vs(zy),ZP=st({},zy,{dataTransfer:0}),eR=vs(ZP),tR=st({},Kp,{relatedTarget:0}),kv=vs(tR),nR=st({},Ih,{animationName:0,elapsedTime:0,pseudoElement:0}),sR=vs(nR),iR=st({},Ih,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),rR=vs(iR),oR=st({},Ih,{data:0}),bA=vs(oR),aR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uR(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=cR[n])?!!e[n]:!1}function Yb(){return uR}var hR=st({},Kp,{key:function(n){if(n.key){var e=aR[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Vg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?lR[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yb,charCode:function(n){return n.type==="keypress"?Vg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),dR=vs(hR),fR=st({},zy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SA=vs(fR),pR=st({},Kp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yb}),gR=vs(pR),mR=st({},Ih,{propertyName:0,elapsedTime:0,pseudoElement:0}),yR=vs(mR),vR=st({},zy,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),wR=vs(vR),bR=[9,13,27,32],Kb=$r&&"CompositionEvent"in window,Ld=null;$r&&"documentMode"in document&&(Ld=document.documentMode);var SR=$r&&"TextEvent"in window&&!Ld,yx=$r&&(!Kb||Ld&&8<Ld&&11>=Ld),AA=" ",EA=!1;function vx(n,e){switch(n){case"keyup":return bR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wx(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Tc=!1;function AR(n,e){switch(n){case"compositionend":return wx(e);case"keypress":return e.which!==32?null:(EA=!0,AA);case"textInput":return n=e.data,n===AA&&EA?null:n;default:return null}}function ER(n,e){if(Tc)return n==="compositionend"||!Kb&&vx(n,e)?(n=mx(),$g=qb=sa=null,Tc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yx&&e.locale!=="ko"?null:e.data;default:return null}}var xR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!xR[n.type]:e==="textarea"}function bx(n,e,t,s){QE(s),e=zm(e,"onChange"),0<e.length&&(t=new Xb("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Md=null,Wd=null;function CR(n){Lx(n,0)}function Uy(n){var e=Rc(n);if(VE(e))return n}function _R(n,e){if(n==="change")return e}var Sx=!1;if($r){var Pv;if($r){var Rv="oninput"in document;if(!Rv){var CA=document.createElement("div");CA.setAttribute("oninput","return;"),Rv=typeof CA.oninput=="function"}Pv=Rv}else Pv=!1;Sx=Pv&&(!document.documentMode||9<document.documentMode)}function _A(){Md&&(Md.detachEvent("onpropertychange",Ax),Wd=Md=null)}function Ax(n){if(n.propertyName==="value"&&Uy(Wd)){var e=[];bx(e,Wd,n,Hb(n)),tx(CR,e)}}function TR(n,e,t){n==="focusin"?(_A(),Md=e,Wd=t,Md.attachEvent("onpropertychange",Ax)):n==="focusout"&&_A()}function kR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Uy(Wd)}function PR(n,e){if(n==="click")return Uy(e)}function RR(n,e){if(n==="input"||n==="change")return Uy(e)}function LR(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ci=typeof Object.is=="function"?Object.is:LR;function Gd(n,e){if(ci(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!r0.call(e,i)||!ci(n[i],e[i]))return!1}return!0}function TA(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kA(n,e){var t=TA(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=TA(t)}}function Ex(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Ex(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function xx(){for(var n=window,e=Dm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Dm(n.document)}return e}function Qb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function MR(n){var e=xx(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Ex(t.ownerDocument.documentElement,t)){if(s!==null&&Qb(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=kA(t,r);var o=kA(t,s);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var DR=$r&&"documentMode"in document&&11>=document.documentMode,kc=null,x0=null,Dd=null,C0=!1;function PA(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;C0||kc==null||kc!==Dm(s)||(s=kc,"selectionStart"in s&&Qb(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Dd&&Gd(Dd,s)||(Dd=s,s=zm(x0,"onSelect"),0<s.length&&(e=new Xb("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=kc)))}function bg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Pc={animationend:bg("Animation","AnimationEnd"),animationiteration:bg("Animation","AnimationIteration"),animationstart:bg("Animation","AnimationStart"),transitionend:bg("Transition","TransitionEnd")},Lv={},Cx={};$r&&(Cx=document.createElement("div").style,"AnimationEvent"in window||(delete Pc.animationend.animation,delete Pc.animationiteration.animation,delete Pc.animationstart.animation),"TransitionEvent"in window||delete Pc.transitionend.transition);function Hy(n){if(Lv[n])return Lv[n];if(!Pc[n])return n;var e=Pc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Cx)return Lv[n]=e[t];return n}var _x=Hy("animationend"),Tx=Hy("animationiteration"),kx=Hy("animationstart"),Px=Hy("transitionend"),Rx=new Map,RA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sa(n,e){Rx.set(n,e),lc(e,[n])}for(var Mv=0;Mv<RA.length;Mv++){var Dv=RA[Mv],NR=Dv.toLowerCase(),IR=Dv[0].toUpperCase()+Dv.slice(1);Sa(NR,"on"+IR)}Sa(_x,"onAnimationEnd");Sa(Tx,"onAnimationIteration");Sa(kx,"onAnimationStart");Sa("dblclick","onDoubleClick");Sa("focusin","onFocus");Sa("focusout","onBlur");Sa(Px,"onTransitionEnd");Eh("onMouseEnter",["mouseout","mouseover"]);Eh("onMouseLeave",["mouseout","mouseover"]);Eh("onPointerEnter",["pointerout","pointerover"]);Eh("onPointerLeave",["pointerout","pointerover"]);lc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lc("onBeforeInput",["compositionend","keypress","textInput","paste"]);lc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OR=new Set("cancel close invalid load scroll toggle".split(" ").concat(ad));function LA(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,NP(s,e,void 0,n),n.currentTarget=null}function Lx(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&i.isPropagationStopped())break e;LA(i,l,u),r=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&i.isPropagationStopped())break e;LA(i,l,u),r=c}}}if(Im)throw n=b0,Im=!1,b0=null,n}function Ue(n,e){var t=e[R0];t===void 0&&(t=e[R0]=new Set);var s=n+"__bubble";t.has(s)||(Mx(e,n,2,!1),t.add(s))}function Nv(n,e,t){var s=0;e&&(s|=4),Mx(t,n,s,e)}var Sg="_reactListening"+Math.random().toString(36).slice(2);function qd(n){if(!n[Sg]){n[Sg]=!0,jE.forEach(function(t){t!=="selectionchange"&&(OR.has(t)||Nv(t,!1,n),Nv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Sg]||(e[Sg]=!0,Nv("selectionchange",!1,e))}}function Mx(n,e,t,s){switch(gx(e)){case 1:var i=KP;break;case 4:i=QP;break;default:i=Gb}t=i.bind(null,e,t,n),i=void 0,!w0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Iv(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ia(l),o===null)return;if(c=o.tag,c===5||c===6){s=r=o;continue e}l=l.parentNode}}s=s.return}tx(function(){var u=r,h=Hb(t),d=[];e:{var f=Rx.get(n);if(f!==void 0){var g=Xb,m=n;switch(n){case"keypress":if(Vg(t)===0)break e;case"keydown":case"keyup":g=dR;break;case"focusin":m="focus",g=kv;break;case"focusout":m="blur",g=kv;break;case"beforeblur":case"afterblur":g=kv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=wA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=eR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=gR;break;case _x:case Tx:case kx:g=sR;break;case Px:g=yR;break;case"scroll":g=JP;break;case"wheel":g=wR;break;case"copy":case"cut":case"paste":g=rR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=SA}var v=(e&4)!==0,A=!v&&n==="scroll",y=v?f!==null?f+"Capture":null:f;v=[];for(var b=u,S;b!==null;){S=b;var x=S.stateNode;if(S.tag===5&&x!==null&&(S=x,y!==null&&(x=Ud(b,y),x!=null&&v.push(Xd(b,x,S)))),A)break;b=b.return}0<v.length&&(f=new g(f,m,null,t,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",f&&t!==y0&&(m=t.relatedTarget||t.fromElement)&&(Ia(m)||m[Vr]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=t.relatedTarget||t.toElement,g=u,m=m?Ia(m):null,m!==null&&(A=cc(m),m!==A||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=u),g!==m)){if(v=wA,x="onMouseLeave",y="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(v=SA,x="onPointerLeave",y="onPointerEnter",b="pointer"),A=g==null?f:Rc(g),S=m==null?f:Rc(m),f=new v(x,b+"leave",g,t,h),f.target=A,f.relatedTarget=S,x=null,Ia(h)===u&&(v=new v(y,b+"enter",m,t,h),v.target=S,v.relatedTarget=A,x=v),A=x,g&&m)t:{for(v=g,y=m,b=0,S=v;S;S=gc(S))b++;for(S=0,x=y;x;x=gc(x))S++;for(;0<b-S;)v=gc(v),b--;for(;0<S-b;)y=gc(y),S--;for(;b--;){if(v===y||y!==null&&v===y.alternate)break t;v=gc(v),y=gc(y)}v=null}else v=null;g!==null&&MA(d,f,g,v,!1),m!==null&&A!==null&&MA(d,A,m,v,!0)}}e:{if(f=u?Rc(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var _=_R;else if(xA(f))if(Sx)_=RR;else{_=kR;var T=TR}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=PR);if(_&&(_=_(n,u))){bx(d,_,t,h);break e}T&&T(n,f,u),n==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&d0(f,"number",f.value)}switch(T=u?Rc(u):window,n){case"focusin":(xA(T)||T.contentEditable==="true")&&(kc=T,x0=u,Dd=null);break;case"focusout":Dd=x0=kc=null;break;case"mousedown":C0=!0;break;case"contextmenu":case"mouseup":case"dragend":C0=!1,PA(d,t,h);break;case"selectionchange":if(DR)break;case"keydown":case"keyup":PA(d,t,h)}var k;if(Kb)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Tc?vx(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(yx&&t.locale!=="ko"&&(Tc||R!=="onCompositionStart"?R==="onCompositionEnd"&&Tc&&(k=mx()):(sa=h,qb="value"in sa?sa.value:sa.textContent,Tc=!0)),T=zm(u,R),0<T.length&&(R=new bA(R,n,null,t,h),d.push({event:R,listeners:T}),k?R.data=k:(k=wx(t),k!==null&&(R.data=k)))),(k=SR?AR(n,t):ER(n,t))&&(u=zm(u,"onBeforeInput"),0<u.length&&(h=new bA("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=k))}Lx(d,e)})}function Xd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function zm(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=Ud(n,t),r!=null&&s.unshift(Xd(n,r,i)),r=Ud(n,e),r!=null&&s.push(Xd(n,r,i))),n=n.return}return s}function gc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function MA(n,e,t,s,i){for(var r=e._reactName,o=[];t!==null&&t!==s;){var l=t,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,i?(c=Ud(t,r),c!=null&&o.unshift(Xd(t,c,l))):i||(c=Ud(t,r),c!=null&&o.push(Xd(t,c,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var FR=/\r\n?/g,BR=/\u0000|\uFFFD/g;function DA(n){return(typeof n=="string"?n:""+n).replace(FR,`
`).replace(BR,"")}function Ag(n,e,t){if(e=DA(e),DA(n)!==e&&t)throw Error(F(425))}function Um(){}var _0=null,T0=null;function k0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var P0=typeof setTimeout=="function"?setTimeout:void 0,jR=typeof clearTimeout=="function"?clearTimeout:void 0,NA=typeof Promise=="function"?Promise:void 0,zR=typeof queueMicrotask=="function"?queueMicrotask:typeof NA<"u"?function(n){return NA.resolve(null).then(n).catch(UR)}:P0;function UR(n){setTimeout(function(){throw n})}function Ov(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),Vd(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);Vd(e)}function ca(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function IA(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Oh=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Oh,Yd="__reactProps$"+Oh,Vr="__reactContainer$"+Oh,R0="__reactEvents$"+Oh,HR="__reactListeners$"+Oh,$R="__reactHandles$"+Oh;function Ia(n){var e=n[Hi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Vr]||t[Hi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=IA(n);n!==null;){if(t=n[Hi])return t;n=IA(n)}return e}n=t,t=n.parentNode}return null}function Qp(n){return n=n[Hi]||n[Vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Rc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(F(33))}function $y(n){return n[Yd]||null}var L0=[],Lc=-1;function Aa(n){return{current:n}}function $e(n){0>Lc||(n.current=L0[Lc],L0[Lc]=null,Lc--)}function je(n,e){Lc++,L0[Lc]=n.current,n.current=e}var ma={},un=Aa(ma),Fn=Aa(!1),ec=ma;function xh(n,e){var t=n.type.contextTypes;if(!t)return ma;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Bn(n){return n=n.childContextTypes,n!=null}function Hm(){$e(Fn),$e(un)}function OA(n,e,t){if(un.current!==ma)throw Error(F(168));je(un,e),je(Fn,t)}function Dx(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(F(108,TP(n)||"Unknown",i));return st({},t,s)}function $m(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ma,ec=un.current,je(un,n),je(Fn,Fn.current),!0}function FA(n,e,t){var s=n.stateNode;if(!s)throw Error(F(169));t?(n=Dx(n,e,ec),s.__reactInternalMemoizedMergedChildContext=n,$e(Fn),$e(un),je(un,n)):$e(Fn),je(Fn,t)}var sr=null,Vy=!1,Fv=!1;function Nx(n){sr===null?sr=[n]:sr.push(n)}function VR(n){Vy=!0,Nx(n)}function Ea(){if(!Fv&&sr!==null){Fv=!0;var n=0,e=_e;try{var t=sr;for(_e=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}sr=null,Vy=!1}catch(i){throw sr!==null&&(sr=sr.slice(n+1)),rx($b,Ea),i}finally{_e=e,Fv=!1}}return null}var Mc=[],Dc=0,Vm=null,Wm=0,Ms=[],Ds=0,tc=null,Br=1,jr="";function Ta(n,e){Mc[Dc++]=Wm,Mc[Dc++]=Vm,Vm=n,Wm=e}function Ix(n,e,t){Ms[Ds++]=Br,Ms[Ds++]=jr,Ms[Ds++]=tc,tc=n;var s=Br;n=jr;var i=32-ai(s)-1;s&=~(1<<i),t+=1;var r=32-ai(e)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Br=1<<32-ai(e)+i|t<<i|s,jr=r+n}else Br=1<<r|t<<i|s,jr=n}function Jb(n){n.return!==null&&(Ta(n,1),Ix(n,1,0))}function Zb(n){for(;n===Vm;)Vm=Mc[--Dc],Mc[Dc]=null,Wm=Mc[--Dc],Mc[Dc]=null;for(;n===tc;)tc=Ms[--Ds],Ms[Ds]=null,jr=Ms[--Ds],Ms[Ds]=null,Br=Ms[--Ds],Ms[Ds]=null}var fs=null,ds=null,Ke=!1,ri=null;function Ox(n,e){var t=Os(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function BA(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,fs=n,ds=ca(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,fs=n,ds=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=tc!==null?{id:Br,overflow:jr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Os(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,fs=n,ds=null,!0):!1;default:return!1}}function M0(n){return(n.mode&1)!==0&&(n.flags&128)===0}function D0(n){if(Ke){var e=ds;if(e){var t=e;if(!BA(n,e)){if(M0(n))throw Error(F(418));e=ca(t.nextSibling);var s=fs;e&&BA(n,e)?Ox(s,t):(n.flags=n.flags&-4097|2,Ke=!1,fs=n)}}else{if(M0(n))throw Error(F(418));n.flags=n.flags&-4097|2,Ke=!1,fs=n}}}function jA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fs=n}function Eg(n){if(n!==fs)return!1;if(!Ke)return jA(n),Ke=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!k0(n.type,n.memoizedProps)),e&&(e=ds)){if(M0(n))throw Fx(),Error(F(418));for(;e;)Ox(n,e),e=ca(e.nextSibling)}if(jA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(F(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ds=ca(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ds=null}}else ds=fs?ca(n.stateNode.nextSibling):null;return!0}function Fx(){for(var n=ds;n;)n=ca(n.nextSibling)}function Ch(){ds=fs=null,Ke=!1}function eS(n){ri===null?ri=[n]:ri.push(n)}var WR=Qr.ReactCurrentBatchConfig;function Kh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(F(309));var s=t.stateNode}if(!s)throw Error(F(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var l=i.refs;o===null?delete l[r]:l[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(F(284));if(!t._owner)throw Error(F(290,n))}return n}function xg(n,e){throw n=Object.prototype.toString.call(e),Error(F(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function zA(n){var e=n._init;return e(n._payload)}function Bx(n){function e(y,b){if(n){var S=y.deletions;S===null?(y.deletions=[b],y.flags|=16):S.push(b)}}function t(y,b){if(!n)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function s(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=fa(y,b),y.index=0,y.sibling=null,y}function r(y,b,S){return y.index=S,n?(S=y.alternate,S!==null?(S=S.index,S<b?(y.flags|=2,b):S):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function l(y,b,S,x){return b===null||b.tag!==6?(b=Vv(S,y.mode,x),b.return=y,b):(b=i(b,S),b.return=y,b)}function c(y,b,S,x){var _=S.type;return _===_c?h(y,b,S.props.children,x,S.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===io&&zA(_)===b.type)?(x=i(b,S.props),x.ref=Kh(y,b,S),x.return=y,x):(x=Qg(S.type,S.key,S.props,null,y.mode,x),x.ref=Kh(y,b,S),x.return=y,x)}function u(y,b,S,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=Wv(S,y.mode,x),b.return=y,b):(b=i(b,S.children||[]),b.return=y,b)}function h(y,b,S,x,_){return b===null||b.tag!==7?(b=Jl(S,y.mode,x,_),b.return=y,b):(b=i(b,S),b.return=y,b)}function d(y,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Vv(""+b,y.mode,S),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fg:return S=Qg(b.type,b.key,b.props,null,y.mode,S),S.ref=Kh(y,null,b),S.return=y,S;case Cc:return b=Wv(b,y.mode,S),b.return=y,b;case io:var x=b._init;return d(y,x(b._payload),S)}if(rd(b)||Wh(b))return b=Jl(b,y.mode,S,null),b.return=y,b;xg(y,b)}return null}function f(y,b,S,x){var _=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return _!==null?null:l(y,b,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case fg:return S.key===_?c(y,b,S,x):null;case Cc:return S.key===_?u(y,b,S,x):null;case io:return _=S._init,f(y,b,_(S._payload),x)}if(rd(S)||Wh(S))return _!==null?null:h(y,b,S,x,null);xg(y,S)}return null}function g(y,b,S,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(S)||null,l(b,y,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fg:return y=y.get(x.key===null?S:x.key)||null,c(b,y,x,_);case Cc:return y=y.get(x.key===null?S:x.key)||null,u(b,y,x,_);case io:var T=x._init;return g(y,b,S,T(x._payload),_)}if(rd(x)||Wh(x))return y=y.get(S)||null,h(b,y,x,_,null);xg(b,x)}return null}function m(y,b,S,x){for(var _=null,T=null,k=b,R=b=0,D=null;k!==null&&R<S.length;R++){k.index>R?(D=k,k=null):D=k.sibling;var M=f(y,k,S[R],x);if(M===null){k===null&&(k=D);break}n&&k&&M.alternate===null&&e(y,k),b=r(M,b,R),T===null?_=M:T.sibling=M,T=M,k=D}if(R===S.length)return t(y,k),Ke&&Ta(y,R),_;if(k===null){for(;R<S.length;R++)k=d(y,S[R],x),k!==null&&(b=r(k,b,R),T===null?_=k:T.sibling=k,T=k);return Ke&&Ta(y,R),_}for(k=s(y,k);R<S.length;R++)D=g(k,y,R,S[R],x),D!==null&&(n&&D.alternate!==null&&k.delete(D.key===null?R:D.key),b=r(D,b,R),T===null?_=D:T.sibling=D,T=D);return n&&k.forEach(function(I){return e(y,I)}),Ke&&Ta(y,R),_}function v(y,b,S,x){var _=Wh(S);if(typeof _!="function")throw Error(F(150));if(S=_.call(S),S==null)throw Error(F(151));for(var T=_=null,k=b,R=b=0,D=null,M=S.next();k!==null&&!M.done;R++,M=S.next()){k.index>R?(D=k,k=null):D=k.sibling;var I=f(y,k,M.value,x);if(I===null){k===null&&(k=D);break}n&&k&&I.alternate===null&&e(y,k),b=r(I,b,R),T===null?_=I:T.sibling=I,T=I,k=D}if(M.done)return t(y,k),Ke&&Ta(y,R),_;if(k===null){for(;!M.done;R++,M=S.next())M=d(y,M.value,x),M!==null&&(b=r(M,b,R),T===null?_=M:T.sibling=M,T=M);return Ke&&Ta(y,R),_}for(k=s(y,k);!M.done;R++,M=S.next())M=g(k,y,R,M.value,x),M!==null&&(n&&M.alternate!==null&&k.delete(M.key===null?R:M.key),b=r(M,b,R),T===null?_=M:T.sibling=M,T=M);return n&&k.forEach(function(H){return e(y,H)}),Ke&&Ta(y,R),_}function A(y,b,S,x){if(typeof S=="object"&&S!==null&&S.type===_c&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case fg:e:{for(var _=S.key,T=b;T!==null;){if(T.key===_){if(_=S.type,_===_c){if(T.tag===7){t(y,T.sibling),b=i(T,S.props.children),b.return=y,y=b;break e}}else if(T.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===io&&zA(_)===T.type){t(y,T.sibling),b=i(T,S.props),b.ref=Kh(y,T,S),b.return=y,y=b;break e}t(y,T);break}else e(y,T);T=T.sibling}S.type===_c?(b=Jl(S.props.children,y.mode,x,S.key),b.return=y,y=b):(x=Qg(S.type,S.key,S.props,null,y.mode,x),x.ref=Kh(y,b,S),x.return=y,y=x)}return o(y);case Cc:e:{for(T=S.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){t(y,b.sibling),b=i(b,S.children||[]),b.return=y,y=b;break e}else{t(y,b);break}else e(y,b);b=b.sibling}b=Wv(S,y.mode,x),b.return=y,y=b}return o(y);case io:return T=S._init,A(y,b,T(S._payload),x)}if(rd(S))return m(y,b,S,x);if(Wh(S))return v(y,b,S,x);xg(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(t(y,b.sibling),b=i(b,S),b.return=y,y=b):(t(y,b),b=Vv(S,y.mode,x),b.return=y,y=b),o(y)):t(y,b)}return A}var _h=Bx(!0),jx=Bx(!1),Gm=Aa(null),qm=null,Nc=null,tS=null;function nS(){tS=Nc=qm=null}function sS(n){var e=Gm.current;$e(Gm),n._currentValue=e}function N0(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Gc(n,e){qm=n,tS=Nc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(On=!0),n.firstContext=null)}function js(n){var e=n._currentValue;if(tS!==n)if(n={context:n,memoizedValue:e,next:null},Nc===null){if(qm===null)throw Error(F(308));Nc=n,qm.dependencies={lanes:0,firstContext:n}}else Nc=Nc.next=n;return e}var Oa=null;function iS(n){Oa===null?Oa=[n]:Oa.push(n)}function zx(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,iS(e)):(t.next=i.next,i.next=t),e.interleaved=t,Wr(n,s)}function Wr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ro=!1;function rS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ux(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function zr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ua(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,me&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Wr(n,t)}return i=s.interleaved,i===null?(e.next=e,iS(s)):(e.next=i.next,i.next=e),s.interleaved=e,Wr(n,t)}function Wg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,Vb(n,t)}}function UA(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Xm(n,e,t,s){var i=n.updateQueue;ro=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;o=0,h=u=c=null,l=r;do{var f=l.lane,g=l.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=n,v=l;switch(f=e,g=t,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(g,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(g,d,f):m,f==null)break e;d=st({},d,f);break e;case 2:ro=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=d):h=h.next=g,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);sc|=o,n.lanes=o,n.memoizedState=d}}function HA(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(F(191,i));i.call(s)}}}var Jp={},qi=Aa(Jp),Kd=Aa(Jp),Qd=Aa(Jp);function Fa(n){if(n===Jp)throw Error(F(174));return n}function oS(n,e){switch(je(Qd,e),je(Kd,n),je(qi,Jp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:p0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=p0(e,n)}$e(qi),je(qi,e)}function Th(){$e(qi),$e(Kd),$e(Qd)}function Hx(n){Fa(Qd.current);var e=Fa(qi.current),t=p0(e,n.type);e!==t&&(je(Kd,n),je(qi,t))}function aS(n){Kd.current===n&&($e(qi),$e(Kd))}var Ze=Aa(0);function Ym(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bv=[];function lS(){for(var n=0;n<Bv.length;n++)Bv[n]._workInProgressVersionPrimary=null;Bv.length=0}var Gg=Qr.ReactCurrentDispatcher,jv=Qr.ReactCurrentBatchConfig,nc=0,tt=null,xt=null,It=null,Km=!1,Nd=!1,Jd=0,GR=0;function Kt(){throw Error(F(321))}function cS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ci(n[t],e[t]))return!1;return!0}function uS(n,e,t,s,i,r){if(nc=r,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gg.current=n===null||n.memoizedState===null?KR:QR,n=t(s,i),Nd){r=0;do{if(Nd=!1,Jd=0,25<=r)throw Error(F(301));r+=1,It=xt=null,e.updateQueue=null,Gg.current=JR,n=t(s,i)}while(Nd)}if(Gg.current=Qm,e=xt!==null&&xt.next!==null,nc=0,It=xt=tt=null,Km=!1,e)throw Error(F(300));return n}function hS(){var n=Jd!==0;return Jd=0,n}function vi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?tt.memoizedState=It=n:It=It.next=n,It}function zs(){if(xt===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=xt.next;var e=It===null?tt.memoizedState:It.next;if(e!==null)It=e,xt=n;else{if(n===null)throw Error(F(310));xt=n,n={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},It===null?tt.memoizedState=It=n:It=It.next=n}return It}function Zd(n,e){return typeof e=="function"?e(n):e}function zv(n){var e=zs(),t=e.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=n;var s=xt,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var l=o=null,c=null,u=r;do{var h=u.lane;if((nc&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=s):c=c.next=d,tt.lanes|=h,sc|=h}u=u.next}while(u!==null&&u!==r);c===null?o=s:c.next=l,ci(s,e.memoizedState)||(On=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,tt.lanes|=r,sc|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Uv(n){var e=zs(),t=e.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do r=n(r,o.action),o=o.next;while(o!==i);ci(r,e.memoizedState)||(On=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function $x(){}function Vx(n,e){var t=tt,s=zs(),i=e(),r=!ci(s.memoizedState,i);if(r&&(s.memoizedState=i,On=!0),s=s.queue,dS(qx.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||It!==null&&It.memoizedState.tag&1){if(t.flags|=2048,ef(9,Gx.bind(null,t,s,i,e),void 0,null),Ot===null)throw Error(F(349));nc&30||Wx(t,e,i)}return i}function Wx(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Gx(n,e,t,s){e.value=t,e.getSnapshot=s,Xx(e)&&Yx(n)}function qx(n,e,t){return t(function(){Xx(e)&&Yx(n)})}function Xx(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ci(n,t)}catch{return!0}}function Yx(n){var e=Wr(n,1);e!==null&&li(e,n,1,-1)}function $A(n){var e=vi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:n},e.queue=n,n=n.dispatch=YR.bind(null,tt,n),[e.memoizedState,n]}function ef(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function Kx(){return zs().memoizedState}function qg(n,e,t,s){var i=vi();tt.flags|=n,i.memoizedState=ef(1|e,t,void 0,s===void 0?null:s)}function Wy(n,e,t,s){var i=zs();s=s===void 0?null:s;var r=void 0;if(xt!==null){var o=xt.memoizedState;if(r=o.destroy,s!==null&&cS(s,o.deps)){i.memoizedState=ef(e,t,r,s);return}}tt.flags|=n,i.memoizedState=ef(1|e,t,r,s)}function VA(n,e){return qg(8390656,8,n,e)}function dS(n,e){return Wy(2048,8,n,e)}function Qx(n,e){return Wy(4,2,n,e)}function Jx(n,e){return Wy(4,4,n,e)}function Zx(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function eC(n,e,t){return t=t!=null?t.concat([n]):null,Wy(4,4,Zx.bind(null,e,n),t)}function fS(){}function tC(n,e){var t=zs();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&cS(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function nC(n,e){var t=zs();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&cS(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function sC(n,e,t){return nc&21?(ci(t,e)||(t=lx(),tt.lanes|=t,sc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,On=!0),n.memoizedState=t)}function qR(n,e){var t=_e;_e=t!==0&&4>t?t:4,n(!0);var s=jv.transition;jv.transition={};try{n(!1),e()}finally{_e=t,jv.transition=s}}function iC(){return zs().memoizedState}function XR(n,e,t){var s=da(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},rC(n))oC(e,t);else if(t=zx(n,e,t,s),t!==null){var i=bn();li(t,n,s,i),aC(t,e,s)}}function YR(n,e,t){var s=da(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(rC(n))oC(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,l=r(o,t);if(i.hasEagerState=!0,i.eagerState=l,ci(l,o)){var c=e.interleaved;c===null?(i.next=i,iS(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}t=zx(n,e,i,s),t!==null&&(i=bn(),li(t,n,s,i),aC(t,e,s))}}function rC(n){var e=n.alternate;return n===tt||e!==null&&e===tt}function oC(n,e){Nd=Km=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function aC(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,Vb(n,t)}}var Qm={readContext:js,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},KR={readContext:js,useCallback:function(n,e){return vi().memoizedState=[n,e===void 0?null:e],n},useContext:js,useEffect:VA,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,qg(4194308,4,Zx.bind(null,e,n),t)},useLayoutEffect:function(n,e){return qg(4194308,4,n,e)},useInsertionEffect:function(n,e){return qg(4,2,n,e)},useMemo:function(n,e){var t=vi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=vi();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=XR.bind(null,tt,n),[s.memoizedState,n]},useRef:function(n){var e=vi();return n={current:n},e.memoizedState=n},useState:$A,useDebugValue:fS,useDeferredValue:function(n){return vi().memoizedState=n},useTransition:function(){var n=$A(!1),e=n[0];return n=qR.bind(null,n[1]),vi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=tt,i=vi();if(Ke){if(t===void 0)throw Error(F(407));t=t()}else{if(t=e(),Ot===null)throw Error(F(349));nc&30||Wx(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,VA(qx.bind(null,s,r,n),[n]),s.flags|=2048,ef(9,Gx.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=vi(),e=Ot.identifierPrefix;if(Ke){var t=jr,s=Br;t=(s&~(1<<32-ai(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=GR++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},QR={readContext:js,useCallback:tC,useContext:js,useEffect:dS,useImperativeHandle:eC,useInsertionEffect:Qx,useLayoutEffect:Jx,useMemo:nC,useReducer:zv,useRef:Kx,useState:function(){return zv(Zd)},useDebugValue:fS,useDeferredValue:function(n){var e=zs();return sC(e,xt.memoizedState,n)},useTransition:function(){var n=zv(Zd)[0],e=zs().memoizedState;return[n,e]},useMutableSource:$x,useSyncExternalStore:Vx,useId:iC,unstable_isNewReconciler:!1},JR={readContext:js,useCallback:tC,useContext:js,useEffect:dS,useImperativeHandle:eC,useInsertionEffect:Qx,useLayoutEffect:Jx,useMemo:nC,useReducer:Uv,useRef:Kx,useState:function(){return Uv(Zd)},useDebugValue:fS,useDeferredValue:function(n){var e=zs();return xt===null?e.memoizedState=n:sC(e,xt.memoizedState,n)},useTransition:function(){var n=Uv(Zd)[0],e=zs().memoizedState;return[n,e]},useMutableSource:$x,useSyncExternalStore:Vx,useId:iC,unstable_isNewReconciler:!1};function Ws(n,e){if(n&&n.defaultProps){e=st({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function I0(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:st({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Gy={isMounted:function(n){return(n=n._reactInternals)?cc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=bn(),i=da(n),r=zr(s,i);r.payload=e,t!=null&&(r.callback=t),e=ua(n,r,i),e!==null&&(li(e,n,i,s),Wg(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=bn(),i=da(n),r=zr(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=ua(n,r,i),e!==null&&(li(e,n,i,s),Wg(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=bn(),s=da(n),i=zr(t,s);i.tag=2,e!=null&&(i.callback=e),e=ua(n,i,s),e!==null&&(li(e,n,s,t),Wg(e,n,s))}};function WA(n,e,t,s,i,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!Gd(t,s)||!Gd(i,r):!0}function lC(n,e,t){var s=!1,i=ma,r=e.contextType;return typeof r=="object"&&r!==null?r=js(r):(i=Bn(e)?ec:un.current,s=e.contextTypes,r=(s=s!=null)?xh(n,i):ma),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gy,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function GA(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&Gy.enqueueReplaceState(e,e.state,null)}function O0(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},rS(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=js(r):(r=Bn(e)?ec:un.current,i.context=xh(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(I0(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gy.enqueueReplaceState(i,i.state,null),Xm(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function kh(n,e){try{var t="",s=e;do t+=_P(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function Hv(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function F0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var ZR=typeof WeakMap=="function"?WeakMap:Map;function cC(n,e,t){t=zr(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){Zm||(Zm=!0,q0=s),F0(n,e)},t}function uC(n,e,t){t=zr(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){F0(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){F0(n,e),typeof s!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function qA(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new ZR;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=fL.bind(null,n,e,t),e.then(n,n))}function XA(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function YA(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=zr(-1,1),e.tag=2,ua(t,e,1))),t.lanes|=1),n)}var eL=Qr.ReactCurrentOwner,On=!1;function yn(n,e,t,s){e.child=n===null?jx(e,null,t,s):_h(e,n.child,t,s)}function KA(n,e,t,s,i){t=t.render;var r=e.ref;return Gc(e,i),s=uS(n,e,t,s,r,i),t=hS(),n!==null&&!On?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Gr(n,e,i)):(Ke&&t&&Jb(e),e.flags|=1,yn(n,e,s,i),e.child)}function QA(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!SS(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,hC(n,e,r,s,i)):(n=Qg(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:Gd,t(o,s)&&n.ref===e.ref)return Gr(n,e,i)}return e.flags|=1,n=fa(r,s),n.ref=e.ref,n.return=e,e.child=n}function hC(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(Gd(r,s)&&n.ref===e.ref)if(On=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(On=!0);else return e.lanes=n.lanes,Gr(n,e,i)}return B0(n,e,t,s,i)}function dC(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Oc,cs),cs|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,je(Oc,cs),cs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,je(Oc,cs),cs|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,je(Oc,cs),cs|=s;return yn(n,e,i,t),e.child}function fC(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function B0(n,e,t,s,i){var r=Bn(t)?ec:un.current;return r=xh(e,r),Gc(e,i),t=uS(n,e,t,s,r,i),s=hS(),n!==null&&!On?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Gr(n,e,i)):(Ke&&s&&Jb(e),e.flags|=1,yn(n,e,t,i),e.child)}function JA(n,e,t,s,i){if(Bn(t)){var r=!0;$m(e)}else r=!1;if(Gc(e,i),e.stateNode===null)Xg(n,e),lC(e,t,s),O0(e,t,s,i),s=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=js(u):(u=Bn(t)?ec:un.current,u=xh(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&GA(e,o,s,u),ro=!1;var f=e.memoizedState;o.state=f,Xm(e,s,o,i),c=e.memoizedState,l!==s||f!==c||Fn.current||ro?(typeof h=="function"&&(I0(e,t,h,s),c=e.memoizedState),(l=ro||WA(e,t,l,s,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Ux(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ws(e.type,l),o.props=u,d=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=js(c):(c=Bn(t)?ec:un.current,c=xh(e,c));var g=t.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&GA(e,o,s,c),ro=!1,f=e.memoizedState,o.state=f,Xm(e,s,o,i);var m=e.memoizedState;l!==d||f!==m||Fn.current||ro?(typeof g=="function"&&(I0(e,t,g,s),m=e.memoizedState),(u=ro||WA(e,t,u,s,f,m,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),o.props=s,o.state=m,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return j0(n,e,t,s,r,i)}function j0(n,e,t,s,i,r){fC(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&FA(e,t,!1),Gr(n,e,r);s=e.stateNode,eL.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=_h(e,n.child,null,r),e.child=_h(e,null,l,r)):yn(n,e,l,r),e.memoizedState=s.state,i&&FA(e,t,!0),e.child}function pC(n){var e=n.stateNode;e.pendingContext?OA(n,e.pendingContext,e.pendingContext!==e.context):e.context&&OA(n,e.context,!1),oS(n,e.containerInfo)}function ZA(n,e,t,s,i){return Ch(),eS(i),e.flags|=256,yn(n,e,t,s),e.child}var z0={dehydrated:null,treeContext:null,retryLane:0};function U0(n){return{baseLanes:n,cachePool:null,transitions:null}}function gC(n,e,t){var s=e.pendingProps,i=Ze.current,r=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(i&2)!==0),l?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),je(Ze,i&1),n===null)return D0(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,r?(s=e.mode,r=e.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Yy(o,s,0,null),n=Jl(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=U0(t),e.memoizedState=z0,n):pS(e,o));if(i=n.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return tL(n,e,o,s,l,i,t);if(r){r=s.fallback,o=e.mode,i=n.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=fa(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?r=fa(l,r):(r=Jl(r,o,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,o=n.child.memoizedState,o=o===null?U0(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=z0,s}return r=n.child,n=r.sibling,s=fa(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function pS(n,e){return e=Yy({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Cg(n,e,t,s){return s!==null&&eS(s),_h(e,n.child,null,t),n=pS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function tL(n,e,t,s,i,r,o){if(t)return e.flags&256?(e.flags&=-257,s=Hv(Error(F(422))),Cg(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=Yy({mode:"visible",children:s.children},i,0,null),r=Jl(r,i,o,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&_h(e,n.child,null,o),e.child.memoizedState=U0(o),e.memoizedState=z0,r);if(!(e.mode&1))return Cg(n,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,r=Error(F(419)),s=Hv(r,s,void 0),Cg(n,e,o,s)}if(l=(o&n.childLanes)!==0,On||l){if(s=Ot,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Wr(n,i),li(s,n,i,-1))}return bS(),s=Hv(Error(F(421))),Cg(n,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=pL.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,ds=ca(i.nextSibling),fs=e,Ke=!0,ri=null,n!==null&&(Ms[Ds++]=Br,Ms[Ds++]=jr,Ms[Ds++]=tc,Br=n.id,jr=n.overflow,tc=e),e=pS(e,s.children),e.flags|=4096,e)}function e1(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),N0(n.return,e,t)}function $v(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function mC(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(yn(n,e,s.children,t),s=Ze.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&e1(n,t,e);else if(n.tag===19)e1(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(je(Ze,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Ym(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),$v(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Ym(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}$v(e,!0,t,null,r);break;case"together":$v(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Gr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),sc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(F(153));if(e.child!==null){for(n=e.child,t=fa(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=fa(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function nL(n,e,t){switch(e.tag){case 3:pC(e),Ch();break;case 5:Hx(e);break;case 1:Bn(e.type)&&$m(e);break;case 4:oS(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;je(Gm,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(je(Ze,Ze.current&1),e.flags|=128,null):t&e.child.childLanes?gC(n,e,t):(je(Ze,Ze.current&1),n=Gr(n,e,t),n!==null?n.sibling:null);je(Ze,Ze.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return mC(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(Ze,Ze.current),s)break;return null;case 22:case 23:return e.lanes=0,dC(n,e,t)}return Gr(n,e,t)}var yC,H0,vC,wC;yC=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};H0=function(){};vC=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,Fa(qi.current);var r=null;switch(t){case"input":i=u0(n,i),s=u0(n,s),r=[];break;case"select":i=st({},i,{value:void 0}),s=st({},s,{value:void 0}),r=[];break;case"textarea":i=f0(n,i),s=f0(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Um)}g0(t,s);var o;t=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jd.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var c=s[u];if(l=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ue("scroll",n),r||l===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};wC=function(n,e,t,s){t!==s&&(e.flags|=4)};function Qh(n,e){if(!Ke)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function Qt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function sL(n,e,t){var s=e.pendingProps;switch(Zb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return Bn(e.type)&&Hm(),Qt(e),null;case 3:return s=e.stateNode,Th(),$e(Fn),$e(un),lS(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Eg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ri!==null&&(K0(ri),ri=null))),H0(n,e),Qt(e),null;case 5:aS(e);var i=Fa(Qd.current);if(t=e.type,n!==null&&e.stateNode!=null)vC(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(F(166));return Qt(e),null}if(n=Fa(qi.current),Eg(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[Hi]=e,s[Yd]=r,n=(e.mode&1)!==0,t){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(i=0;i<ad.length;i++)Ue(ad[i],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":cA(s,r),Ue("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Ue("invalid",s);break;case"textarea":hA(s,r),Ue("invalid",s)}g0(t,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?s.textContent!==l&&(r.suppressHydrationWarning!==!0&&Ag(s.textContent,l,n),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&Ag(s.textContent,l,n),i=["children",""+l]):jd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ue("scroll",s)}switch(t){case"input":pg(s),uA(s,r,!0);break;case"textarea":pg(s),dA(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=Um)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=qE(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[Hi]=e,n[Yd]=s,yC(n,e,!1,!1),e.stateNode=n;e:{switch(o=m0(t,s),t){case"dialog":Ue("cancel",n),Ue("close",n),i=s;break;case"iframe":case"object":case"embed":Ue("load",n),i=s;break;case"video":case"audio":for(i=0;i<ad.length;i++)Ue(ad[i],n);i=s;break;case"source":Ue("error",n),i=s;break;case"img":case"image":case"link":Ue("error",n),Ue("load",n),i=s;break;case"details":Ue("toggle",n),i=s;break;case"input":cA(n,s),i=u0(n,s),Ue("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=st({},s,{value:void 0}),Ue("invalid",n);break;case"textarea":hA(n,s),i=f0(n,s),Ue("invalid",n);break;default:i=s}g0(t,i),l=i;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?KE(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XE(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&zd(n,c):typeof c=="number"&&zd(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(jd.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Ue("scroll",n):c!=null&&Bb(n,r,c,o))}switch(t){case"input":pg(n),uA(n,s,!1);break;case"textarea":pg(n),dA(n);break;case"option":s.value!=null&&n.setAttribute("value",""+ga(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?Hc(n,!!s.multiple,r,!1):s.defaultValue!=null&&Hc(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Um)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(n&&e.stateNode!=null)wC(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(F(166));if(t=Fa(Qd.current),Fa(qi.current),Eg(e)){if(s=e.stateNode,t=e.memoizedProps,s[Hi]=e,(r=s.nodeValue!==t)&&(n=fs,n!==null))switch(n.tag){case 3:Ag(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ag(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Hi]=e,e.stateNode=s}return Qt(e),null;case 13:if($e(Ze),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ke&&ds!==null&&e.mode&1&&!(e.flags&128))Fx(),Ch(),e.flags|=98560,r=!1;else if(r=Eg(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(F(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(F(317));r[Hi]=e}else Ch(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),r=!1}else ri!==null&&(K0(ri),ri=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||Ze.current&1?Ct===0&&(Ct=3):bS())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return Th(),H0(n,e),n===null&&qd(e.stateNode.containerInfo),Qt(e),null;case 10:return sS(e.type._context),Qt(e),null;case 17:return Bn(e.type)&&Hm(),Qt(e),null;case 19:if($e(Ze),r=e.memoizedState,r===null)return Qt(e),null;if(s=(e.flags&128)!==0,o=r.rendering,o===null)if(s)Qh(r,!1);else{if(Ct!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Ym(n),o!==null){for(e.flags|=128,Qh(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return je(Ze,Ze.current&1|2),e.child}n=n.sibling}r.tail!==null&&ft()>Ph&&(e.flags|=128,s=!0,Qh(r,!1),e.lanes=4194304)}else{if(!s)if(n=Ym(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Qh(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Ke)return Qt(e),null}else 2*ft()-r.renderingStartTime>Ph&&t!==1073741824&&(e.flags|=128,s=!0,Qh(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ft(),e.sibling=null,t=Ze.current,je(Ze,s?t&1|2:t&1),e):(Qt(e),null);case 22:case 23:return wS(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?cs&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function iL(n,e){switch(Zb(e),e.tag){case 1:return Bn(e.type)&&Hm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Th(),$e(Fn),$e(un),lS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return aS(e),null;case 13:if($e(Ze),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ch()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return $e(Ze),null;case 4:return Th(),null;case 10:return sS(e.type._context),null;case 22:case 23:return wS(),null;case 24:return null;default:return null}}var _g=!1,an=!1,rL=typeof WeakSet=="function"?WeakSet:Set,X=null;function Ic(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){ct(n,e,s)}else t.current=null}function $0(n,e,t){try{t()}catch(s){ct(n,e,s)}}var t1=!1;function oL(n,e){if(_0=Bm,n=xx(),Qb(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var g;d!==t||i!==0&&d.nodeType!==3||(l=o+i),d!==r||s!==0&&d.nodeType!==3||(c=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===n)break t;if(f===t&&++u===i&&(l=o),f===r&&++h===s&&(c=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(T0={focusedElem:n,selectionRange:t},Bm=!1,X=e;X!==null;)if(e=X,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,X=n;else for(;X!==null;){e=X;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,A=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ws(e.type,v),A);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(x){ct(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}return m=t1,t1=!1,m}function Id(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&$0(e,t,r)}i=i.next}while(i!==s)}}function qy(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function V0(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function bC(n){var e=n.alternate;e!==null&&(n.alternate=null,bC(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Hi],delete e[Yd],delete e[R0],delete e[HR],delete e[$R])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function SC(n){return n.tag===5||n.tag===3||n.tag===4}function n1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||SC(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function W0(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Um));else if(s!==4&&(n=n.child,n!==null))for(W0(n,e,t),n=n.sibling;n!==null;)W0(n,e,t),n=n.sibling}function G0(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(G0(n,e,t),n=n.sibling;n!==null;)G0(n,e,t),n=n.sibling}var Vt=null,ii=!1;function no(n,e,t){for(t=t.child;t!==null;)AC(n,e,t),t=t.sibling}function AC(n,e,t){if(Gi&&typeof Gi.onCommitFiberUnmount=="function")try{Gi.onCommitFiberUnmount(jy,t)}catch{}switch(t.tag){case 5:an||Ic(t,e);case 6:var s=Vt,i=ii;Vt=null,no(n,e,t),Vt=s,ii=i,Vt!==null&&(ii?(n=Vt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Vt.removeChild(t.stateNode));break;case 18:Vt!==null&&(ii?(n=Vt,t=t.stateNode,n.nodeType===8?Ov(n.parentNode,t):n.nodeType===1&&Ov(n,t),Vd(n)):Ov(Vt,t.stateNode));break;case 4:s=Vt,i=ii,Vt=t.stateNode.containerInfo,ii=!0,no(n,e,t),Vt=s,ii=i;break;case 0:case 11:case 14:case 15:if(!an&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&$0(t,e,o),i=i.next}while(i!==s)}no(n,e,t);break;case 1:if(!an&&(Ic(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(l){ct(t,e,l)}no(n,e,t);break;case 21:no(n,e,t);break;case 22:t.mode&1?(an=(s=an)||t.memoizedState!==null,no(n,e,t),an=s):no(n,e,t);break;default:no(n,e,t)}}function s1(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new rL),e.forEach(function(s){var i=gL.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function Us(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Vt=l.stateNode,ii=!1;break e;case 3:Vt=l.stateNode.containerInfo,ii=!0;break e;case 4:Vt=l.stateNode.containerInfo,ii=!0;break e}l=l.return}if(Vt===null)throw Error(F(160));AC(r,o,i),Vt=null,ii=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){ct(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EC(e,n),e=e.sibling}function EC(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Us(e,n),fi(n),s&4){try{Id(3,n,n.return),qy(3,n)}catch(v){ct(n,n.return,v)}try{Id(5,n,n.return)}catch(v){ct(n,n.return,v)}}break;case 1:Us(e,n),fi(n),s&512&&t!==null&&Ic(t,t.return);break;case 5:if(Us(e,n),fi(n),s&512&&t!==null&&Ic(t,t.return),n.flags&32){var i=n.stateNode;try{zd(i,"")}catch(v){ct(n,n.return,v)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&WE(i,r),m0(l,o);var u=m0(l,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?KE(i,d):h==="dangerouslySetInnerHTML"?XE(i,d):h==="children"?zd(i,d):Bb(i,h,d,u)}switch(l){case"input":h0(i,r);break;case"textarea":GE(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?Hc(i,!!r.multiple,g,!1):f!==!!r.multiple&&(r.defaultValue!=null?Hc(i,!!r.multiple,r.defaultValue,!0):Hc(i,!!r.multiple,r.multiple?[]:"",!1))}i[Yd]=r}catch(v){ct(n,n.return,v)}}break;case 6:if(Us(e,n),fi(n),s&4){if(n.stateNode===null)throw Error(F(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(v){ct(n,n.return,v)}}break;case 3:if(Us(e,n),fi(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{Vd(e.containerInfo)}catch(v){ct(n,n.return,v)}break;case 4:Us(e,n),fi(n);break;case 13:Us(e,n),fi(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(yS=ft())),s&4&&s1(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(an=(u=an)||h,Us(e,n),an=u):Us(e,n),fi(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(X=n,h=n.child;h!==null;){for(d=X=h;X!==null;){switch(f=X,g=f.child,f.tag){case 0:case 11:case 14:case 15:Id(4,f,f.return);break;case 1:Ic(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){ct(s,t,v)}}break;case 5:Ic(f,f.return);break;case 22:if(f.memoizedState!==null){r1(d);continue}}g!==null?(g.return=f,X=g):r1(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=YE("display",o))}catch(v){ct(n,n.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){ct(n,n.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Us(e,n),fi(n),s&4&&s1(n);break;case 21:break;default:Us(e,n),fi(n)}}function fi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(SC(t)){var s=t;break e}t=t.return}throw Error(F(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(zd(i,""),s.flags&=-33);var r=n1(n);G0(n,r,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=n1(n);W0(n,l,o);break;default:throw Error(F(161))}}catch(c){ct(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function aL(n,e,t){X=n,xC(n)}function xC(n,e,t){for(var s=(n.mode&1)!==0;X!==null;){var i=X,r=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||_g;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||an;l=_g;var u=an;if(_g=o,(an=c)&&!u)for(X=i;X!==null;)o=X,c=o.child,o.tag===22&&o.memoizedState!==null?o1(i):c!==null?(c.return=o,X=c):o1(i);for(;r!==null;)X=r,xC(r),r=r.sibling;X=i,_g=l,an=u}i1(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,X=r):i1(n)}}function i1(n){for(;X!==null;){var e=X;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:an||qy(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!an)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ws(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&HA(e,r,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}HA(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Vd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}an||e.flags&512&&V0(e)}catch(f){ct(e,e.return,f)}}if(e===n){X=null;break}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}}function r1(n){for(;X!==null;){var e=X;if(e===n){X=null;break}var t=e.sibling;if(t!==null){t.return=e.return,X=t;break}X=e.return}}function o1(n){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{qy(4,e)}catch(c){ct(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){ct(e,i,c)}}var r=e.return;try{V0(e)}catch(c){ct(e,r,c)}break;case 5:var o=e.return;try{V0(e)}catch(c){ct(e,o,c)}}}catch(c){ct(e,e.return,c)}if(e===n){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var lL=Math.ceil,Jm=Qr.ReactCurrentDispatcher,gS=Qr.ReactCurrentOwner,Fs=Qr.ReactCurrentBatchConfig,me=0,Ot=null,yt=null,Xt=0,cs=0,Oc=Aa(0),Ct=0,tf=null,sc=0,Xy=0,mS=0,Od=null,In=null,yS=0,Ph=1/0,er=null,Zm=!1,q0=null,ha=null,Tg=!1,ia=null,ey=0,Fd=0,X0=null,Yg=-1,Kg=0;function bn(){return me&6?ft():Yg!==-1?Yg:Yg=ft()}function da(n){return n.mode&1?me&2&&Xt!==0?Xt&-Xt:WR.transition!==null?(Kg===0&&(Kg=lx()),Kg):(n=_e,n!==0||(n=window.event,n=n===void 0?16:gx(n.type)),n):1}function li(n,e,t,s){if(50<Fd)throw Fd=0,X0=null,Error(F(185));Yp(n,t,s),(!(me&2)||n!==Ot)&&(n===Ot&&(!(me&2)&&(Xy|=t),Ct===4&&ao(n,Xt)),jn(n,s),t===1&&me===0&&!(e.mode&1)&&(Ph=ft()+500,Vy&&Ea()))}function jn(n,e){var t=n.callbackNode;WP(n,e);var s=Fm(n,n===Ot?Xt:0);if(s===0)t!==null&&gA(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&gA(t),e===1)n.tag===0?VR(a1.bind(null,n)):Nx(a1.bind(null,n)),zR(function(){!(me&6)&&Ea()}),t=null;else{switch(cx(s)){case 1:t=$b;break;case 4:t=ox;break;case 16:t=Om;break;case 536870912:t=ax;break;default:t=Om}t=MC(t,CC.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function CC(n,e){if(Yg=-1,Kg=0,me&6)throw Error(F(327));var t=n.callbackNode;if(qc()&&n.callbackNode!==t)return null;var s=Fm(n,n===Ot?Xt:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=ty(n,s);else{e=s;var i=me;me|=2;var r=TC();(Ot!==n||Xt!==e)&&(er=null,Ph=ft()+500,Ql(n,e));do try{hL();break}catch(l){_C(n,l)}while(!0);nS(),Jm.current=r,me=i,yt!==null?e=0:(Ot=null,Xt=0,e=Ct)}if(e!==0){if(e===2&&(i=S0(n),i!==0&&(s=i,e=Y0(n,i))),e===1)throw t=tf,Ql(n,0),ao(n,s),jn(n,ft()),t;if(e===6)ao(n,s);else{if(i=n.current.alternate,!(s&30)&&!cL(i)&&(e=ty(n,s),e===2&&(r=S0(n),r!==0&&(s=r,e=Y0(n,r))),e===1))throw t=tf,Ql(n,0),ao(n,s),jn(n,ft()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(F(345));case 2:ka(n,In,er);break;case 3:if(ao(n,s),(s&130023424)===s&&(e=yS+500-ft(),10<e)){if(Fm(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){bn(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=P0(ka.bind(null,n,In,er),e);break}ka(n,In,er);break;case 4:if(ao(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var o=31-ai(s);r=1<<o,o=e[o],o>i&&(i=o),s&=~r}if(s=i,s=ft()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*lL(s/1960))-s,10<s){n.timeoutHandle=P0(ka.bind(null,n,In,er),s);break}ka(n,In,er);break;case 5:ka(n,In,er);break;default:throw Error(F(329))}}}return jn(n,ft()),n.callbackNode===t?CC.bind(null,n):null}function Y0(n,e){var t=Od;return n.current.memoizedState.isDehydrated&&(Ql(n,e).flags|=256),n=ty(n,e),n!==2&&(e=In,In=t,e!==null&&K0(e)),n}function K0(n){In===null?In=n:In.push.apply(In,n)}function cL(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!ci(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ao(n,e){for(e&=~mS,e&=~Xy,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ai(e),s=1<<t;n[t]=-1,e&=~s}}function a1(n){if(me&6)throw Error(F(327));qc();var e=Fm(n,0);if(!(e&1))return jn(n,ft()),null;var t=ty(n,e);if(n.tag!==0&&t===2){var s=S0(n);s!==0&&(e=s,t=Y0(n,s))}if(t===1)throw t=tf,Ql(n,0),ao(n,e),jn(n,ft()),t;if(t===6)throw Error(F(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ka(n,In,er),jn(n,ft()),null}function vS(n,e){var t=me;me|=1;try{return n(e)}finally{me=t,me===0&&(Ph=ft()+500,Vy&&Ea())}}function ic(n){ia!==null&&ia.tag===0&&!(me&6)&&qc();var e=me;me|=1;var t=Fs.transition,s=_e;try{if(Fs.transition=null,_e=1,n)return n()}finally{_e=s,Fs.transition=t,me=e,!(me&6)&&Ea()}}function wS(){cs=Oc.current,$e(Oc)}function Ql(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,jR(t)),yt!==null)for(t=yt.return;t!==null;){var s=t;switch(Zb(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Hm();break;case 3:Th(),$e(Fn),$e(un),lS();break;case 5:aS(s);break;case 4:Th();break;case 13:$e(Ze);break;case 19:$e(Ze);break;case 10:sS(s.type._context);break;case 22:case 23:wS()}t=t.return}if(Ot=n,yt=n=fa(n.current,null),Xt=cs=e,Ct=0,tf=null,mS=Xy=sc=0,In=Od=null,Oa!==null){for(e=0;e<Oa.length;e++)if(t=Oa[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var o=r.next;r.next=i,s.next=o}t.pending=s}Oa=null}return n}function _C(n,e){do{var t=yt;try{if(nS(),Gg.current=Qm,Km){for(var s=tt.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Km=!1}if(nc=0,It=xt=tt=null,Nd=!1,Jd=0,gS.current=null,t===null||t.return===null){Ct=1,tf=e,yt=null;break}e:{var r=n,o=t.return,l=t,c=e;if(e=Xt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=XA(o);if(g!==null){g.flags&=-257,YA(g,o,l,r,e),g.mode&1&&qA(r,u,e),e=g,c=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(c),e.updateQueue=v}else m.add(c);break e}else{if(!(e&1)){qA(r,u,e),bS();break e}c=Error(F(426))}}else if(Ke&&l.mode&1){var A=XA(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),YA(A,o,l,r,e),eS(kh(c,l));break e}}r=c=kh(c,l),Ct!==4&&(Ct=2),Od===null?Od=[r]:Od.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var y=cC(r,c,e);UA(r,y);break e;case 1:l=c;var b=r.type,S=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ha===null||!ha.has(S)))){r.flags|=65536,e&=-e,r.lanes|=e;var x=uC(r,l,e);UA(r,x);break e}}r=r.return}while(r!==null)}PC(t)}catch(_){e=_,yt===t&&t!==null&&(yt=t=t.return);continue}break}while(!0)}function TC(){var n=Jm.current;return Jm.current=Qm,n===null?Qm:n}function bS(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Ot===null||!(sc&268435455)&&!(Xy&268435455)||ao(Ot,Xt)}function ty(n,e){var t=me;me|=2;var s=TC();(Ot!==n||Xt!==e)&&(er=null,Ql(n,e));do try{uL();break}catch(i){_C(n,i)}while(!0);if(nS(),me=t,Jm.current=s,yt!==null)throw Error(F(261));return Ot=null,Xt=0,Ct}function uL(){for(;yt!==null;)kC(yt)}function hL(){for(;yt!==null&&!OP();)kC(yt)}function kC(n){var e=LC(n.alternate,n,cs);n.memoizedProps=n.pendingProps,e===null?PC(n):yt=e,gS.current=null}function PC(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=iL(t,e),t!==null){t.flags&=32767,yt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,yt=null;return}}else if(t=sL(t,e,cs),t!==null){yt=t;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=n}while(e!==null);Ct===0&&(Ct=5)}function ka(n,e,t){var s=_e,i=Fs.transition;try{Fs.transition=null,_e=1,dL(n,e,t,s)}finally{Fs.transition=i,_e=s}return null}function dL(n,e,t,s){do qc();while(ia!==null);if(me&6)throw Error(F(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(F(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(GP(n,r),n===Ot&&(yt=Ot=null,Xt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Tg||(Tg=!0,MC(Om,function(){return qc(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Fs.transition,Fs.transition=null;var o=_e;_e=1;var l=me;me|=4,gS.current=null,oL(n,t),EC(t,n),MR(T0),Bm=!!_0,T0=_0=null,n.current=t,aL(t),FP(),me=l,_e=o,Fs.transition=r}else n.current=t;if(Tg&&(Tg=!1,ia=n,ey=i),r=n.pendingLanes,r===0&&(ha=null),zP(t.stateNode),jn(n,ft()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if(Zm)throw Zm=!1,n=q0,q0=null,n;return ey&1&&n.tag!==0&&qc(),r=n.pendingLanes,r&1?n===X0?Fd++:(Fd=0,X0=n):Fd=0,Ea(),null}function qc(){if(ia!==null){var n=cx(ey),e=Fs.transition,t=_e;try{if(Fs.transition=null,_e=16>n?16:n,ia===null)var s=!1;else{if(n=ia,ia=null,ey=0,me&6)throw Error(F(331));var i=me;for(me|=4,X=n.current;X!==null;){var r=X,o=r.child;if(X.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(X=u;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:Id(8,h,r)}var d=h.child;if(d!==null)d.return=h,X=d;else for(;X!==null;){h=X;var f=h.sibling,g=h.return;if(bC(h),h===u){X=null;break}if(f!==null){f.return=g,X=f;break}X=g}}}var m=r.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var A=v.sibling;v.sibling=null,v=A}while(v!==null)}}X=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,X=o;else e:for(;X!==null;){if(r=X,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Id(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,X=y;break e}X=r.return}}var b=n.current;for(X=b;X!==null;){o=X;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,X=S;else e:for(o=b;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qy(9,l)}}catch(_){ct(l,l.return,_)}if(l===o){X=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,X=x;break e}X=l.return}}if(me=i,Ea(),Gi&&typeof Gi.onPostCommitFiberRoot=="function")try{Gi.onPostCommitFiberRoot(jy,n)}catch{}s=!0}return s}finally{_e=t,Fs.transition=e}}return!1}function l1(n,e,t){e=kh(t,e),e=cC(n,e,1),n=ua(n,e,1),e=bn(),n!==null&&(Yp(n,1,e),jn(n,e))}function ct(n,e,t){if(n.tag===3)l1(n,n,t);else for(;e!==null;){if(e.tag===3){l1(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ha===null||!ha.has(s))){n=kh(t,n),n=uC(e,n,1),e=ua(e,n,1),n=bn(),e!==null&&(Yp(e,1,n),jn(e,n));break}}e=e.return}}function fL(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=bn(),n.pingedLanes|=n.suspendedLanes&t,Ot===n&&(Xt&t)===t&&(Ct===4||Ct===3&&(Xt&130023424)===Xt&&500>ft()-yS?Ql(n,0):mS|=t),jn(n,e)}function RC(n,e){e===0&&(n.mode&1?(e=yg,yg<<=1,!(yg&130023424)&&(yg=4194304)):e=1);var t=bn();n=Wr(n,e),n!==null&&(Yp(n,e,t),jn(n,t))}function pL(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),RC(n,t)}function gL(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(F(314))}s!==null&&s.delete(e),RC(n,t)}var LC;LC=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Fn.current)On=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return On=!1,nL(n,e,t);On=!!(n.flags&131072)}else On=!1,Ke&&e.flags&1048576&&Ix(e,Wm,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Xg(n,e),n=e.pendingProps;var i=xh(e,un.current);Gc(e,t),i=uS(null,e,s,n,i,t);var r=hS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bn(s)?(r=!0,$m(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rS(e),i.updater=Gy,e.stateNode=i,i._reactInternals=e,O0(e,s,n,t),e=j0(null,e,s,!0,r,t)):(e.tag=0,Ke&&r&&Jb(e),yn(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Xg(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=yL(s),n=Ws(s,n),i){case 0:e=B0(null,e,s,n,t);break e;case 1:e=JA(null,e,s,n,t);break e;case 11:e=KA(null,e,s,n,t);break e;case 14:e=QA(null,e,s,Ws(s.type,n),t);break e}throw Error(F(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ws(s,i),B0(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ws(s,i),JA(n,e,s,i,t);case 3:e:{if(pC(e),n===null)throw Error(F(387));s=e.pendingProps,r=e.memoizedState,i=r.element,Ux(n,e),Xm(e,s,null,t);var o=e.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=kh(Error(F(423)),e),e=ZA(n,e,s,t,i);break e}else if(s!==i){i=kh(Error(F(424)),e),e=ZA(n,e,s,t,i);break e}else for(ds=ca(e.stateNode.containerInfo.firstChild),fs=e,Ke=!0,ri=null,t=jx(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ch(),s===i){e=Gr(n,e,t);break e}yn(n,e,s,t)}e=e.child}return e;case 5:return Hx(e),n===null&&D0(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,o=i.children,k0(s,i)?o=null:r!==null&&k0(s,r)&&(e.flags|=32),fC(n,e),yn(n,e,o,t),e.child;case 6:return n===null&&D0(e),null;case 13:return gC(n,e,t);case 4:return oS(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=_h(e,null,s,t):yn(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ws(s,i),KA(n,e,s,i,t);case 7:return yn(n,e,e.pendingProps,t),e.child;case 8:return yn(n,e,e.pendingProps.children,t),e.child;case 12:return yn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,je(Gm,s._currentValue),s._currentValue=o,r!==null)if(ci(r.value,o)){if(r.children===i.children&&!Fn.current){e=Gr(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(r.tag===1){c=zr(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),N0(r.return,t,e),l.lanes|=t;break}c=c.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(F(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),N0(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}yn(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Gc(e,t),i=js(i),s=s(i),e.flags|=1,yn(n,e,s,t),e.child;case 14:return s=e.type,i=Ws(s,e.pendingProps),i=Ws(s.type,i),QA(n,e,s,i,t);case 15:return hC(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ws(s,i),Xg(n,e),e.tag=1,Bn(s)?(n=!0,$m(e)):n=!1,Gc(e,t),lC(e,s,i),O0(e,s,i,t),j0(null,e,s,!0,n,t);case 19:return mC(n,e,t);case 22:return dC(n,e,t)}throw Error(F(156,e.tag))};function MC(n,e){return rx(n,e)}function mL(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(n,e,t,s){return new mL(n,e,t,s)}function SS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function yL(n){if(typeof n=="function")return SS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===zb)return 11;if(n===Ub)return 14}return 2}function fa(n,e){var t=n.alternate;return t===null?(t=Os(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Qg(n,e,t,s,i,r){var o=2;if(s=n,typeof n=="function")SS(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case _c:return Jl(t.children,i,r,e);case jb:o=8,i|=8;break;case o0:return n=Os(12,t,e,i|2),n.elementType=o0,n.lanes=r,n;case a0:return n=Os(13,t,e,i),n.elementType=a0,n.lanes=r,n;case l0:return n=Os(19,t,e,i),n.elementType=l0,n.lanes=r,n;case HE:return Yy(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case zE:o=10;break e;case UE:o=9;break e;case zb:o=11;break e;case Ub:o=14;break e;case io:o=16,s=null;break e}throw Error(F(130,n==null?n:typeof n,""))}return e=Os(o,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function Jl(n,e,t,s){return n=Os(7,n,s,e),n.lanes=t,n}function Yy(n,e,t,s){return n=Os(22,n,s,e),n.elementType=HE,n.lanes=t,n.stateNode={isHidden:!1},n}function Vv(n,e,t){return n=Os(6,n,null,e),n.lanes=t,n}function Wv(n,e,t){return e=Os(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function vL(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cv(0),this.expirationTimes=Cv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cv(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function AS(n,e,t,s,i,r,o,l,c){return n=new vL(n,e,t,l,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Os(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},rS(r),n}function wL(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cc,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function DC(n){if(!n)return ma;n=n._reactInternals;e:{if(cc(n)!==n||n.tag!==1)throw Error(F(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(n.tag===1){var t=n.type;if(Bn(t))return Dx(n,t,e)}return e}function NC(n,e,t,s,i,r,o,l,c){return n=AS(t,s,!0,n,i,r,o,l,c),n.context=DC(null),t=n.current,s=bn(),i=da(t),r=zr(s,i),r.callback=e??null,ua(t,r,i),n.current.lanes=i,Yp(n,i,s),jn(n,s),n}function Ky(n,e,t,s){var i=e.current,r=bn(),o=da(i);return t=DC(t),e.context===null?e.context=t:e.pendingContext=t,e=zr(r,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=ua(i,e,o),n!==null&&(li(n,i,o,r),Wg(n,i,o)),o}function ny(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function c1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function ES(n,e){c1(n,e),(n=n.alternate)&&c1(n,e)}function bL(){return null}var IC=typeof reportError=="function"?reportError:function(n){console.error(n)};function xS(n){this._internalRoot=n}Qy.prototype.render=xS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(F(409));Ky(n,e,null,null)};Qy.prototype.unmount=xS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ic(function(){Ky(null,n,null,null)}),e[Vr]=null}};function Qy(n){this._internalRoot=n}Qy.prototype.unstable_scheduleHydration=function(n){if(n){var e=dx();n={blockedOn:null,target:n,priority:e};for(var t=0;t<oo.length&&e!==0&&e<oo[t].priority;t++);oo.splice(t,0,n),t===0&&px(n)}};function CS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Jy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function u1(){}function SL(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=ny(o);r.call(u)}}var o=NC(e,s,n,0,null,!1,!1,"",u1);return n._reactRootContainer=o,n[Vr]=o.current,qd(n.nodeType===8?n.parentNode:n),ic(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var u=ny(c);l.call(u)}}var c=AS(n,0,!1,null,null,!1,!1,"",u1);return n._reactRootContainer=c,n[Vr]=c.current,qd(n.nodeType===8?n.parentNode:n),ic(function(){Ky(e,c,t,s)}),c}function Zy(n,e,t,s,i){var r=t._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var l=i;i=function(){var c=ny(o);l.call(c)}}Ky(e,o,n,i)}else o=SL(t,e,n,i,s);return ny(o)}ux=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=od(e.pendingLanes);t!==0&&(Vb(e,t|1),jn(e,ft()),!(me&6)&&(Ph=ft()+500,Ea()))}break;case 13:ic(function(){var s=Wr(n,1);if(s!==null){var i=bn();li(s,n,1,i)}}),ES(n,1)}};Wb=function(n){if(n.tag===13){var e=Wr(n,134217728);if(e!==null){var t=bn();li(e,n,134217728,t)}ES(n,134217728)}};hx=function(n){if(n.tag===13){var e=da(n),t=Wr(n,e);if(t!==null){var s=bn();li(t,n,e,s)}ES(n,e)}};dx=function(){return _e};fx=function(n,e){var t=_e;try{return _e=n,e()}finally{_e=t}};v0=function(n,e,t){switch(e){case"input":if(h0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=$y(s);if(!i)throw Error(F(90));VE(s),h0(s,i)}}}break;case"textarea":GE(n,t);break;case"select":e=t.value,e!=null&&Hc(n,!!t.multiple,e,!1)}};ZE=vS;ex=ic;var AL={usingClientEntryPoint:!1,Events:[Qp,Rc,$y,QE,JE,vS]},Jh={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EL={bundleType:Jh.bundleType,version:Jh.version,rendererPackageName:Jh.rendererPackageName,rendererConfig:Jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sx(n),n===null?null:n.stateNode},findFiberByHostInstance:Jh.findFiberByHostInstance||bL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kg.isDisabled&&kg.supportsFiber)try{jy=kg.inject(EL),Gi=kg}catch{}}ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AL;ys.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CS(e))throw Error(F(200));return wL(n,e,null,t)};ys.createRoot=function(n,e){if(!CS(n))throw Error(F(299));var t=!1,s="",i=IC;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=AS(n,1,!1,null,null,t,!1,s,i),n[Vr]=e.current,qd(n.nodeType===8?n.parentNode:n),new xS(e)};ys.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(F(188)):(n=Object.keys(n).join(","),Error(F(268,n)));return n=sx(e),n=n===null?null:n.stateNode,n};ys.flushSync=function(n){return ic(n)};ys.hydrate=function(n,e,t){if(!Jy(e))throw Error(F(200));return Zy(null,n,e,!0,t)};ys.hydrateRoot=function(n,e,t){if(!CS(n))throw Error(F(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",o=IC;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=NC(e,null,n,1,t??null,i,!1,r,o),n[Vr]=e.current,qd(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Qy(e)};ys.render=function(n,e,t){if(!Jy(e))throw Error(F(200));return Zy(null,n,e,!1,t)};ys.unmountComponentAtNode=function(n){if(!Jy(n))throw Error(F(40));return n._reactRootContainer?(ic(function(){Zy(null,null,n,!1,function(){n._reactRootContainer=null,n[Vr]=null})}),!0):!1};ys.unstable_batchedUpdates=vS;ys.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!Jy(t))throw Error(F(200));if(n==null||n._reactInternals===void 0)throw Error(F(38));return Zy(n,e,t,!1,s)};ys.version="18.3.1-next-f1338f8080-20240426";function OC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OC)}catch(n){console.error(n)}}OC(),OE.exports=ys;var xL=OE.exports,h1=xL;i0.createRoot=h1.createRoot,i0.hydrateRoot=h1.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nf(){return nf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},nf.apply(this,arguments)}var ra;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ra||(ra={}));const d1="popstate";function CL(n){n===void 0&&(n={});function e(s,i){let{pathname:r,search:o,hash:l}=s.location;return Q0("",{pathname:r,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:sy(i)}return TL(e,t,null,n)}function pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _S(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _L(){return Math.random().toString(36).substr(2,8)}function f1(n,e){return{usr:n.state,key:n.key,idx:e}}function Q0(n,e,t,s){return t===void 0&&(t=null),nf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Fh(e):e,{state:t,key:e&&e.key||s||_L()})}function sy(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Fh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function TL(n,e,t,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:r=!1}=s,o=i.history,l=ra.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(nf({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=ra.Pop;let A=h(),y=A==null?null:A-u;u=A,c&&c({action:l,location:v.location,delta:y})}function f(A,y){l=ra.Push;let b=Q0(v.location,A,y);u=h()+1;let S=f1(b,u),x=v.createHref(b);try{o.pushState(S,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(x)}r&&c&&c({action:l,location:v.location,delta:1})}function g(A,y){l=ra.Replace;let b=Q0(v.location,A,y);u=h();let S=f1(b,u),x=v.createHref(b);o.replaceState(S,"",x),r&&c&&c({action:l,location:v.location,delta:0})}function m(A){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof A=="string"?A:sy(A);return b=b.replace(/ $/,"%20"),pt(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let v={get action(){return l},get location(){return n(i,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(d1,d),c=A,()=>{i.removeEventListener(d1,d),c=null}},createHref(A){return e(i,A)},createURL:m,encodeLocation(A){let y=m(A);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:g,go(A){return o.go(A)}};return v}var p1;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(p1||(p1={}));function kL(n,e,t){return t===void 0&&(t="/"),PL(n,e,t)}function PL(n,e,t,s){let i=typeof e=="string"?Fh(e):e,r=TS(i.pathname||"/",t);if(r==null)return null;let o=FC(n);RL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=HL(r);l=jL(o[c],u)}return l}function FC(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let i=(r,o,l)=>{let c={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};c.relativePath.startsWith("/")&&(pt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=pa([s,c.relativePath]),h=t.concat(c);r.children&&r.children.length>0&&(pt(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),FC(r.children,e,h,u)),!(r.path==null&&!r.index)&&e.push({path:u,score:FL(u,r.index),routesMeta:h})};return n.forEach((r,o)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))i(r,o);else for(let c of BC(r.path))i(r,o,c)}),e}function BC(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let o=BC(s.join("/")),l=[];return l.push(...o.map(c=>c===""?r:[r,c].join("/"))),i&&l.push(...o),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function RL(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:BL(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const LL=/^:[\w-]+$/,ML=3,DL=2,NL=1,IL=10,OL=-2,g1=n=>n==="*";function FL(n,e){let t=n.split("/"),s=t.length;return t.some(g1)&&(s+=OL),e&&(s+=DL),t.filter(i=>!g1(i)).reduce((i,r)=>i+(LL.test(r)?ML:r===""?NL:IL),s)}function BL(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function jL(n,e,t){let{routesMeta:s}=n,i={},r="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=zL({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:pa([r,d.pathname]),pathnameBase:qL(pa([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=pa([r,d.pathnameBase]))}return o}function zL(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=UL(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((u,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let v=l[d]||"";o=r.slice(0,r.length-v.length).replace(/(.)\/+$/,"$1")}const m=l[d];return g&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:n}}function UL(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),_S(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function HL(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _S(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function TS(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const $L=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VL=n=>$L.test(n);function WL(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?Fh(n):n,r;if(t)if(VL(t))r=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),_S(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+t))}t.startsWith("/")?r=m1(t.substring(1),"/"):r=m1(t,e)}else r=e;return{pathname:r,search:XL(s),hash:YL(i)}}function m1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Gv(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GL(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function kS(n,e){let t=GL(n);return e?t.map((s,i)=>i===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function PS(n,e,t,s){s===void 0&&(s=!1);let i;typeof n=="string"?i=Fh(n):(i=nf({},n),pt(!i.pathname||!i.pathname.includes("?"),Gv("?","pathname","search",i)),pt(!i.pathname||!i.pathname.includes("#"),Gv("#","pathname","hash",i)),pt(!i.search||!i.search.includes("#"),Gv("#","search","hash",i)));let r=n===""||i.pathname==="",o=r?"/":i.pathname,l;if(o==null)l=t;else{let d=e.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let c=WL(i,l),u=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const pa=n=>n.join("/").replace(/\/\/+/g,"/"),qL=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),XL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,YL=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function KL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const jC=["post","put","patch","delete"];new Set(jC);const QL=["get",...jC];new Set(QL);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sf(){return sf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},sf.apply(this,arguments)}const RS=P.createContext(null),JL=P.createContext(null),xa=P.createContext(null),ev=P.createContext(null),Jr=P.createContext({outlet:null,matches:[],isDataRoute:!1}),zC=P.createContext(null);function ZL(n,e){let{relative:t}=e===void 0?{}:e;Bh()||pt(!1);let{basename:s,navigator:i}=P.useContext(xa),{hash:r,pathname:o,search:l}=HC(n,{relative:t}),c=o;return s!=="/"&&(c=o==="/"?s:pa([s,o])),i.createHref({pathname:c,search:l,hash:r})}function Bh(){return P.useContext(ev)!=null}function uc(){return Bh()||pt(!1),P.useContext(ev).location}function UC(n){P.useContext(xa).static||P.useLayoutEffect(n)}function Ca(){let{isDataRoute:n}=P.useContext(Jr);return n?f2():e2()}function e2(){Bh()||pt(!1);let n=P.useContext(RS),{basename:e,future:t,navigator:s}=P.useContext(xa),{matches:i}=P.useContext(Jr),{pathname:r}=uc(),o=JSON.stringify(kS(i,t.v7_relativeSplatPath)),l=P.useRef(!1);return UC(()=>{l.current=!0}),P.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let d=PS(u,JSON.parse(o),r,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:pa([e,d.pathname])),(h.replace?s.replace:s.push)(d,h.state,h)},[e,s,o,r,n])}function t2(){let{matches:n}=P.useContext(Jr),e=n[n.length-1];return e?e.params:{}}function HC(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=P.useContext(xa),{matches:i}=P.useContext(Jr),{pathname:r}=uc(),o=JSON.stringify(kS(i,s.v7_relativeSplatPath));return P.useMemo(()=>PS(n,JSON.parse(o),r,t==="path"),[n,o,r,t])}function n2(n,e){return s2(n,e)}function s2(n,e,t,s){Bh()||pt(!1);let{navigator:i}=P.useContext(xa),{matches:r}=P.useContext(Jr),o=r[r.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=uc(),h;if(e){var d;let A=typeof e=="string"?Fh(e):e;c==="/"||(d=A.pathname)!=null&&d.startsWith(c)||pt(!1),h=A}else h=u;let f=h.pathname||"/",g=f;if(c!=="/"){let A=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(A.length).join("/")}let m=kL(n,{pathname:g}),v=l2(m&&m.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:pa([c,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:pa([c,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),r,t,s);return e&&v?P.createElement(ev.Provider,{value:{location:sf({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ra.Pop}},v):v}function i2(){let n=d2(),e=KL(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,null)}const r2=P.createElement(i2,null);class o2 extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?P.createElement(Jr.Provider,{value:this.props.routeContext},P.createElement(zC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a2(n){let{routeContext:e,match:t,children:s}=n,i=P.useContext(RS);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(Jr.Provider,{value:e},s)}function l2(n,e,t,s){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=s)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=(i=t)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||pt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(t&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:g}=t,m=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||m){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,m=!1,v=null,A=null;t&&(g=l&&d.route.id?l[d.route.id]:void 0,v=d.route.errorElement||r2,c&&(u<0&&f===0?(p2("route-fallback"),m=!0,A=null):u===f&&(m=!0,A=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),b=()=>{let S;return g?S=v:m?S=A:d.route.Component?S=P.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,P.createElement(a2,{match:d,routeContext:{outlet:h,matches:y,isDataRoute:t!=null},children:S})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?P.createElement(o2,{location:t.location,revalidation:t.revalidation,component:v,error:g,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var $C=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}($C||{}),VC=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(VC||{});function c2(n){let e=P.useContext(RS);return e||pt(!1),e}function u2(n){let e=P.useContext(JL);return e||pt(!1),e}function h2(n){let e=P.useContext(Jr);return e||pt(!1),e}function WC(n){let e=h2(),t=e.matches[e.matches.length-1];return t.route.id||pt(!1),t.route.id}function d2(){var n;let e=P.useContext(zC),t=u2(),s=WC();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function f2(){let{router:n}=c2($C.UseNavigateStable),e=WC(VC.UseNavigateStable),t=P.useRef(!1);return UC(()=>{t.current=!0}),P.useCallback(function(i,r){r===void 0&&(r={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,sf({fromRouteId:e},r)))},[n,e])}const y1={};function p2(n,e,t){y1[n]||(y1[n]=!0)}function g2(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function J0(n){let{to:e,replace:t,state:s,relative:i}=n;Bh()||pt(!1);let{future:r,static:o}=P.useContext(xa),{matches:l}=P.useContext(Jr),{pathname:c}=uc(),u=Ca(),h=PS(e,kS(l,r.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(h);return P.useEffect(()=>u(JSON.parse(d),{replace:t,state:s,relative:i}),[u,d,i,t,s]),null}function Hs(n){pt(!1)}function m2(n){let{basename:e="/",children:t=null,location:s,navigationType:i=ra.Pop,navigator:r,static:o=!1,future:l}=n;Bh()&&pt(!1);let c=e.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:c,navigator:r,static:o,future:sf({v7_relativeSplatPath:!1},l)}),[c,l,r,o]);typeof s=="string"&&(s=Fh(s));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:m="default"}=s,v=P.useMemo(()=>{let A=TS(h,c);return A==null?null:{location:{pathname:A,search:d,hash:f,state:g,key:m},navigationType:i}},[c,h,d,f,g,m,i]);return v==null?null:P.createElement(xa.Provider,{value:u},P.createElement(ev.Provider,{children:t,value:v}))}function y2(n){let{children:e,location:t}=n;return n2(Z0(e),t)}new Promise(()=>{});function Z0(n,e){e===void 0&&(e=[]);let t=[];return P.Children.forEach(n,(s,i)=>{if(!P.isValidElement(s))return;let r=[...e,i];if(s.type===P.Fragment){t.push.apply(t,Z0(s.props.children,r));return}s.type!==Hs&&pt(!1),!s.props.index||!s.props.children||pt(!1);let o={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Z0(s.props.children,r)),t.push(o)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ew(){return ew=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ew.apply(this,arguments)}function v2(n,e){if(n==null)return{};var t={},s=Object.keys(n),i,r;for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function w2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function b2(n,e){return n.button===0&&(!e||e==="_self")&&!w2(n)}const S2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],A2="6";try{window.__reactRouterVersion=A2}catch{}const E2="startTransition",v1=fP[E2];function x2(n){let{basename:e,children:t,future:s,window:i}=n,r=P.useRef();r.current==null&&(r.current=CL({window:i,v5Compat:!0}));let o=r.current,[l,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},h=P.useCallback(d=>{u&&v1?v1(()=>c(d)):c(d)},[c,u]);return P.useLayoutEffect(()=>o.listen(h),[o,h]),P.useEffect(()=>g2(s),[s]),P.createElement(m2,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:s})}const C2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vn=P.forwardRef(function(e,t){let{onClick:s,relative:i,reloadDocument:r,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:d}=e,f=v2(e,S2),{basename:g}=P.useContext(xa),m,v=!1;if(typeof u=="string"&&_2.test(u)&&(m=u,C2))try{let S=new URL(window.location.href),x=u.startsWith("//")?new URL(S.protocol+u):new URL(u),_=TS(x.pathname,g);x.origin===S.origin&&_!=null?u=_+x.search+x.hash:v=!0}catch{}let A=ZL(u,{relative:i}),y=T2(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:d});function b(S){s&&s(S),S.defaultPrevented||y(S)}return P.createElement("a",ew({},f,{href:m||A,onClick:v||r?s:b,ref:t,target:c}))});var w1;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(w1||(w1={}));var b1;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(b1||(b1={}));function T2(n,e){let{target:t,replace:s,state:i,preventScrollReset:r,relative:o,viewTransition:l}=e===void 0?{}:e,c=Ca(),u=uc(),h=HC(n,{relative:o});return P.useCallback(d=>{if(b2(d,t)){d.preventDefault();let f=s!==void 0?s:sy(u)===sy(h);c(n,{replace:f,state:i,preventScrollReset:r,relative:o,viewTransition:l})}},[u,c,h,s,i,t,n,r,o,l])}function GC(n,e){return function(){return n.apply(e,arguments)}}const{toString:k2}=Object.prototype,{getPrototypeOf:LS}=Object,{iterator:tv,toStringTag:qC}=Symbol,nv=(n=>e=>{const t=k2.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),di=n=>(n=n.toLowerCase(),e=>nv(e)===n),sv=n=>e=>typeof e===n,{isArray:jh}=Array,Rh=sv("undefined");function Zp(n){return n!==null&&!Rh(n)&&n.constructor!==null&&!Rh(n.constructor)&&zn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const XC=di("ArrayBuffer");function P2(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&XC(n.buffer),e}const R2=sv("string"),zn=sv("function"),YC=sv("number"),eg=n=>n!==null&&typeof n=="object",L2=n=>n===!0||n===!1,Jg=n=>{if(nv(n)!=="object")return!1;const e=LS(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(qC in n)&&!(tv in n)},M2=n=>{if(!eg(n)||Zp(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},D2=di("Date"),N2=di("File"),I2=di("Blob"),O2=di("FileList"),F2=n=>eg(n)&&zn(n.pipe),B2=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||zn(n.append)&&((e=nv(n))==="formdata"||e==="object"&&zn(n.toString)&&n.toString()==="[object FormData]"))},j2=di("URLSearchParams"),[z2,U2,H2,$2]=["ReadableStream","Request","Response","Headers"].map(di),V2=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tg(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),jh(n))for(s=0,i=n.length;s<i;s++)e.call(null,n[s],s,n);else{if(Zp(n))return;const r=t?Object.getOwnPropertyNames(n):Object.keys(n),o=r.length;let l;for(s=0;s<o;s++)l=r[s],e.call(null,n[l],l,n)}}function KC(n,e){if(Zp(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,i;for(;s-- >0;)if(i=t[s],e===i.toLowerCase())return i;return null}const Ba=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,QC=n=>!Rh(n)&&n!==Ba;function tw(){const{caseless:n,skipUndefined:e}=QC(this)&&this||{},t={},s=(i,r)=>{const o=n&&KC(t,r)||r;Jg(t[o])&&Jg(i)?t[o]=tw(t[o],i):Jg(i)?t[o]=tw({},i):jh(i)?t[o]=i.slice():(!e||!Rh(i))&&(t[o]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&tg(arguments[i],s);return t}const W2=(n,e,t,{allOwnKeys:s}={})=>(tg(e,(i,r)=>{t&&zn(i)?n[r]=GC(i,t):n[r]=i},{allOwnKeys:s}),n),G2=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),q2=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},X2=(n,e,t,s)=>{let i,r,o;const l={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),r=i.length;r-- >0;)o=i[r],(!s||s(o,n,e))&&!l[o]&&(e[o]=n[o],l[o]=!0);n=t!==!1&&LS(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Y2=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},K2=n=>{if(!n)return null;if(jh(n))return n;let e=n.length;if(!YC(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Q2=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&LS(Uint8Array)),J2=(n,e)=>{const s=(n&&n[tv]).call(n);let i;for(;(i=s.next())&&!i.done;){const r=i.value;e.call(n,r[0],r[1])}},Z2=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},eM=di("HTMLFormElement"),tM=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,i){return s.toUpperCase()+i}),S1=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),nM=di("RegExp"),JC=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};tg(t,(i,r)=>{let o;(o=e(i,r,n))!==!1&&(s[r]=o||i)}),Object.defineProperties(n,s)},sM=n=>{JC(n,(e,t)=>{if(zn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(zn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},iM=(n,e)=>{const t={},s=i=>{i.forEach(r=>{t[r]=!0})};return jh(n)?s(n):s(String(n).split(e)),t},rM=()=>{},oM=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function aM(n){return!!(n&&zn(n.append)&&n[qC]==="FormData"&&n[tv])}const lM=n=>{const e=new Array(10),t=(s,i)=>{if(eg(s)){if(e.indexOf(s)>=0)return;if(Zp(s))return s;if(!("toJSON"in s)){e[i]=s;const r=jh(s)?[]:{};return tg(s,(o,l)=>{const c=t(o,i+1);!Rh(c)&&(r[l]=c)}),e[i]=void 0,r}}return s};return t(n,0)},cM=di("AsyncFunction"),uM=n=>n&&(eg(n)||zn(n))&&zn(n.then)&&zn(n.catch),ZC=((n,e)=>n?setImmediate:e?((t,s)=>(Ba.addEventListener("message",({source:i,data:r})=>{i===Ba&&r===t&&s.length&&s.shift()()},!1),i=>{s.push(i),Ba.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",zn(Ba.postMessage)),hM=typeof queueMicrotask<"u"?queueMicrotask.bind(Ba):typeof process<"u"&&process.nextTick||ZC,dM=n=>n!=null&&zn(n[tv]),L={isArray:jh,isArrayBuffer:XC,isBuffer:Zp,isFormData:B2,isArrayBufferView:P2,isString:R2,isNumber:YC,isBoolean:L2,isObject:eg,isPlainObject:Jg,isEmptyObject:M2,isReadableStream:z2,isRequest:U2,isResponse:H2,isHeaders:$2,isUndefined:Rh,isDate:D2,isFile:N2,isBlob:I2,isRegExp:nM,isFunction:zn,isStream:F2,isURLSearchParams:j2,isTypedArray:Q2,isFileList:O2,forEach:tg,merge:tw,extend:W2,trim:V2,stripBOM:G2,inherits:q2,toFlatObject:X2,kindOf:nv,kindOfTest:di,endsWith:Y2,toArray:K2,forEachEntry:J2,matchAll:Z2,isHTMLForm:eM,hasOwnProperty:S1,hasOwnProp:S1,reduceDescriptors:JC,freezeMethods:sM,toObjectSet:iM,toCamelCase:tM,noop:rM,toFiniteNumber:oM,findKey:KC,global:Ba,isContextDefined:QC,isSpecCompliantForm:aM,toJSONObject:lM,isAsyncFn:cM,isThenable:uM,setImmediate:ZC,asap:hM,isIterable:dM};function ae(n,e,t,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}L.inherits(ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.status}}});const e_=ae.prototype,t_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{t_[n]={value:n}});Object.defineProperties(ae,t_);Object.defineProperty(e_,"isAxiosError",{value:!0});ae.from=(n,e,t,s,i,r)=>{const o=Object.create(e_);L.toFlatObject(n,o,function(h){return h!==Error.prototype},u=>u!=="isAxiosError");const l=n&&n.message?n.message:"Error",c=e==null&&n?n.code:e;return ae.call(o,l,c,t,s,i),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",r&&Object.assign(o,r),o};const fM=null;function nw(n){return L.isPlainObject(n)||L.isArray(n)}function n_(n){return L.endsWith(n,"[]")?n.slice(0,-2):n}function A1(n,e,t){return n?n.concat(e).map(function(i,r){return i=n_(i),!t&&r?"["+i+"]":i}).join(t?".":""):e}function pM(n){return L.isArray(n)&&!n.some(nw)}const gM=L.toFlatObject(L,{},null,function(e){return/^is[A-Z]/.test(e)});function iv(n,e,t){if(!L.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=L.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,A){return!L.isUndefined(A[v])});const s=t.metaTokens,i=t.visitor||h,r=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(e);if(!L.isFunction(i))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(L.isDate(m))return m.toISOString();if(L.isBoolean(m))return m.toString();if(!c&&L.isBlob(m))throw new ae("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(m)||L.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function h(m,v,A){let y=m;if(m&&!A&&typeof m=="object"){if(L.endsWith(v,"{}"))v=s?v:v.slice(0,-2),m=JSON.stringify(m);else if(L.isArray(m)&&pM(m)||(L.isFileList(m)||L.endsWith(v,"[]"))&&(y=L.toArray(m)))return v=n_(v),y.forEach(function(S,x){!(L.isUndefined(S)||S===null)&&e.append(o===!0?A1([v],x,r):o===null?v:v+"[]",u(S))}),!1}return nw(m)?!0:(e.append(A1(A,v,r),u(m)),!1)}const d=[],f=Object.assign(gM,{defaultVisitor:h,convertValue:u,isVisitable:nw});function g(m,v){if(!L.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(m),L.forEach(m,function(y,b){(!(L.isUndefined(y)||y===null)&&i.call(e,y,L.isString(b)?b.trim():b,v,f))===!0&&g(y,v?v.concat(b):[b])}),d.pop()}}if(!L.isObject(n))throw new TypeError("data must be an object");return g(n),e}function E1(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function MS(n,e){this._pairs=[],n&&iv(n,this,e)}const s_=MS.prototype;s_.append=function(e,t){this._pairs.push([e,t])};s_.toString=function(e){const t=e?function(s){return e.call(this,s,E1)}:E1;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function mM(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function i_(n,e,t){if(!e)return n;const s=t&&t.encode||mM;L.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let r;if(i?r=i(e,t):r=L.isURLSearchParams(e)?e.toString():new MS(e,t).toString(s),r){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class x1{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){L.forEach(this.handlers,function(s){s!==null&&e(s)})}}const r_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yM=typeof URLSearchParams<"u"?URLSearchParams:MS,vM=typeof FormData<"u"?FormData:null,wM=typeof Blob<"u"?Blob:null,bM={isBrowser:!0,classes:{URLSearchParams:yM,FormData:vM,Blob:wM},protocols:["http","https","file","blob","url","data"]},DS=typeof window<"u"&&typeof document<"u",sw=typeof navigator=="object"&&navigator||void 0,SM=DS&&(!sw||["ReactNative","NativeScript","NS"].indexOf(sw.product)<0),AM=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",EM=DS&&window.location.href||"http://localhost",xM=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:DS,hasStandardBrowserEnv:SM,hasStandardBrowserWebWorkerEnv:AM,navigator:sw,origin:EM},Symbol.toStringTag,{value:"Module"})),ln={...xM,...bM};function CM(n,e){return iv(n,new ln.classes.URLSearchParams,{visitor:function(t,s,i,r){return ln.isNode&&L.isBuffer(t)?(this.append(s,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function _M(n){return L.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function TM(n){const e={},t=Object.keys(n);let s;const i=t.length;let r;for(s=0;s<i;s++)r=t[s],e[r]=n[r];return e}function o_(n){function e(t,s,i,r){let o=t[r++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=r>=t.length;return o=!o&&L.isArray(i)?i.length:o,c?(L.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!l):((!i[o]||!L.isObject(i[o]))&&(i[o]=[]),e(t,s,i[o],r)&&L.isArray(i[o])&&(i[o]=TM(i[o])),!l)}if(L.isFormData(n)&&L.isFunction(n.entries)){const t={};return L.forEachEntry(n,(s,i)=>{e(_M(s),i,t,0)}),t}return null}function kM(n,e,t){if(L.isString(n))try{return(e||JSON.parse)(n),L.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const ng={transitional:r_,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",i=s.indexOf("application/json")>-1,r=L.isObject(e);if(r&&L.isHTMLForm(e)&&(e=new FormData(e)),L.isFormData(e))return i?JSON.stringify(o_(e)):e;if(L.isArrayBuffer(e)||L.isBuffer(e)||L.isStream(e)||L.isFile(e)||L.isBlob(e)||L.isReadableStream(e))return e;if(L.isArrayBufferView(e))return e.buffer;if(L.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return CM(e,this.formSerializer).toString();if((l=L.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return iv(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),kM(e)):e}],transformResponse:[function(e){const t=this.transitional||ng.transitional,s=t&&t.forcedJSONParsing,i=this.responseType==="json";if(L.isResponse(e)||L.isReadableStream(e))return e;if(e&&L.isString(e)&&(s&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?ae.from(l,ae.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ln.classes.FormData,Blob:ln.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],n=>{ng.headers[n]={}});const PM=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RM=n=>{const e={};let t,s,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!t||e[t]&&PM[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},C1=Symbol("internals");function Zh(n){return n&&String(n).trim().toLowerCase()}function Zg(n){return n===!1||n==null?n:L.isArray(n)?n.map(Zg):String(n)}function LM(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const MM=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function qv(n,e,t,s,i){if(L.isFunction(s))return s.call(this,e,t);if(i&&(e=t),!!L.isString(e)){if(L.isString(s))return e.indexOf(s)!==-1;if(L.isRegExp(s))return s.test(e)}}function DM(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function NM(n,e){const t=L.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(i,r,o){return this[s].call(this,e,i,r,o)},configurable:!0})})}let Un=class{constructor(e){e&&this.set(e)}set(e,t,s){const i=this;function r(l,c,u){const h=Zh(c);if(!h)throw new Error("header name must be a non-empty string");const d=L.findKey(i,h);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||c]=Zg(l))}const o=(l,c)=>L.forEach(l,(u,h)=>r(u,h,c));if(L.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(L.isString(e)&&(e=e.trim())&&!MM(e))o(RM(e),t);else if(L.isObject(e)&&L.isIterable(e)){let l={},c,u;for(const h of e){if(!L.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?L.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,t)}else e!=null&&r(t,e,s);return this}get(e,t){if(e=Zh(e),e){const s=L.findKey(this,e);if(s){const i=this[s];if(!t)return i;if(t===!0)return LM(i);if(L.isFunction(t))return t.call(this,i,s);if(L.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Zh(e),e){const s=L.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||qv(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let i=!1;function r(o){if(o=Zh(o),o){const l=L.findKey(s,o);l&&(!t||qv(s,s[l],l,t))&&(delete s[l],i=!0)}}return L.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let s=t.length,i=!1;for(;s--;){const r=t[s];(!e||qv(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const t=this,s={};return L.forEach(this,(i,r)=>{const o=L.findKey(s,r);if(o){t[o]=Zg(i),delete t[r];return}const l=e?DM(r):String(r).trim();l!==r&&delete t[r],t[l]=Zg(i),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return L.forEach(this,(s,i)=>{s!=null&&s!==!1&&(t[i]=e&&L.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[C1]=this[C1]={accessors:{}}).accessors,i=this.prototype;function r(o){const l=Zh(o);s[l]||(NM(i,o),s[l]=!0)}return L.isArray(e)?e.forEach(r):r(e),this}};Un.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(Un.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});L.freezeMethods(Un);function Xv(n,e){const t=this||ng,s=e||t,i=Un.from(s.headers);let r=s.data;return L.forEach(n,function(l){r=l.call(t,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function a_(n){return!!(n&&n.__CANCEL__)}function zh(n,e,t){ae.call(this,n??"canceled",ae.ERR_CANCELED,e,t),this.name="CanceledError"}L.inherits(zh,ae,{__CANCEL__:!0});function l_(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new ae("Request failed with status code "+t.status,[ae.ERR_BAD_REQUEST,ae.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function IM(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function OM(n,e){n=n||10;const t=new Array(n),s=new Array(n);let i=0,r=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),h=s[r];o||(o=u),t[i]=c,s[i]=u;let d=r,f=0;for(;d!==i;)f+=t[d++],d=d%n;if(i=(i+1)%n,i===r&&(r=(r+1)%n),u-o<e)return;const g=h&&u-h;return g?Math.round(f*1e3/g):void 0}}function FM(n,e){let t=0,s=1e3/e,i,r;const o=(u,h=Date.now())=>{t=h,i=null,r&&(clearTimeout(r),r=null),n(...u)};return[(...u)=>{const h=Date.now(),d=h-t;d>=s?o(u,h):(i=u,r||(r=setTimeout(()=>{r=null,o(i)},s-d)))},()=>i&&o(i)]}const iy=(n,e,t=3)=>{let s=0;const i=OM(50,250);return FM(r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,c=o-s,u=i(c),h=o<=l;s=o;const d={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:r,lengthComputable:l!=null,[e?"download":"upload"]:!0};n(d)},t)},_1=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},T1=n=>(...e)=>L.asap(()=>n(...e)),BM=ln.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,ln.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(ln.origin),ln.navigator&&/(msie|trident)/i.test(ln.navigator.userAgent)):()=>!0,jM=ln.hasStandardBrowserEnv?{write(n,e,t,s,i,r,o){if(typeof document>"u")return;const l=[`${n}=${encodeURIComponent(e)}`];L.isNumber(t)&&l.push(`expires=${new Date(t).toUTCString()}`),L.isString(s)&&l.push(`path=${s}`),L.isString(i)&&l.push(`domain=${i}`),r===!0&&l.push("secure"),L.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function zM(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function UM(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function c_(n,e,t){let s=!zM(e);return n&&(s||t==!1)?UM(n,e):e}const k1=n=>n instanceof Un?{...n}:n;function rc(n,e){e=e||{};const t={};function s(u,h,d,f){return L.isPlainObject(u)&&L.isPlainObject(h)?L.merge.call({caseless:f},u,h):L.isPlainObject(h)?L.merge({},h):L.isArray(h)?h.slice():h}function i(u,h,d,f){if(L.isUndefined(h)){if(!L.isUndefined(u))return s(void 0,u,d,f)}else return s(u,h,d,f)}function r(u,h){if(!L.isUndefined(h))return s(void 0,h)}function o(u,h){if(L.isUndefined(h)){if(!L.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function l(u,h,d){if(d in e)return s(u,h);if(d in n)return s(void 0,u)}const c={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,d)=>i(k1(u),k1(h),d,!0)};return L.forEach(Object.keys({...n,...e}),function(h){const d=c[h]||i,f=d(n[h],e[h],h);L.isUndefined(f)&&d!==l||(t[h]=f)}),t}const u_=n=>{const e=rc({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:l}=e;if(e.headers=o=Un.from(o),e.url=i_(c_(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),L.isFormData(t)){if(ln.hasStandardBrowserEnv||ln.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(L.isFunction(t.getHeaders)){const c=t.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([h,d])=>{u.includes(h.toLowerCase())&&o.set(h,d)})}}if(ln.hasStandardBrowserEnv&&(s&&L.isFunction(s)&&(s=s(e)),s||s!==!1&&BM(e.url))){const c=i&&r&&jM.read(r);c&&o.set(i,c)}return e},HM=typeof XMLHttpRequest<"u",$M=HM&&function(n){return new Promise(function(t,s){const i=u_(n);let r=i.data;const o=Un.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=i,h,d,f,g,m;function v(){g&&g(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let A=new XMLHttpRequest;A.open(i.method.toUpperCase(),i.url,!0),A.timeout=i.timeout;function y(){if(!A)return;const S=Un.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),_={data:!l||l==="text"||l==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:S,config:n,request:A};l_(function(k){t(k),v()},function(k){s(k),v()},_),A=null}"onloadend"in A?A.onloadend=y:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(y)},A.onabort=function(){A&&(s(new ae("Request aborted",ae.ECONNABORTED,n,A)),A=null)},A.onerror=function(x){const _=x&&x.message?x.message:"Network Error",T=new ae(_,ae.ERR_NETWORK,n,A);T.event=x||null,s(T),A=null},A.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const _=i.transitional||r_;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),s(new ae(x,_.clarifyTimeoutError?ae.ETIMEDOUT:ae.ECONNABORTED,n,A)),A=null},r===void 0&&o.setContentType(null),"setRequestHeader"in A&&L.forEach(o.toJSON(),function(x,_){A.setRequestHeader(_,x)}),L.isUndefined(i.withCredentials)||(A.withCredentials=!!i.withCredentials),l&&l!=="json"&&(A.responseType=i.responseType),u&&([f,m]=iy(u,!0),A.addEventListener("progress",f)),c&&A.upload&&([d,g]=iy(c),A.upload.addEventListener("progress",d),A.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(h=S=>{A&&(s(!S||S.type?new zh(null,n,A):S),A.abort(),A=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const b=IM(i.url);if(b&&ln.protocols.indexOf(b)===-1){s(new ae("Unsupported protocol "+b+":",ae.ERR_BAD_REQUEST,n));return}A.send(r||null)})},VM=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,i;const r=function(u){if(!i){i=!0,l();const h=u instanceof Error?u:this.reason;s.abort(h instanceof ae?h:new zh(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,r(new ae(`timeout ${e} of ms exceeded`,ae.ETIMEDOUT))},e);const l=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(r):u.removeEventListener("abort",r)}),n=null)};n.forEach(u=>u.addEventListener("abort",r));const{signal:c}=s;return c.unsubscribe=()=>L.asap(l),c}},WM=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,i;for(;s<t;)i=s+e,yield n.slice(s,i),s=i},GM=async function*(n,e){for await(const t of qM(n))yield*WM(t,e)},qM=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},P1=(n,e,t,s)=>{const i=GM(n,e);let r=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await i.next();if(u){l(),c.close();return}let d=h.byteLength;if(t){let f=r+=d;t(f)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},R1=64*1024,{isFunction:Pg}=L,XM=(({Request:n,Response:e})=>({Request:n,Response:e}))(L.global),{ReadableStream:L1,TextEncoder:M1}=L.global,D1=(n,...e)=>{try{return!!n(...e)}catch{return!1}},YM=n=>{n=L.merge.call({skipUndefined:!0},XM,n);const{fetch:e,Request:t,Response:s}=n,i=e?Pg(e):typeof fetch=="function",r=Pg(t),o=Pg(s);if(!i)return!1;const l=i&&Pg(L1),c=i&&(typeof M1=="function"?(m=>v=>m.encode(v))(new M1):async m=>new Uint8Array(await new t(m).arrayBuffer())),u=r&&l&&D1(()=>{let m=!1;const v=new t(ln.origin,{body:new L1,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!v}),h=o&&l&&D1(()=>L.isReadableStream(new s("").body)),d={stream:h&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!d[m]&&(d[m]=(v,A)=>{let y=v&&v[m];if(y)return y.call(v);throw new ae(`Response type '${m}' is not supported`,ae.ERR_NOT_SUPPORT,A)})});const f=async m=>{if(m==null)return 0;if(L.isBlob(m))return m.size;if(L.isSpecCompliantForm(m))return(await new t(ln.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(L.isArrayBufferView(m)||L.isArrayBuffer(m))return m.byteLength;if(L.isURLSearchParams(m)&&(m=m+""),L.isString(m))return(await c(m)).byteLength},g=async(m,v)=>{const A=L.toFiniteNumber(m.getContentLength());return A??f(v)};return async m=>{let{url:v,method:A,data:y,signal:b,cancelToken:S,timeout:x,onDownloadProgress:_,onUploadProgress:T,responseType:k,headers:R,withCredentials:D="same-origin",fetchOptions:M}=u_(m),I=e||fetch;k=k?(k+"").toLowerCase():"text";let H=VM([b,S&&S.toAbortSignal()],x),W=null;const z=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let Z;try{if(T&&u&&A!=="get"&&A!=="head"&&(Z=await g(R,y))!==0){let te=new t(v,{method:"POST",body:y,duplex:"half"}),Q;if(L.isFormData(y)&&(Q=te.headers.get("content-type"))&&R.setContentType(Q),te.body){const[ie,we]=_1(Z,iy(T1(T)));y=P1(te.body,R1,ie,we)}}L.isString(D)||(D=D?"include":"omit");const B=r&&"credentials"in t.prototype,j={...M,signal:H,method:A.toUpperCase(),headers:R.normalize().toJSON(),body:y,duplex:"half",credentials:B?D:void 0};W=r&&new t(v,j);let N=await(r?I(W,M):I(v,j));const $=h&&(k==="stream"||k==="response");if(h&&(_||$&&z)){const te={};["status","statusText","headers"].forEach(Ve=>{te[Ve]=N[Ve]});const Q=L.toFiniteNumber(N.headers.get("content-length")),[ie,we]=_&&_1(Q,iy(T1(_),!0))||[];N=new s(P1(N.body,R1,ie,()=>{we&&we(),z&&z()}),te)}k=k||"text";let J=await d[L.findKey(d,k)||"text"](N,m);return!$&&z&&z(),await new Promise((te,Q)=>{l_(te,Q,{data:J,headers:Un.from(N.headers),status:N.status,statusText:N.statusText,config:m,request:W})})}catch(B){throw z&&z(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new ae("Network Error",ae.ERR_NETWORK,m,W),{cause:B.cause||B}):ae.from(B,B&&B.code,m,W)}}},KM=new Map,h_=n=>{let e=n&&n.env||{};const{fetch:t,Request:s,Response:i}=e,r=[s,i,t];let o=r.length,l=o,c,u,h=KM;for(;l--;)c=r[l],u=h.get(c),u===void 0&&h.set(c,u=l?new Map:YM(e)),h=u;return u};h_();const NS={http:fM,xhr:$M,fetch:{get:h_}};L.forEach(NS,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const N1=n=>`- ${n}`,QM=n=>L.isFunction(n)||n===null||n===!1;function JM(n,e){n=L.isArray(n)?n:[n];const{length:t}=n;let s,i;const r={};for(let o=0;o<t;o++){s=n[o];let l;if(i=s,!QM(s)&&(i=NS[(l=String(s)).toLowerCase()],i===void 0))throw new ae(`Unknown adapter '${l}'`);if(i&&(L.isFunction(i)||(i=i.get(e))))break;r[l||"#"+o]=i}if(!i){const o=Object.entries(r).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=t?o.length>1?`since :
`+o.map(N1).join(`
`):" "+N1(o[0]):"as no adapter specified";throw new ae("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i}const d_={getAdapter:JM,adapters:NS};function Yv(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new zh(null,n)}function I1(n){return Yv(n),n.headers=Un.from(n.headers),n.data=Xv.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),d_.getAdapter(n.adapter||ng.adapter,n)(n).then(function(s){return Yv(n),s.data=Xv.call(n,n.transformResponse,s),s.headers=Un.from(s.headers),s},function(s){return a_(s)||(Yv(n),s&&s.response&&(s.response.data=Xv.call(n,n.transformResponse,s.response),s.response.headers=Un.from(s.response.headers))),Promise.reject(s)})}const f_="1.13.2",rv={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{rv[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const O1={};rv.transitional=function(e,t,s){function i(r,o){return"[Axios v"+f_+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,l)=>{if(e===!1)throw new ae(i(o," has been removed"+(t?" in "+t:"")),ae.ERR_DEPRECATED);return t&&!O1[o]&&(O1[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,l):!0}};rv.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function ZM(n,e,t){if(typeof n!="object")throw new ae("options must be an object",ae.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const r=s[i],o=e[r];if(o){const l=n[r],c=l===void 0||o(l,r,n);if(c!==!0)throw new ae("option "+r+" must be "+c,ae.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ae("Unknown option "+r,ae.ERR_BAD_OPTION)}}const em={assertOptions:ZM,validators:rv},pi=em.validators;let Zl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new x1,response:new x1}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=rc(this.defaults,t);const{transitional:s,paramsSerializer:i,headers:r}=t;s!==void 0&&em.assertOptions(s,{silentJSONParsing:pi.transitional(pi.boolean),forcedJSONParsing:pi.transitional(pi.boolean),clarifyTimeoutError:pi.transitional(pi.boolean)},!1),i!=null&&(L.isFunction(i)?t.paramsSerializer={serialize:i}:em.assertOptions(i,{encode:pi.function,serialize:pi.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),em.assertOptions(t,{baseUrl:pi.spelling("baseURL"),withXsrfToken:pi.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&L.merge(r.common,r[t.method]);r&&L.forEach(["delete","get","head","post","put","patch","common"],m=>{delete r[m]}),t.headers=Un.concat(o,r);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let h,d=0,f;if(!c){const m=[I1.bind(this),void 0];for(m.unshift(...l),m.push(...u),f=m.length,h=Promise.resolve(t);d<f;)h=h.then(m[d++],m[d++]);return h}f=l.length;let g=t;for(;d<f;){const m=l[d++],v=l[d++];try{g=m(g)}catch(A){v.call(this,A);break}}try{h=I1.call(this,g)}catch(m){return Promise.reject(m)}for(d=0,f=u.length;d<f;)h=h.then(u[d++],u[d++]);return h}getUri(e){e=rc(this.defaults,e);const t=c_(e.baseURL,e.url,e.allowAbsoluteUrls);return i_(t,e.params,e.paramsSerializer)}};L.forEach(["delete","get","head","options"],function(e){Zl.prototype[e]=function(t,s){return this.request(rc(s||{},{method:e,url:t,data:(s||{}).data}))}});L.forEach(["post","put","patch"],function(e){function t(s){return function(r,o,l){return this.request(rc(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Zl.prototype[e]=t(),Zl.prototype[e+"Form"]=t(!0)});let eD=class p_{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(l=>{s.subscribe(l),r=l}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},e(function(r,o,l){s.reason||(s.reason=new zh(r,o,l),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new p_(function(i){e=i}),cancel:e}}};function tD(n){return function(t){return n.apply(null,t)}}function nD(n){return L.isObject(n)&&n.isAxiosError===!0}const iw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(iw).forEach(([n,e])=>{iw[e]=n});function g_(n){const e=new Zl(n),t=GC(Zl.prototype.request,e);return L.extend(t,Zl.prototype,e,{allOwnKeys:!0}),L.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return g_(rc(n,i))},t}const pe=g_(ng);pe.Axios=Zl;pe.CanceledError=zh;pe.CancelToken=eD;pe.isCancel=a_;pe.VERSION=f_;pe.toFormData=iv;pe.AxiosError=ae;pe.Cancel=pe.CanceledError;pe.all=function(e){return Promise.all(e)};pe.spread=tD;pe.isAxiosError=nD;pe.mergeConfig=rc;pe.AxiosHeaders=Un;pe.formToJSON=n=>o_(L.isHTMLForm(n)?new FormData(n):n);pe.getAdapter=d_.getAdapter;pe.HttpStatusCode=iw;pe.default=pe;const{Axios:dO,AxiosError:fO,CanceledError:pO,isCancel:gO,CancelToken:mO,VERSION:yO,all:vO,Cancel:wO,isAxiosError:bO,spread:SO,toFormData:AO,AxiosHeaders:EO,HttpStatusCode:xO,formToJSON:CO,getAdapter:_O,mergeConfig:TO}=pe,Sn="https://mylib-backend1.onrender.com/api",m_=P.createContext(),sD=({children:n})=>{const[e,t]=P.useState(null),[s,i]=P.useState(!0);P.useEffect(()=>{const c=localStorage.getItem("token");c?(pe.defaults.headers.common.Authorization=`Bearer ${c}`,r()):i(!1)},[]);const r=async()=>{try{const c=await pe.get(`${Sn}/users/me`);t(c.data)}catch{localStorage.removeItem("token"),delete pe.defaults.headers.common.Authorization}finally{i(!1)}},o=async(c,u)=>{var h,d;try{const f=await pe.post(`${Sn}/auth/login`,{username:c,password:u}),{token:g,user:m}=f.data;return localStorage.setItem("token",g),pe.defaults.headers.common.Authorization=`Bearer ${g}`,t(m),{success:!0}}catch(f){return{success:!1,message:((d=(h=f.response)==null?void 0:h.data)==null?void 0:d.message)||"Erreur de connexion"}}},l=()=>{localStorage.removeItem("token"),delete pe.defaults.headers.common.Authorization,t(null)};return C.jsx(m_.Provider,{value:{user:e,login:o,logout:l,loading:s},children:n})},Uh=()=>{const n=Wi.useContext(m_);if(!n)throw new Error("useAuth must be used within AuthProvider");return n},F1=({children:n,allowedRoles:e=[]})=>{const{user:t,loading:s}=Uh(),i=uc();return s?C.jsx("div",{className:"container",children:"Chargement..."}):t?e.length>0&&!e.includes(t.role)?C.jsx(J0,{to:"/unauthorized",state:{from:i,message:"Votre rle ne vous permet pas d'accder  cette section."},replace:!0}):n:C.jsx(J0,{to:"/login",state:{from:i},replace:!0})},iD=()=>{const{user:n,logout:e}=Uh(),t=Ca(),s=()=>{e(),t("/")};return C.jsx("nav",{className:"navbar",children:C.jsxs("div",{className:"nav-container",children:[C.jsx(vn,{to:"/",className:"nav-logo",children:"MYLib"}),C.jsxs("div",{className:"nav-menu",children:[C.jsx(vn,{to:"/",className:"nav-link",children:"Accueil"}),C.jsx(vn,{to:"/library",className:"nav-link",children:"Bibliothque"}),C.jsx(vn,{to:"/mental-health",className:"nav-link",children:"Sant Mentale"}),C.jsx(vn,{to:"/entrepreneurship",className:"nav-link",children:"Entrepreneuriat"}),n&&(n.role==="admin"||n.role==="teacher")&&C.jsx(vn,{to:"/upload",className:"nav-link",children:"Tlverser"}),n&&n.role==="admin"&&C.jsx(vn,{to:"/admin",className:"nav-link",children:"Admin"}),n?C.jsxs("div",{className:"nav-user",children:[C.jsx("span",{className:"nav-username",children:n.username}),C.jsx("button",{onClick:s,className:"btn btn-secondary",children:"Dconnexion"})]}):C.jsx(vn,{to:"/login",className:"btn btn-primary",children:"Connexion"})]})]})})};var y_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},B1=Wi.createContext&&Wi.createContext(y_),rD=["attr","size","title"];function oD(n,e){if(n==null)return{};var t=aD(n,e),s,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function aD(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function ry(){return ry=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ry.apply(this,arguments)}function j1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function oy(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?j1(Object(t),!0).forEach(function(s){lD(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):j1(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function lD(n,e,t){return e=cD(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cD(n){var e=uD(n,"string");return typeof e=="symbol"?e:e+""}function uD(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function v_(n){return n&&n.map((e,t)=>Wi.createElement(e.tag,oy({key:t},e.attr),v_(e.child)))}function Yi(n){return e=>Wi.createElement(hD,ry({attr:oy({},n.attr)},e),v_(n.child))}function hD(n){var e=t=>{var{attr:s,size:i,title:r}=n,o=oD(n,rD),l=i||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),Wi.createElement("svg",ry({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,o,{className:c,style:oy(oy({color:n.color||t.color},t.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),r&&Wi.createElement("title",null,r),n.children)};return B1!==void 0?Wi.createElement(B1.Consumer,null,t=>e(t)):e(y_)}function dD(n){return Yi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function fD(n){return Yi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81l-.26-1.33zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.3 2 22 2 22s.7-4.94 1.88-6.12A2.996 2.996 0 0 1 9 18zm4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"},child:[]}]})(n)}function rw(n){return Yi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"},child:[]}]})(n)}function pD(n){return Yi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(n)}function gD(n){return Yi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"},child:[]}]})(n)}function mD(n){return Yi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"},child:[]}]})(n)}function ov(n){return Yi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"},child:[]},{tag:"path",attr:{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99zM13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83zM17.5 14.33c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24z"},child:[]}]})(n)}function yD(n){return Yi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},child:[]}]})(n)}function vD(n){return Yi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 8.57a1.43 1.43 0 1 0 0 2.86 1.43 1.43 0 0 0 0-2.86z"},child:[]},{tag:"path",attr:{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2a.5.5 0 0 0 .4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68A6.999 6.999 0 0 0 13 3zm3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39a.19.19 0 0 1 .05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38a.2.2 0 0 1-.05.26l-.85.66c.03.12.04.25.04.39z"},child:[]}]})(n)}function wD(n){return Yi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"6",r:"2"},child:[]},{tag:"path",attr:{d:"M21 16v-2c-2.24 0-4.16-.96-5.6-2.68l-1.34-1.6A1.98 1.98 0 0 0 12.53 9h-1.05c-.59 0-1.15.26-1.53.72l-1.34 1.6C7.16 13.04 5.24 14 3 14v2c2.77 0 5.19-1.17 7-3.25V15l-3.88 1.55c-.67.27-1.12.93-1.12 1.66C5 19.2 5.8 20 6.79 20H9v-.5a2.5 2.5 0 0 1 2.5-2.5h3c.28 0 .5.22.5.5s-.22.5-.5.5h-3c-.83 0-1.5.67-1.5 1.5v.5h7.21c.99 0 1.79-.8 1.79-1.79 0-.73-.45-1.39-1.12-1.66L14 15v-2.25c1.81 2.08 4.23 3.25 7 3.25z"},child:[]}]})(n)}const bD=()=>{const{user:n}=Uh();return C.jsxs("div",{className:"home",children:[C.jsx("div",{className:"hero-section",children:C.jsxs("div",{className:"container",children:[C.jsx("h1",{children:"Bienvenue sur MYLib"}),C.jsx("p",{className:"hero-subtitle",children:"Votre bibliothque numrique pour l'ducation, la sant mentale et l'entrepreneuriat"}),C.jsxs("div",{className:"hero-buttons",children:[C.jsx(vn,{to:"/library",className:"btn btn-primary btn-large",children:"Explorer la Bibliothque"}),!n&&C.jsx(vn,{to:"/login",className:"btn btn-secondary btn-large",children:"Se Connecter"})]})]})}),C.jsx("div",{className:"features-section",children:C.jsxs("div",{className:"container",children:[C.jsx("h2",{children:"Fonctionnalits"}),C.jsxs("div",{className:"features-grid",children:[C.jsxs("div",{className:"feature-card",children:[C.jsx("div",{className:"feature-icon",children:C.jsx(ov,{size:48})}),C.jsx("h3",{children:"Bibliothque Numrique"}),C.jsx("p",{children:"Accdez  des livres ducatifs, tlchargez-les et lisez-les mme sans internet."}),C.jsx(vn,{to:"/library",className:"btn btn-primary",children:"Explorer"})]}),C.jsxs("div",{className:"feature-card",children:[C.jsx("div",{className:"feature-icon",children:C.jsx(vD,{size:48})}),C.jsx("h3",{children:"Sant Mentale"}),C.jsx("p",{children:"Exercices de relaxation, histoires inspirantes et ressources pour le bien-tre."}),C.jsx(vn,{to:"/mental-health",className:"btn btn-primary",children:"Dcouvrir"})]}),C.jsxs("div",{className:"feature-card",children:[C.jsx("div",{className:"feature-icon",children:C.jsx(fD,{size:48})}),C.jsx("h3",{children:"Entrepreneuriat"}),C.jsx("p",{children:"Leons, tudes de cas et livres pour devenir les futurs leaders."}),C.jsx(vn,{to:"/entrepreneurship",className:"btn btn-primary",children:"Apprendre"})]})]})]})}),C.jsx("div",{className:"info-section",children:C.jsx("div",{className:"container",children:C.jsxs("div",{className:"info-card",children:[C.jsx("h2",{children:" propos de MYLib"}),C.jsx("p",{children:"MYLib est conu pour fournir des installations et systmes ducatifs aux enfants de la Rpublique Dmocratique du Congo. Notre mission est de donner accs  l'ducation, aux ressources de sant mentale et au contenu entrepreneurial."}),C.jsx("p",{children:"L'application fonctionne hors ligne aprs le tlchargement, permettant un accs continu mme dans des zones avec une connectivit internet limite."})]})})})]})},SD=()=>{const[n,e]=P.useState(""),[t,s]=P.useState(""),[i,r]=P.useState(""),[o,l]=P.useState(!1),{login:c}=Uh(),u=Ca(),h=async d=>{d.preventDefault(),r(""),l(!0);const f=await c(n,t);f.success?u("/"):r(f.message||"Erreur de connexion"),l(!1)};return C.jsx("div",{className:"login-page",children:C.jsx("div",{className:"login-container",children:C.jsxs("div",{className:"login-card",children:[C.jsx("h2",{children:"Connexion"}),C.jsx("p",{className:"login-subtitle",children:"Connectez-vous pour accder aux fonctionnalits rserves aux enseignants et administrateurs"}),i&&C.jsx("div",{className:"error-message",children:i}),C.jsxs("form",{onSubmit:h,children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"username",children:"Nom d'utilisateur"}),C.jsx("input",{type:"text",id:"username",value:n,onChange:d=>e(d.target.value),required:!0,placeholder:"Entrez votre nom d'utilisateur"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"password",children:"Mot de passe"}),C.jsx("input",{type:"password",id:"password",value:t,onChange:d=>s(d.target.value),required:!0,placeholder:"Entrez votre mot de passe"})]}),C.jsx("button",{type:"submit",className:"btn btn-primary btn-block",disabled:o,children:o?"Connexion...":"Se Connecter"})]}),C.jsx("p",{className:"login-note",children:"Les enfants peuvent naviguer dans la bibliothque sans se connecter. La connexion est uniquement ncessaire pour les enseignants et administrateurs."})]})})})},AD=()=>{const[n,e]=P.useState([]),[t,s]=P.useState(!0),[i,r]=P.useState(""),[o,l]=P.useState(""),[c,u]=P.useState(""),h=Ca();P.useEffect(()=>{(async()=>{try{s(!0),u("");const v={};o&&(v.category=o);const A=await pe.get(`${Sn}/books`,{params:v});e(A.data)}catch(v){console.error("Error fetching books:",v),u("Impossible de charger les livres. Vrifiez votre connexion.")}finally{s(!1)}})()},[o]);const d=async()=>{try{s(!0),u("");const m={};i&&(m.search=i),o&&(m.category=o);const v=await pe.get(`${Sn}/books`,{params:m});e(v.data)}catch(m){console.error("Error searching books:",m),u("La recherche a chou. Ressayez plus tard.")}finally{s(!1)}},f=n.filter(m=>m.title.toLowerCase().includes(i.toLowerCase())||m.author&&m.author.toLowerCase().includes(i.toLowerCase())),g=i?f:n;return C.jsx("div",{className:"library-page",children:C.jsxs("div",{className:"container",children:[C.jsxs("div",{className:"page-header",children:[C.jsx("h1",{children:"Bibliothque"}),C.jsx("p",{children:"Explorez notre collection de livres ducatifs"}),C.jsx("p",{className:"offline-note",children:"Astuce : tlchargez les livres pour les lire hors ligne pendant 7 jours."})]}),c&&C.jsx("div",{className:"alert error-alert",children:c}),C.jsxs("div",{className:"search-bar",children:[C.jsx("input",{type:"text",placeholder:"Rechercher un livre...",value:i,onChange:m=>r(m.target.value),onKeyDown:m=>m.key==="Enter"&&d()}),C.jsx("button",{onClick:d,className:"btn btn-primary",children:"Rechercher"})]}),C.jsxs("div",{className:"categories",children:[C.jsx("button",{className:`category-btn ${o===""?"active":""}`,onClick:()=>l(""),children:"Tous"}),C.jsx("button",{className:`category-btn ${o==="education"?"active":""}`,onClick:()=>l("education"),children:"ducation"}),C.jsx("button",{className:`category-btn ${o==="mental_health"?"active":""}`,onClick:()=>l("mental_health"),children:"Sant Mentale"}),C.jsx("button",{className:`category-btn ${o==="entrepreneurship"?"active":""}`,onClick:()=>l("entrepreneurship"),children:"Entrepreneuriat"})]}),t?C.jsx("div",{className:"loading",children:"Chargement..."}):g.length===0?C.jsx("div",{className:"no-books",children:C.jsx("p",{children:"Aucun livre trouv."})}):C.jsx("div",{className:"grid",children:g.map(m=>C.jsxs("div",{className:"book-card",onClick:()=>h(`/book/${m.id}`),children:[C.jsx("div",{className:"book-icon",children:C.jsx(ov,{size:36})}),C.jsx("h3",{children:m.title}),m.author&&C.jsxs("p",{className:"book-author",children:["Par ",m.author]}),m.description&&C.jsxs("p",{className:"book-description",children:[m.description.substring(0,100),"..."]}),C.jsx("div",{className:"book-meta",children:C.jsx("span",{className:"book-category",children:m.category})})]},m.id))})]})})},mn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ow=[.001,0,0,.001,0,0],Kv=1.35,ls={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},$i={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},rf="pdfjs_internal_editor_",ne={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},fe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},w_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Bt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Bd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ut={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},yc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},sg={ERRORS:0,WARNINGS:1,INFOS:5},Lh={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Rg={moveTo:0,lineTo:1,curveTo:2,closePath:3},b_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let av=sg.WARNINGS;function ED(n){Number.isInteger(n)&&(av=n)}function xD(){return av}function lv(n){av>=sg.INFOS&&console.info(`Info: ${n}`)}function se(n){av>=sg.WARNINGS&&console.warn(`Warning: ${n}`)}function Fe(n){throw new Error(n)}function ge(n,e){n||Fe(e)}function CD(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function IS(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=RD(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return CD(s)?s:null}function OS(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&IS(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function le(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const hc=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class z1 extends hc{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Qv extends hc{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class ay extends hc{constructor(e){super(e,"InvalidPDFException")}}class of extends hc{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class _D extends hc{constructor(e){super(e,"FormatError")}}class qr extends hc{constructor(e){super(e,"AbortException")}}function S_(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Fe("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function ig(n){typeof n!="string"&&Fe("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function TD(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function kD(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function PD(){try{return new Function(""),!0}catch{return!1}}class Ft{static get isLittleEndian(){return le(this,"isLittleEndian",kD())}static get isEvalSupported(){return le(this,"isEvalSupported",PD())}static get isOffscreenCanvasSupported(){return le(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return le(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return le(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return le(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Jv=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ur,tm,aw;class q{static makeHexColor(e,t,s){return`#${Jv[e]}${Jv[t]}${Jv[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const i=e[s],r=e[s+1];e[s]=i*t[0]+r*t[2]+t[4],e[s+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],r=t[1],o=t[2],l=t[3],c=t[4],u=t[5];for(let h=0;h<6;h+=2){const d=e[s+h],f=e[s+h+1];e[s+h]=d*i+f*o+c,e[s+h+1]=d*r+f*l+u}}static applyInverseTransform(e,t){const s=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,s){const i=t[0],r=t[1],o=t[2],l=t[3],c=t[4],u=t[5],h=e[0],d=e[1],f=e[2],g=e[3];let m=i*h+c,v=m,A=i*f+c,y=A,b=l*d+u,S=b,x=l*g+u,_=x;if(r!==0||o!==0){const T=r*h,k=r*f,R=o*d,D=o*g;m+=R,y+=R,A+=D,v+=D,b+=T,_+=T,x+=k,S+=k}s[0]=Math.min(s[0],m,A,v,y),s[1]=Math.min(s[1],b,x,S,_),s[2]=Math.max(s[2],m,A,v,y),s[3]=Math.max(s[3],b,x,S,_)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],r=e[2],o=e[3],l=s**2+i**2,c=s*r+i*o,u=r**2+o**2,h=(l+u)/2,d=Math.sqrt(h**2-(l*u-c**2));t[0]=Math.sqrt(h+d||1),t[1]=Math.sqrt(h-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[s,r,i,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,r){r[0]=Math.min(r[0],e,s),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,s),r[3]=Math.max(r[3],t,i)}static bezierBoundingBox(e,t,s,i,r,o,l,c,u){u[0]=Math.min(u[0],e,l),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,l),u[3]=Math.max(u[3],t,c),E(this,Ur,aw).call(this,e,s,r,l,t,i,o,c,3*(-e+3*(s-r)+l),6*(e-2*s+r),3*(s-e),u),E(this,Ur,aw).call(this,e,s,r,l,t,i,o,c,3*(-t+3*(i-o)+c),6*(t-2*i+o),3*(i-t),u)}}Ur=new WeakSet,tm=function(e,t,s,i,r,o,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,g=f*u,m=d*(d*(d*e+3*u*t)+3*f*s)+g*i,v=d*(d*(d*r+3*u*o)+3*f*l)+g*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],v)},aw=function(e,t,s,i,r,o,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&E(this,Ur,tm).call(this,e,t,s,i,r,o,l,c,-d/h,f);return}const g=h**2-4*d*u;if(g<0)return;const m=Math.sqrt(g),v=2*u;E(this,Ur,tm).call(this,e,t,s,i,r,o,l,c,(-h+m)/v,f),E(this,Ur,tm).call(this,e,t,s,i,r,o,l,c,(-h-m)/v,f)},w(q,Ur);function RD(n){return decodeURIComponent(escape(n))}let Zv=null,U1=null;function A_(n){return Zv||(Zv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,U1=new Map([["","t"]])),n.replaceAll(Zv,(e,t,s)=>t?t.normalize("NFKC"):U1.get(s))}function FS(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),S_(n)}const BS="pdfjs_internal_id_";function LD(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...r]=t;if(!n(s)&&!Number.isInteger(s)||!e(i))return!1;const o=r.length;let l=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function on(n,e,t){return Math.min(Math.max(n,e),t)}function E_(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(S_(n))}function MD(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):ig(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class af{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(af.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class jS{static setupStorage(e,t,s,i,r){const o=i.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",l=>{i.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of s.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}l&&r.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var d,f;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const l=r!=="richText",c=e.div;if(c.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=g}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);o.append(g),l&&af.shouldBuildText(i.name)&&u.push(g)}return{textDivs:u}}const h=[[i,-1,o]];for(;h.length>0;){const[g,m,v]=h.at(-1);if(m+1===g.children.length){h.pop();continue}const A=g.children[++h.at(-1)[1]];if(A===null)continue;const{name:y}=A;if(y==="#text"){const S=document.createTextNode(A.value);u.push(S),v.append(S);continue}const b=(d=A==null?void 0:A.attributes)!=null&&d.xmlns?document.createElementNS(A.attributes.xmlns,y):document.createElement(y);if(v.append(b),A.attributes&&this.setAttributes({html:b,element:A,storage:t,intent:r,linkService:s}),((f=A.children)==null?void 0:f.length)>0)h.push([A,-1,b]);else if(A.value){const S=document.createTextNode(A.value);l&&af.shouldBuildText(y)&&u.push(S),b.append(S)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Qi="http://www.w3.org/2000/svg",Ma=class Ma{};O(Ma,"CSS",96),O(Ma,"PDF",72),O(Ma,"PDF_TO_CSS_UNITS",Ma.CSS/Ma.PDF);let Xr=Ma;async function Hh(n,e="text"){if(ld(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class rg{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,d,f,g;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,g=1;break;case 90:h=0,d=1,f=1,g=0;break;case 270:h=0,d=-1,f=-1,g=0;break;case 0:h=1,d=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,g=-g);let m,v,A,y;h===0?(m=Math.abs(u-e[1])*s+r,v=Math.abs(c-e[0])*s+o,A=(e[3]-e[1])*s,y=(e[2]-e[0])*s):(m=Math.abs(c-e[0])*s+r,v=Math.abs(u-e[1])*s+o,A=(e[2]-e[0])*s,y=(e[3]-e[1])*s),this.transform=[h*s,d*s,f*s,g*s,m-h*s*c-f*s*u,v-d*s*c-g*s*u],this.width=A,this.height=y}get rawDims(){const e=this.viewBox;return le(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new rg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const s=[e,t];return q.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];q.applyTransform(t,this.transform);const s=[e[2],e[3]];return q.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return q.applyInverseTransform(s,this.transform),s}}class cv extends hc{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function og(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function uv(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function x_(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function C_(n,e="document.pdf"){if(typeof n!="string")return e;if(og(n))return se('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const i=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},r=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(r.test(o))return i(o);if(s.searchParams.size>0){const l=Array.from(s.searchParams.values()).reverse();for(const u of l)if(r.test(u))return i(u);const c=Array.from(s.searchParams.keys()).reverse();for(const u of c)if(r.test(u))return i(u)}if(s.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(c)return i(c[0])}return e}class H1{constructor(){O(this,"started",Object.create(null));O(this,"times",[])}time(e){e in this.started&&se(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||se(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function ld(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ms(n){n.preventDefault()}function et(n){n.preventDefault(),n.stopPropagation()}function DD(n){console.log("Deprecated API usage: "+n)}var pf;class lf{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;a(this,pf)||p(this,pf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=a(this,pf).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,l+=d):u==="+"&&(o-=h,l-=d),new Date(Date.UTC(s,i,r,o,l,c))}}pf=new WeakMap,w(lf,pf);function __(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new rg({viewBox:r,userUnit:1,scale:e,rotation:t})}function $h(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(se(`Not a valid color format: "${n}"`),[0,0,0])}function ND(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,$h(s))}e.remove()}function Je(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform();return[e,t,s,i,r,o]}function gi(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[e,t,s,i,r,o]}function ya(n,e,t=!1,s=!0){if(e instanceof rg){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:o}=n,l=Ft.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class ui{constructor(){const{pixelRatio:e}=ui;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,r=-1){let o=1/0,l=1/0,c=1/0;s=ui.capPixels(s,r),s>0&&(o=Math.sqrt(s/(e*t))),i!==-1&&(l=i/e,c=i/t);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const ly=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ID{static get isDarkMode(){var e;return le(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class T_{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),le(this,"commentForegroundColor",$h(s))}}function k_(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const i=255*(1-s);return n=Math.round(n*s+i),e=Math.round(e*s+i),t=Math.round(t*s+i),[n,e,t]}function $1(n,e){const t=n[0]/255,s=n[1]/255,i=n[2]/255,r=Math.max(t,s,i),o=Math.min(t,s,i),l=(r+o)/2;if(r===o)e[0]=e[1]=0;else{const c=r-o;switch(e[1]=l<.5?c/(r+o):c/(2-r-o),r){case t:e[0]=((s-i)/c+(s<i?6:0))*60;break;case s:e[0]=((i-t)/c+2)*60;break;case i:e[0]=((t-s)/c+4)*60;break}}e[2]=l}function lw(n,e){const t=n[0],s=n[1],i=n[2],r=(1-Math.abs(2*i-1))*s,o=r*(1-Math.abs(t/60%2-1)),l=i-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+l,e[1]=o+l,e[2]=l;break;case 1:e[0]=o+l,e[1]=r+l,e[2]=l;break;case 2:e[0]=l,e[1]=r+l,e[2]=o+l;break;case 3:e[0]=l,e[1]=o+l,e[2]=r+l;break;case 4:e[0]=o+l,e[1]=l,e[2]=r+l;break;case 5:case 6:e[0]=r+l,e[1]=l,e[2]=o+l;break}}function V1(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function W1(n,e,t){lw(n,t),t.map(V1);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];lw(e,t),t.map(V1);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>i?(s+.05)/(i+.05):(i+.05)/(s+.05)}const G1=new Map;function P_(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=G1.get(t);if(s)return s;const i=new Float32Array(9),r=i.subarray(0,3),o=i.subarray(3,6);$1(n,o);const l=i.subarray(6,9);$1(e,l);const c=l[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),W1(o,l,r)<u){let h,d;c?(h=o[2],d=1):(h=0,d=o[2]);const f=.005;for(;d-h>f;){const g=o[2]=(h+d)/2;c===W1(o,l,r)<u?h=g:d=g}o[2]=c?d:h}return lw(o,r),s=q.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),G1.set(t,s),s}function zS({html:n,dir:e,className:t},s){const i=document.createDocumentFragment();if(typeof n=="string"){const r=document.createElement("p");r.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let l=0,c=o.length;l<c;++l){const u=o[l];r.append(document.createTextNode(u)),l<c-1&&r.append(document.createElement("br"))}i.append(r)}else jS.render({xfaHtml:n,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),s.append(i)}var lo,co,Ss,As,gf,uo,Qc,Jc,mf,wy,R_,qt,L_,M_,vc,cd;const tr=class tr{constructor(e){w(this,qt);w(this,lo,null);w(this,co,null);w(this,Ss);w(this,As,null);w(this,gf,null);w(this,uo,null);w(this,Qc,null);w(this,Jc,null);p(this,Ss,e),a(tr,mf)||p(tr,mf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=p(this,lo,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=a(this,Ss)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",ms,{signal:t}),e.addEventListener("pointerdown",E(tr,wy,R_),{signal:t}));const s=p(this,As,document.createElement("div"));s.className="buttons",e.append(s);const i=a(this,Ss).toolbarPosition;if(i){const{style:r}=e,o=a(this,Ss)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return a(this,lo)}hide(){var e;a(this,lo).classList.add("hidden"),(e=a(this,co))==null||e.hideDropdown()}show(){var e,t;a(this,lo).classList.remove("hidden"),(e=a(this,gf))==null||e.shown(),(t=a(this,uo))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=a(this,Ss),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",a(tr,mf)[e]),E(this,qt,vc).call(this,s)&&s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),a(this,As).append(s)}async addAltText(e){const t=await e.render();E(this,qt,vc).call(this,t),a(this,As).append(t,a(this,qt,cd)),p(this,gf,e)}addComment(e,t=null){if(a(this,uo))return;const s=e.renderForToolbar();if(!s)return;E(this,qt,vc).call(this,s);const i=p(this,Qc,a(this,qt,cd));t?(a(this,As).insertBefore(s,t),a(this,As).insertBefore(i,t)):a(this,As).append(s,i),p(this,uo,e),e.toolbar=this}addColorPicker(e){if(a(this,co))return;p(this,co,e);const t=e.renderButton();E(this,qt,vc).call(this,t),a(this,As).append(t,a(this,qt,cd))}async addEditSignatureButton(e){const t=p(this,Jc,await e.renderEditButton(a(this,Ss)));E(this,qt,vc).call(this,t),a(this,As).append(t,a(this,qt,cd))}removeButton(e){var t,s;switch(e){case"comment":(t=a(this,uo))==null||t.removeToolbarCommentButton(),p(this,uo,null),(s=a(this,Qc))==null||s.remove(),p(this,Qc,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const i=a(this,As).querySelector(s);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){a(this,Jc)&&(a(this,Jc).title=e)}remove(){var e;a(this,lo).remove(),(e=a(this,co))==null||e.destroy(),p(this,co,null)}};lo=new WeakMap,co=new WeakMap,Ss=new WeakMap,As=new WeakMap,gf=new WeakMap,uo=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,mf=new WeakMap,wy=new WeakSet,R_=function(e){e.stopPropagation()},qt=new WeakSet,L_=function(e){a(this,Ss)._focusEventsAllowed=!1,et(e)},M_=function(e){a(this,Ss)._focusEventsAllowed=!0,et(e)},vc=function(e){const t=a(this,Ss)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",E(this,qt,L_).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",E(this,qt,M_).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ms,{signal:t}),!0)},cd=function(){const e=document.createElement("div");return e.className="divider",e},w(tr,wy),w(tr,mf,null);let cw=tr;var yf,ja,ir,Yr,D_,N_,uw;class OD{constructor(e){w(this,Yr);w(this,yf,null);w(this,ja,null);w(this,ir);p(this,ir,e)}show(e,t,s){const[i,r]=E(this,Yr,N_).call(this,t,s),{style:o}=a(this,ja)||p(this,ja,E(this,Yr,D_).call(this));e.append(a(this,ja)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,ja).remove()}}yf=new WeakMap,ja=new WeakMap,ir=new WeakMap,Yr=new WeakSet,D_=function(){const e=p(this,ja,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=a(this,ir)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",ms,{signal:t});const s=p(this,yf,document.createElement("div"));return s.className="buttons",e.append(s),a(this,ir).hasCommentManager()&&E(this,Yr,uw).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,ir).commentSelection("floating_button")}),E(this,Yr,uw).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,ir).highlightSelection("floating_button")}),e},N_=function(e,t){let s=0,i=0;for(const r of e){const o=r.y+r.height;if(o<s)continue;const l=r.x+(t?r.width:0);if(o>s){i=l,s=o;continue}t?l>i&&(i=l):l<i&&(i=l)}return[t?1-i:i,s]},uw=function(e,t,s,i){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const l=a(this,ir)._signal;l instanceof AbortSignal&&!l.aborted&&(r.addEventListener("contextmenu",ms,{signal:l}),r.addEventListener("click",i,{signal:l})),a(this,yf).append(r)};function I_(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var by;class FD{constructor(){w(this,by,0)}get id(){return`${rf}${bt(this,by)._++}`}}by=new WeakMap;var Zc,vf,Zt,eu,nm;const QS=class QS{constructor(){w(this,eu);w(this,Zc,FS());w(this,vf,0);w(this,Zt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return le(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return E(this,eu,nm).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return E(this,eu,nm).call(this,e,e)}async getFromBlob(e,t){const s=await t;return E(this,eu,nm).call(this,e,s)}async getFromId(e){a(this,Zt)||p(this,Zt,new Map);const t=a(this,Zt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){a(this,Zt)||p(this,Zt,new Map);let s=a(this,Zt).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${a(this,Zc)}_${bt(this,vf)._++}`,refCounter:1,isSvg:!1},a(this,Zt).set(e,s),a(this,Zt).set(s.id,s),s}getSvgUrl(e){const t=a(this,Zt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;a(this,Zt)||p(this,Zt,new Map);const t=a(this,Zt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${a(this,Zc)}_`)}};Zc=new WeakMap,vf=new WeakMap,Zt=new WeakMap,eu=new WeakSet,nm=async function(e,t){a(this,Zt)||p(this,Zt,new Map);let s=a(this,Zt).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${a(this,Zc)}_${bt(this,vf)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await Hh(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=QS._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,u()},o.onload=async()=>{const d=s.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=h});o.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){se(i),s=null}return a(this,Zt).set(e,s),s&&a(this,Zt).set(s.id,s),s};let hw=QS;var ht,ho,wf,Qe;class BD{constructor(e=128){w(this,ht,[]);w(this,ho,!1);w(this,wf);w(this,Qe,-1);p(this,wf,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(i&&e(),a(this,ho))return;const c={cmd:e,undo:t,post:s,type:r};if(a(this,Qe)===-1){a(this,ht).length>0&&(a(this,ht).length=0),p(this,Qe,0),a(this,ht).push(c);return}if(o&&a(this,ht)[a(this,Qe)].type===r){l&&(c.undo=a(this,ht)[a(this,Qe)].undo),a(this,ht)[a(this,Qe)]=c;return}const u=a(this,Qe)+1;u===a(this,wf)?a(this,ht).splice(0,1):(p(this,Qe,u),u<a(this,ht).length&&a(this,ht).splice(u)),a(this,ht).push(c)}undo(){if(a(this,Qe)===-1)return;p(this,ho,!0);const{undo:e,post:t}=a(this,ht)[a(this,Qe)];e(),t==null||t(),p(this,ho,!1),p(this,Qe,a(this,Qe)-1)}redo(){if(a(this,Qe)<a(this,ht).length-1){p(this,Qe,a(this,Qe)+1),p(this,ho,!0);const{cmd:e,post:t}=a(this,ht)[a(this,Qe)];e(),t==null||t(),p(this,ho,!1)}}hasSomethingToUndo(){return a(this,Qe)!==-1}hasSomethingToRedo(){return a(this,Qe)<a(this,ht).length-1}cleanType(e){if(a(this,Qe)!==-1){for(let t=a(this,Qe);t>=0;t--)if(a(this,ht)[t].type!==e){a(this,ht).splice(t+1,a(this,Qe)-t),p(this,Qe,t);return}a(this,ht).length=0,p(this,Qe,-1)}}destroy(){p(this,ht,null)}}ht=new WeakMap,ho=new WeakMap,wf=new WeakMap,Qe=new WeakMap;var Sy,O_;class ag{constructor(e){w(this,Sy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ft.platform;for(const[s,i,r={}]of e)for(const o of s){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(E(this,Sy,O_).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:l=null}}=s;l&&!l(e,t)||(i.bind(e,...o,t)(),r||et(t))}}Sy=new WeakSet,O_=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ay=class Ay{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return ND(e),le(this,"_colors",e)}convert(e){const t=$h(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,o)=>r===t[o]))return Ay._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?q.makeHexColor(...t):e}};O(Ay,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let dw=Ay;var tu,Wn,nu,it,At,su,Es,iu,xs,en,fo,po,ru,go,wi,Cs,za,bf,Sf,ou,Af,bi,mo,au,yo,Si,Ey,vo,lu,Ef,wo,Ua,cu,bo,xf,mt,xe,rr,So,Ao,Cf,uu,_f,Eo,Ai,or,Tf,kf,_s,U,sm,fw,F_,B_,ud,j_,z_,U_,pw,H_,gw,mw,$_,hn,Ji,V_,W_,yw,G_,hd,vw;const Bc=class Bc{constructor(e,t,s,i,r,o,l,c,u,h,d,f,g,m,v,A){w(this,U);w(this,tu,new AbortController);w(this,Wn,null);w(this,nu,null);w(this,it,new Map);w(this,At,new Map);w(this,su,null);w(this,Es,null);w(this,iu,null);w(this,xs,new BD);w(this,en,null);w(this,fo,null);w(this,po,null);w(this,ru,0);w(this,go,new Set);w(this,wi,null);w(this,Cs,null);w(this,za,new Set);O(this,"_editorUndoBar",null);w(this,bf,!1);w(this,Sf,!1);w(this,ou,!1);w(this,Af,null);w(this,bi,null);w(this,mo,null);w(this,au,null);w(this,yo,!1);w(this,Si,null);w(this,Ey,new FD);w(this,vo,!1);w(this,lu,!1);w(this,Ef,!1);w(this,wo,null);w(this,Ua,null);w(this,cu,null);w(this,bo,null);w(this,xf,null);w(this,mt,ne.NONE);w(this,xe,new Set);w(this,rr,null);w(this,So,null);w(this,Ao,null);w(this,Cf,null);w(this,uu,null);w(this,_f,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,Eo,[0,0]);w(this,Ai,null);w(this,or,null);w(this,Tf,null);w(this,kf,null);w(this,_s,null);const y=this._signal=a(this,tu).signal;p(this,or,e),p(this,Tf,t),p(this,kf,s),p(this,su,i),p(this,en,r),p(this,So,o),p(this,uu,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:y}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),l._on("setpreference",this.onSetPreference.bind(this),{signal:y}),l._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:y}),window.addEventListener("pointerdown",()=>{p(this,lu,!0)},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{p(this,lu,!1)},{capture:!0,signal:y}),E(this,U,j_).call(this),E(this,U,$_).call(this),E(this,U,pw).call(this),p(this,Es,c.annotationStorage),p(this,Af,c.filterFactory),p(this,Ao,u),p(this,au,h||null),p(this,bf,d),p(this,Sf,f),p(this,ou,g),p(this,xf,m||null),this.viewParameters={realScale:Xr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=A!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const e=Bc.prototype,t=o=>a(o,or).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return le(this,"_keyboardManager",new ag([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,or).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,or).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i,r,o,l,c,u;(e=a(this,_s))==null||e.resolve(),p(this,_s,null),(t=a(this,tu))==null||t.abort(),p(this,tu,null),this._signal=null;for(const h of a(this,At).values())h.destroy();a(this,At).clear(),a(this,it).clear(),a(this,za).clear(),(s=a(this,bo))==null||s.clear(),p(this,Wn,null),a(this,xe).clear(),a(this,xs).destroy(),(i=a(this,su))==null||i.destroy(),(r=a(this,en))==null||r.destroy(),(o=a(this,So))==null||o.destroy(),(l=a(this,Si))==null||l.hide(),p(this,Si,null),(c=a(this,cu))==null||c.destroy(),p(this,cu,null),p(this,nu,null),a(this,bi)&&(clearTimeout(a(this,bi)),p(this,bi,null)),a(this,Ai)&&(clearTimeout(a(this,Ai)),p(this,Ai,null)),(u=this._editorUndoBar)==null||u.destroy(),p(this,uu,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return a(this,xf)}get useNewAltTextFlow(){return a(this,Sf)}get useNewAltTextWhenAddingImage(){return a(this,ou)}get hcmFilter(){return le(this,"hcmFilter",a(this,Ao)?a(this,Af).addHCMFilter(a(this,Ao).foreground,a(this,Ao).background):"none")}get direction(){return le(this,"direction",getComputedStyle(a(this,or)).direction)}get _highlightColors(){return le(this,"_highlightColors",a(this,au)?new Map(a(this,au).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return le(this,"highlightColors",null);const t=new Map,s=!!a(this,Ao);for(const[i,r]of e){const o=i.endsWith("_HCM");if(s&&o){t.set(i.replace("_HCM",""),r);continue}!s&&!o&&t.set(i,r)}return le(this,"highlightColors",t)}get highlightColorNames(){return le(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),p(this,po,e)}setMainHighlightColorPicker(e){p(this,cu,e)}editAltText(e,t=!1){var s;(s=a(this,su))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!a(this,en)}editComment(e,t,s,i){var r;(r=a(this,en))==null||r.showDialog(this,e,t,s,i)}selectComment(e,t){const s=a(this,At).get(e),i=s==null?void 0:s.getEditorByUID(t);i==null||i.toggleComment(!0,!0)}updateComment(e){var t;(t=a(this,en))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=a(this,en))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=a(this,en))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var i;(i=a(this,en))==null||i.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=a(this,en))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=a(this,en))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(a(this,At).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),i=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await s}getSignature(e){var t;(t=a(this,So))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return a(this,So)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":p(this,ou,t);break}}onPageChanging({pageNumber:e}){p(this,ru,e-1)}focusMainContainer(){a(this,or).focus()}findParent(e,t){for(const s of a(this,At).values()){const{x:i,y:r,width:o,height:l}=s.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=r&&t<=r+l)return s}return null}disableUserSelect(e=!1){a(this,Tf).classList.toggle("noUserSelect",e)}addShouldRescale(e){a(this,za).add(e)}removeShouldRescale(e){a(this,za).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Xr.PDF_TO_CSS_UNITS;for(const s of a(this,za))s.onScaleChanging();(t=a(this,po))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:l}=s,c=s.toString(),h=E(this,U,sm).call(this,s).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;s.empty();const f=E(this,U,fw).call(this,h),g=a(this,mt)===ne.NONE,m=()=>{const v=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:l,text:c});g&&this.showAllEditors("highlight",!0,!0),t&&(v==null||v.editComment())};if(g){this.switchToMode(ne.HIGHLIGHT,m);return}m()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!a(this,Es))return null;const t=`${rf}${e}`,s=a(this,Es).getRawValue(t);return s&&a(this,Es).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&a(this,Es)&&!a(this,Es).has(e.id)&&a(this,Es).setValue(e.id,e)}a11yAlert(e,t=null){const s=a(this,kf);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,yo)&&(p(this,yo,!1),E(this,U,ud).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of a(this,xe))if(t.div.contains(e)){p(this,Ua,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!a(this,Ua))return;const[e,t]=a(this,Ua);p(this,Ua,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){E(this,U,pw).call(this),E(this,U,gw).call(this)}removeEditListeners(){E(this,U,H_).call(this),E(this,U,mw).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of a(this,Cs))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of a(this,Cs))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=a(this,Wn))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of a(this,xe)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of a(this,Cs))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){se(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const u=await i.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)E(this,U,yw).call(this,c);E(this,U,vw).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){se(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,mt)!==ne.NONE&&!this.isEditorHandlingKeyboard&&Bc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,yo)&&(p(this,yo,!1),E(this,U,ud).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(E(this,U,z_).call(this),E(this,U,gw).call(this),E(this,U,hn).call(this,{isEditing:a(this,mt)!==ne.NONE,isEmpty:E(this,U,hd).call(this),hasSomethingToUndo:a(this,xs).hasSomethingToUndo(),hasSomethingToRedo:a(this,xs).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,U,U_).call(this),E(this,U,mw).call(this),E(this,U,hn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!a(this,Cs)){p(this,Cs,e);for(const t of a(this,Cs))E(this,U,Ji).call(this,t.defaultPropertiesToUpdate)}}getId(){return a(this,Ey).id}get currentLayer(){return a(this,At).get(a(this,ru))}getLayer(e){return a(this,At).get(e)}get currentPageIndex(){return a(this,ru)}addLayer(e){a(this,At).set(e.pageIndex,e),a(this,vo)?e.enable():e.disable()}removeLayer(e){a(this,At).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1,r=!1){var o,l,c,u,h,d;if(a(this,mt)!==e&&!(a(this,_s)&&(await a(this,_s).promise,!a(this,_s)))){if(p(this,_s,Promise.withResolvers()),(o=a(this,po))==null||o.commitOrRemove(),a(this,mt)===ne.POPUP&&((l=a(this,en))==null||l.hideSidebar()),(c=a(this,en))==null||c.destroyPopup(),p(this,mt,e),e===ne.NONE){this.setEditingState(!1),E(this,U,W_).call(this);for(const f of a(this,it).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),a(this,_s).resolve();return}for(const f of a(this,it).values())f.addStandaloneCommentButton();e===ne.SIGNATURE&&await((h=a(this,So))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await E(this,U,V_).call(this),this.unselectAll();for(const f of a(this,At).values())f.updateMode(e);if(e===ne.POPUP){a(this,nu)||p(this,nu,await a(this,uu).getAnnotationsByType(new Set(a(this,Cs).map(m=>m._editorType))));const f=new Set,g=[];for(const m of a(this,it).values()){const{annotationElementId:v,hasComment:A,deleted:y}=m;v&&f.add(v),A&&!y&&g.push(m.getData())}for(const m of a(this,nu)){const{id:v,popupRef:A,contentsObj:y}=m;A&&(y!=null&&y.str)&&!f.has(v)&&!a(this,go).has(v)&&g.push(m)}(d=a(this,en))==null||d.showSidebar(g)}if(!t){s&&this.addNewEditorFromKeyboard(),a(this,_s).resolve();return}for(const f of a(this,it).values())f.uid===t?(this.setSelected(f),r?f.editComment():i?f.enterInEditMode():f.focus()):f.unselect();a(this,_s).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==a(this,mt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(a(this,Cs)){switch(e){case fe.CREATE:this.currentLayer.addNewEditor(t);return;case fe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Cf)||p(this,Cf,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of a(this,xe))s.updateParams(e,t);else for(const s of a(this,Cs))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const o of a(this,it).values())o.editorType===e&&o.show(t);(((r=a(this,Cf))==null?void 0:r.get(fe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&E(this,U,Ji).call(this,[[fe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(a(this,Ef)!==e){p(this,Ef,e);for(const t of a(this,At).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of a(this,it).values())t.pageIndex===e&&(yield t)}getEditor(e){return a(this,it).get(e)}addEditor(e){a(this,it).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(a(this,bi)&&clearTimeout(a(this,bi)),p(this,bi,setTimeout(()=>{this.focusMainContainer(),p(this,bi,null)},0))),a(this,it).delete(e.id),e.annotationElementId&&((t=a(this,bo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!a(this,go).has(e.annotationElementId))&&((s=a(this,Es))==null||s.remove(e.id))}addDeletedAnnotationElement(e){a(this,go).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return a(this,go).has(e)}removeDeletedAnnotationElement(e){a(this,go).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){a(this,Wn)!==e&&(p(this,Wn,e),e&&E(this,U,Ji).call(this,e.propertiesToUpdate))}updateUI(e){a(this,U,G_)===e&&E(this,U,Ji).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){E(this,U,Ji).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(a(this,xe).has(e)){a(this,xe).delete(e),e.unselect(),E(this,U,hn).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,xe).add(e),e.select(),E(this,U,Ji).call(this,e.propertiesToUpdate),E(this,U,hn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=a(this,po))==null||t.commitOrRemove();for(const s of a(this,xe))s!==e&&s.unselect();a(this,xe).clear(),a(this,xe).add(e),e.select(),E(this,U,Ji).call(this,e.propertiesToUpdate),E(this,U,hn).call(this,{hasSelectedEditor:!0})}isSelected(e){return a(this,xe).has(e)}get firstSelectedEditor(){return a(this,xe).values().next().value}unselect(e){e.unselect(),a(this,xe).delete(e),E(this,U,hn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,xe).size!==0}get isEnterHandled(){return a(this,xe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;a(this,xs).undo(),E(this,U,hn).call(this,{hasSomethingToUndo:a(this,xs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,U,hd).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){a(this,xs).redo(),E(this,U,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,xs).hasSomethingToRedo(),isEmpty:E(this,U,hd).call(this)})}addCommands(e){a(this,xs).add(e),E(this,U,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,U,hd).call(this)})}cleanUndoStack(e){a(this,xs).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...a(this,xe)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},i=()=>{for(const o of t)E(this,U,yw).call(this,o)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=a(this,Wn))==null||e.commitOrRemove()}hasSomethingToControl(){return a(this,Wn)||this.hasSelection}selectAll(){for(const e of a(this,xe))e.commit();E(this,U,vw).call(this,a(this,it).values())}unselectAll(){var e;if(!(a(this,Wn)&&(a(this,Wn).commitOrRemove(),a(this,mt)!==ne.NONE))&&!((e=a(this,po))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of a(this,xe))t.unselect();a(this,xe).clear(),E(this,U,hn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;a(this,Eo)[0]+=e,a(this,Eo)[1]+=t;const[i,r]=a(this,Eo),o=[...a(this,xe)],l=1e3;a(this,Ai)&&clearTimeout(a(this,Ai)),p(this,Ai,setTimeout(()=>{p(this,Ai,null),a(this,Eo)[0]=a(this,Eo)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,it).has(c.id)&&(c.translateInPage(i,r),c.translationDone())},undo:()=>{for(const c of o)a(this,it).has(c.id)&&(c.translateInPage(-i,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),p(this,wi,new Map);for(const e of a(this,xe))a(this,wi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,wi))return!1;this.disableUserSelect(!1);const e=a(this,wi);p(this,wi,null);let t=!1;for(const[{x:i,y:r,pageIndex:o},l]of e)l.newX=i,l.newY=r,l.newPageIndex=o,t||(t=i!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!t)return!1;const s=(i,r,o,l)=>{if(a(this,it).has(i.id)){const c=a(this,At).get(l);c?i._setParentAndPosition(c,r,o):(i.pageIndex=l,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:l}]of e)s(i,r,o,l)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:l}]of e)s(i,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(a(this,wi))for(const s of a(this,wi).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||a(this,xe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return a(this,Wn)===e}getActive(){return a(this,Wn)}getMode(){return a(this,mt)}isEditingMode(){return a(this,mt)!==ne.NONE}get imageManager(){return le(this,"imageManager",new hw)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-i)/o,y:1-(u+d-s)/r,width:f/o,height:d/r});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-s)/r,y:1-(h+f-i)/o,width:d/r,height:f/o});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-i)/o,y:(u-s)/r,width:f/o,height:d/r});break;default:l=(u,h,d,f)=>({x:(u-s)/r,y:(h-i)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:g,width:m,height:v}of d.getClientRects())m===0||v===0||c.push(l(f,g,m,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(a(this,iu)||p(this,iu,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=a(this,iu))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=a(this,iu))==null?void 0:i.get(e.data.id);if(!t)return;const s=a(this,Es).getRawValue(t);s&&(a(this,mt)===ne.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var r;const i=(r=a(this,bo))==null?void 0:r.get(e);i&&(i.setCanvas(t,s),a(this,bo).delete(e))}addMissingCanvas(e,t){(a(this,bo)||p(this,bo,new Map)).set(e,t)}};tu=new WeakMap,Wn=new WeakMap,nu=new WeakMap,it=new WeakMap,At=new WeakMap,su=new WeakMap,Es=new WeakMap,iu=new WeakMap,xs=new WeakMap,en=new WeakMap,fo=new WeakMap,po=new WeakMap,ru=new WeakMap,go=new WeakMap,wi=new WeakMap,Cs=new WeakMap,za=new WeakMap,bf=new WeakMap,Sf=new WeakMap,ou=new WeakMap,Af=new WeakMap,bi=new WeakMap,mo=new WeakMap,au=new WeakMap,yo=new WeakMap,Si=new WeakMap,Ey=new WeakMap,vo=new WeakMap,lu=new WeakMap,Ef=new WeakMap,wo=new WeakMap,Ua=new WeakMap,cu=new WeakMap,bo=new WeakMap,xf=new WeakMap,mt=new WeakMap,xe=new WeakMap,rr=new WeakMap,So=new WeakMap,Ao=new WeakMap,Cf=new WeakMap,uu=new WeakMap,_f=new WeakMap,Eo=new WeakMap,Ai=new WeakMap,or=new WeakMap,Tf=new WeakMap,kf=new WeakMap,_s=new WeakMap,U=new WeakSet,sm=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},fw=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of a(this,At).values())if(s.hasTextLayer(e))return s;return null},F_=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=E(this,U,sm).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(a(this,Si)||p(this,Si,new OD(this)),a(this,Si).show(s,i,this.direction==="ltr"))},B_=function(){var r,o,l;const e=document.getSelection();if(!e||e.isCollapsed){a(this,rr)&&((r=a(this,Si))==null||r.hide(),p(this,rr,null),E(this,U,hn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===a(this,rr))return;const i=E(this,U,sm).call(this,e).closest(".textLayer");if(!i){a(this,rr)&&((o=a(this,Si))==null||o.hide(),p(this,rr,null),E(this,U,hn).call(this,{hasSelectedText:!1}));return}if((l=a(this,Si))==null||l.hide(),p(this,rr,t),E(this,U,hn).call(this,{hasSelectedText:!0}),!(a(this,mt)!==ne.HIGHLIGHT&&a(this,mt)!==ne.NONE)&&(a(this,mt)===ne.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),p(this,yo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,mt)===ne.HIGHLIGHT?E(this,U,fw).call(this,i):null;if(c==null||c.toggleDrawing(),a(this,lu)){const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&E(this,U,ud).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else c==null||c.toggleDrawing(!0),E(this,U,ud).call(this,"main_toolbar")}},ud=function(e=""){a(this,mt)===ne.HIGHLIGHT?this.highlightSelection(e):a(this,bf)&&E(this,U,F_).call(this)},j_=function(){document.addEventListener("selectionchange",E(this,U,B_).bind(this),{signal:this._signal})},z_=function(){if(a(this,mo))return;p(this,mo,new AbortController);const e=this.combinedSignal(a(this,mo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},U_=function(){var e;(e=a(this,mo))==null||e.abort(),p(this,mo,null)},pw=function(){if(a(this,wo))return;p(this,wo,new AbortController);const e=this.combinedSignal(a(this,wo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},H_=function(){var e;(e=a(this,wo))==null||e.abort(),p(this,wo,null)},gw=function(){if(a(this,fo))return;p(this,fo,new AbortController);const e=this.combinedSignal(a(this,fo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},mw=function(){var e;(e=a(this,fo))==null||e.abort(),p(this,fo,null)},$_=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},hn=function(e){Object.entries(e).some(([s,i])=>a(this,_f)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,_f),e)}),a(this,mt)===ne.HIGHLIGHT&&e.hasSelectedEditor===!1&&E(this,U,Ji).call(this,[[fe.HIGHLIGHT_FREE,!0]]))},Ji=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},V_=async function(){if(!a(this,vo)){p(this,vo,!0);const e=[];for(const t of a(this,At).values())e.push(t.enable());await Promise.all(e);for(const t of a(this,it).values())t.enable()}},W_=function(){if(this.unselectAll(),a(this,vo)){p(this,vo,!1);for(const e of a(this,At).values())e.disable();for(const e of a(this,it).values())e.disable()}},yw=function(e){const t=a(this,At).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},G_=function(){let e=null;for(e of a(this,xe));return e},hd=function(){if(a(this,it).size===0)return!0;if(a(this,it).size===1)for(const e of a(this,it).values())return e.isEmpty();return!1},vw=function(e){for(const t of a(this,xe))t.unselect();a(this,xe).clear();for(const t of e)t.isEmpty()||(a(this,xe).add(t),t.select());E(this,U,hn).call(this,{hasSelectedEditor:this.hasSelection})},O(Bc,"TRANSLATE_SMALL",1),O(Bc,"TRANSLATE_BIG",10);let va=Bc;var kt,Ei,Gs,hu,xi,Gn,du,Ci,Tn,ar,Ha,_i,xo,oi,dd,im;const dn=class dn{constructor(e){w(this,oi);w(this,kt,null);w(this,Ei,!1);w(this,Gs,null);w(this,hu,null);w(this,xi,null);w(this,Gn,null);w(this,du,!1);w(this,Ci,null);w(this,Tn,null);w(this,ar,null);w(this,Ha,null);w(this,_i,!1);p(this,Tn,e),p(this,_i,e._uiManager.useNewAltTextFlow),a(dn,xo)||p(dn,xo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){dn._l10n??(dn._l10n=e)}async render(){const e=p(this,Gs,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=p(this,hu,document.createElement("span"));e.append(t),a(this,_i)?(e.classList.add("new"),e.setAttribute("data-l10n-id",a(dn,xo).missing),t.setAttribute("data-l10n-id",a(dn,xo)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=a(this,Tn)._uiManager._signal;e.addEventListener("contextmenu",ms,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),a(this,Tn)._uiManager.editAltText(a(this,Tn)),a(this,_i)&&a(this,Tn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,oi,dd)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(p(this,du,!0),i(r))},{signal:s}),await E(this,oi,im).call(this),e}finish(){a(this,Gs)&&(a(this,Gs).focus({focusVisible:a(this,du)}),p(this,du,!1))}isEmpty(){return a(this,_i)?a(this,kt)===null:!a(this,kt)&&!a(this,Ei)}hasData(){return a(this,_i)?a(this,kt)!==null||!!a(this,ar):this.isEmpty()}get guessedText(){return a(this,ar)}async setGuessedText(e){a(this,kt)===null&&(p(this,ar,e),p(this,Ha,await dn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),E(this,oi,im).call(this))}toggleAltTextBadge(e=!1){var t;if(!a(this,_i)||a(this,kt)){(t=a(this,Ci))==null||t.remove(),p(this,Ci,null);return}if(!a(this,Ci)){const s=p(this,Ci,document.createElement("div"));s.className="noAltTextBadge",a(this,Tn).div.append(s)}a(this,Ci).classList.toggle("hidden",!e)}serialize(e){let t=a(this,kt);return!e&&a(this,ar)===t&&(t=a(this,Ha)),{altText:t,decorative:a(this,Ei),guessedText:a(this,ar),textWithDisclaimer:a(this,Ha)}}get data(){return{altText:a(this,kt),decorative:a(this,Ei)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(p(this,ar,s),p(this,Ha,i)),!(a(this,kt)===e&&a(this,Ei)===t)&&(r||(p(this,kt,e),p(this,Ei,t)),E(this,oi,im).call(this))}toggle(e=!1){a(this,Gs)&&(!e&&a(this,Gn)&&(clearTimeout(a(this,Gn)),p(this,Gn,null)),a(this,Gs).disabled=!e)}shown(){a(this,Tn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,oi,dd)}})}destroy(){var e,t;(e=a(this,Gs))==null||e.remove(),p(this,Gs,null),p(this,hu,null),p(this,xi,null),(t=a(this,Ci))==null||t.remove(),p(this,Ci,null)}};kt=new WeakMap,Ei=new WeakMap,Gs=new WeakMap,hu=new WeakMap,xi=new WeakMap,Gn=new WeakMap,du=new WeakMap,Ci=new WeakMap,Tn=new WeakMap,ar=new WeakMap,Ha=new WeakMap,_i=new WeakMap,xo=new WeakMap,oi=new WeakSet,dd=function(){return a(this,kt)&&"added"||a(this,kt)===null&&this.guessedText&&"review"||"missing"},im=async function(){var i,r,o;const e=a(this,Gs);if(!e)return;if(a(this,_i)){if(e.classList.toggle("done",!!a(this,kt)),e.setAttribute("data-l10n-id",a(dn,xo)[a(this,oi,dd)]),(i=a(this,hu))==null||i.setAttribute("data-l10n-id",a(dn,xo)[`${a(this,oi,dd)}-label`]),!a(this,kt)){(r=a(this,xi))==null||r.remove();return}}else{if(!a(this,kt)&&!a(this,Ei)){e.classList.remove("done"),(o=a(this,xi))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=a(this,xi);if(!t){p(this,xi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${a(this,Tn).id}`;const l=100,c=a(this,Tn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,Gn)),p(this,Gn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{p(this,Gn,setTimeout(()=>{p(this,Gn,null),a(this,xi).classList.add("show"),a(this,Tn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;a(this,Gn)&&(clearTimeout(a(this,Gn)),p(this,Gn,null)),(u=a(this,xi))==null||u.classList.remove("show")},{signal:c})}a(this,Ei)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=a(this,kt)),t.parentNode||e.append(t);const s=a(this,Tn).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},w(dn,xo,null),O(dn,"_l10n",null);let cy=dn;var jt,Ts,$a,Be,Pf,Va,qs,Wa,Ga,qa,Rf,ww;class Lg{constructor(e){w(this,Rf);w(this,jt,null);w(this,Ts,null);w(this,$a,!1);w(this,Be,null);w(this,Pf,null);w(this,Va,null);w(this,qs,null);w(this,Wa,null);w(this,Ga,!1);w(this,qa,null);p(this,Be,e)}renderForToolbar(){const e=p(this,Ts,document.createElement("button"));return e.className="comment",E(this,Rf,ww).call(this,e,!1)}renderForStandalone(){const e=p(this,jt,document.createElement("button"));e.className="annotationCommentButton";const t=a(this,Be).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(a(this,Be)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=a(this,Be).commentButtonColor;i&&(s.backgroundColor=i)}return E(this,Rf,ww).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=a(this,jt)??a(this,Ts))==null||e.focus()},0)}onUpdatedColor(){if(!a(this,jt))return;const e=a(this,Be).commentButtonColor;e&&(a(this,jt).style.backgroundColor=e),a(this,Be)._uiManager.updatePopupColor(a(this,Be))}get commentButtonWidth(){var e;return(((e=a(this,jt))==null?void 0:e.getBoundingClientRect().width)??0)/a(this,Be).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(a(this,qa))return a(this,qa);if(!a(this,jt))return null;const{x:e,y:t,height:s}=a(this,jt).getBoundingClientRect(),{x:i,y:r,width:o,height:l}=a(this,Be).parent.boundingClientRect;return[(e-i)/o,(t+s-r)/l]}set commentPopupPositionInLayer(e){p(this,qa,e)}hasDefaultPopupPosition(){return a(this,qa)===null}removeStandaloneCommentButton(){var e;(e=a(this,jt))==null||e.remove(),p(this,jt,null)}removeToolbarCommentButton(){var e;(e=a(this,Ts))==null||e.remove(),p(this,Ts,null)}setCommentButtonStates({selected:e,hasPopup:t}){a(this,jt)&&(a(this,jt).classList.toggle("selected",e),a(this,jt).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,i;if(t)[s,i]=t;else{[s,i]=a(this,Be).commentButtonPosition;const{width:h,height:d,x:f,y:g}=a(this,Be);s=f+s*h,i=g+i*d}const r=a(this,Be).parent.boundingClientRect,{x:o,y:l,width:c,height:u}=r;a(this,Be)._uiManager.editComment(a(this,Be),o+s*c,l+i*u,{...e,parentDimensions:r})}finish(){a(this,Ts)&&(a(this,Ts).focus({focusVisible:a(this,$a)}),p(this,$a,!1))}isDeleted(){return a(this,Ga)||a(this,qs)===""}isEmpty(){return a(this,qs)===null}hasBeenEdited(){return this.isDeleted()||a(this,qs)!==a(this,Pf)}serialize(){return this.data}get data(){return{text:a(this,qs),richText:a(this,Va),date:a(this,Wa),deleted:this.isDeleted()}}set data(e){if(e!==a(this,qs)&&p(this,Va,null),e===null){p(this,qs,""),p(this,Ga,!0);return}p(this,qs,e),p(this,Wa,new Date),p(this,Ga,!1)}setInitialText(e,t=null){p(this,Pf,e),this.data=e,p(this,Wa,null),p(this,Va,t)}shown(){}destroy(){var e,t;(e=a(this,Ts))==null||e.remove(),p(this,Ts,null),(t=a(this,jt))==null||t.remove(),p(this,jt,null),p(this,qs,""),p(this,Va,null),p(this,Wa,null),p(this,Be,null),p(this,$a,!1),p(this,Ga,!1)}}jt=new WeakMap,Ts=new WeakMap,$a=new WeakMap,Be=new WeakMap,Pf=new WeakMap,Va=new WeakMap,qs=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,qa=new WeakMap,Rf=new WeakSet,ww=function(e,t){if(!a(this,Be)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[a(this,Be)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=a(this,Be)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",ms,{signal:s}),t&&(e.addEventListener("focusin",r=>{a(this,Be)._focusEventsAllowed=!1,et(r)},{capture:!0,signal:s}),e.addEventListener("focusout",r=>{a(this,Be)._focusEventsAllowed=!0,et(r)},{capture:!0,signal:s})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),e===a(this,Ts)?this.edit():a(this,Be).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(p(this,$a,!0),i(r))},{signal:s}),e.addEventListener("pointerenter",()=>{a(this,Be).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{a(this,Be).toggleComment(!1,!1)},{signal:s}),e};var fu,Xa,Lf,Mf,Df,Nf,If,lr,Ya,cr,Ka,ur,wa,q_,X_,Y_;const JS=class JS{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){w(this,wa);w(this,fu);w(this,Xa,!1);w(this,Lf,null);w(this,Mf);w(this,Df);w(this,Nf);w(this,If);w(this,lr,null);w(this,Ya);w(this,cr,null);w(this,Ka);w(this,ur,null);p(this,fu,e),p(this,Lf,s),p(this,Mf,t),p(this,Df,i),p(this,Nf,r),p(this,If,o),p(this,Ka,new AbortController),p(this,Ya,AbortSignal.any([l,a(this,Ka).signal])),e.addEventListener("touchstart",E(this,wa,q_).bind(this),{passive:!1,signal:a(this,Ya)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ui.pixelRatio}destroy(){var e,t;(e=a(this,Ka))==null||e.abort(),p(this,Ka,null),(t=a(this,lr))==null||t.abort(),p(this,lr,null)}};fu=new WeakMap,Xa=new WeakMap,Lf=new WeakMap,Mf=new WeakMap,Df=new WeakMap,Nf=new WeakMap,If=new WeakMap,lr=new WeakMap,Ya=new WeakMap,cr=new WeakMap,Ka=new WeakMap,ur=new WeakMap,wa=new WeakSet,q_=function(e){var i,r,o;if((i=a(this,Mf))!=null&&i.call(this))return;if(e.touches.length===1){if(a(this,lr))return;const l=p(this,lr,new AbortController),c=AbortSignal.any([a(this,Ya),l.signal]),u=a(this,fu),h={capture:!0,signal:c,passive:!1},d=f=>{var g;f.pointerType==="touch"&&((g=a(this,lr))==null||g.abort(),p(this,lr,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(et(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!a(this,ur)){p(this,ur,new AbortController);const l=AbortSignal.any([a(this,Ya),a(this,ur).signal]),c=a(this,fu),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",E(this,wa,X_).bind(this),u);const h=E(this,wa,Y_).bind(this);c.addEventListener("touchend",h,u),c.addEventListener("touchcancel",h,u),u.capture=!0,c.addEventListener("pointerdown",et,u),c.addEventListener("pointermove",et,u),c.addEventListener("pointercancel",et,u),c.addEventListener("pointerup",et,u),(r=a(this,Df))==null||r.call(this)}if(et(e),e.touches.length!==2||(o=a(this,Lf))!=null&&o.call(this)){p(this,cr,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),p(this,cr,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},X_=function(e){var x;if(!a(this,cr)||e.touches.length!==2)return;et(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:o,screenY:l}=s,c=a(this,cr),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,g=d-u,m=f-h,v=o-i,A=l-r,y=Math.hypot(v,A)||1,b=Math.hypot(g,m)||1;if(!a(this,Xa)&&Math.abs(b-y)<=JS.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,Xa)){p(this,Xa,!0);return}const S=[(i+o)/2,(r+l)/2];(x=a(this,Nf))==null||x.call(this,S,b,y)},Y_=function(e){var t;e.touches.length>=2||(a(this,ur)&&(a(this,ur).abort(),p(this,ur,null),(t=a(this,If))==null||t.call(this)),a(this,cr)&&(et(e),p(this,cr,null),p(this,Xa,!1)))};let cf=JS;var Qa,Xs,Xe,De,hr,pu,Co,Of,zt,Ja,dr,Ti,_o,Ff,Za,qn,Bf,el,fr,ki,gu,mu,ks,tl,jf,xy,ee,bw,zf,Sw,rm,K_,Q_,Aw,om,Ew,J_,Z_,eT,xw,tT,Cw,nT,sT,iT,_w,fd;const re=class re{constructor(e){w(this,ee);w(this,Qa,null);w(this,Xs,null);w(this,Xe,null);w(this,De,null);w(this,hr,null);w(this,pu,!1);w(this,Co,null);w(this,Of,"");w(this,zt,null);w(this,Ja,null);w(this,dr,null);w(this,Ti,null);w(this,_o,null);w(this,Ff,"");w(this,Za,!1);w(this,qn,null);w(this,Bf,!1);w(this,el,!1);w(this,fr,!1);w(this,ki,null);w(this,gu,0);w(this,mu,0);w(this,ks,null);w(this,tl,null);O(this,"isSelected",!1);O(this,"_isCopy",!1);O(this,"_editToolbar",null);O(this,"_initialOptions",Object.create(null));O(this,"_initialData",null);O(this,"_isVisible",!0);O(this,"_uiManager",null);O(this,"_focusEventsAllowed",!0);w(this,jf,!1);w(this,xy,re._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=re.prototype._resizeWithKeyboard,t=va.TRANSLATE_SMALL,s=va.TRANSLATE_BIG;return le(this,"_resizerKeyboardManager",new ag([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],re.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return le(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new jD({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(re._l10n??(re._l10n=e),re._l10nResizer||(re._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),re._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);re._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Fe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,jf)}set _isDraggable(e){var t;p(this,jf,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,xy)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(E(this,ee,fd).call(this),(t=a(this,Ti))==null||t.remove(),p(this,Ti,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(a(this,Za)?p(this,Za,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}translate(e,t){E(this,ee,bw).call(this,this.parentDimensions,e,t)}translateInPage(e,t){a(this,qn)||p(this,qn,[this.x,this.y,this.width,this.height]),E(this,ee,bw).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){a(this,qn)||p(this,qn,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:h}=s;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!a(this,qn)&&(a(this,qn)[0]!==this.x||a(this,qn)[1]!==this.y)}get _hasBeenResized(){return!!a(this,qn)&&(a(this,qn)[2]!==this.width||a(this,qn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=re,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=s,c*=i,r*=s,o*=i,this._mustFixPosition)switch(e){case 0:r=on(r,0,s-l),o=on(o,0,i-c);break;case 90:r=on(r,0,s-c),o=on(o,l,i);break;case 180:r=on(r,l,s),o=on(o,c,i);break;case 270:r=on(r,c,s),o=on(o,0,i-l);break}this.x=r/=s,this.y=o/=i;const[u,h]=this.getBaseTranslation();r+=u,o+=h,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return E(s=re,zf,Sw).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return E(s=re,zf,Sw).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=a(this,Xe))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,el))return this._editToolbar;this._editToolbar=new cw(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=a(this,Xe))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,Xe)||(cy.initialize(re._l10n),p(this,Xe,new cy(this)),a(this,Qa)&&(a(this,Xe).data=a(this,Qa),p(this,Qa,null))),a(this,Xe)}get altTextData(){var e;return(e=a(this,Xe))==null?void 0:e.data}set altTextData(e){a(this,Xe)&&(a(this,Xe).data=e)}get guessedAltText(){var e;return(e=a(this,Xe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=a(this,Xe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=a(this,Xe))==null?void 0:t.serialize(e)}hasAltText(){return!!a(this,Xe)&&!a(this,Xe).isEmpty()}hasAltTextData(){var e;return((e=a(this,Xe))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=a(this,De))==null||e.focusButton()}addCommentButton(){return a(this,De)||p(this,De,new Lg(this))}addStandaloneCommentButton(){if(a(this,hr)){this._uiManager.isEditingMode()&&a(this,hr).classList.remove("hidden");return}this.hasComment&&(p(this,hr,a(this,De).renderForStandalone()),this.div.append(a(this,hr)))}removeStandaloneCommentButton(){a(this,De).removeStandaloneCommentButton(),p(this,hr,null)}hideStandaloneCommentButton(){var e;(e=a(this,hr))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:i}}=a(this,De);return{text:t,richText:e,date:s,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){a(this,De)||p(this,De,new Lg(this)),a(this,De).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(a(this,De)||p(this,De,new Lg(this)),a(this,De).setInitialText(e,s),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=a(this,De))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=a(this,De))==null?void 0:e.isDeleted()}get hasComment(){return!!a(this,De)&&!a(this,De).isEmpty()&&!a(this,De).isDeleted()}async editComment(e){a(this,De)||p(this,De,new Lg(this)),a(this,De).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){a(this,De).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,l=o+r+1,c=i-100,u=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){a(this,De).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=a(this,pu)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),E(this,ee,Cw).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),I_(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,tl)||p(this,tl,new cf({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,ee,J_).bind(this),onPinching:E(this,ee,Z_).bind(this),onPinchEnd:E(this,ee,eT).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Ft.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(p(this,Za,!0),this._isDraggable){E(this,ee,tT).call(this,e);return}E(this,ee,xw).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,ki)&&clearTimeout(a(this,ki)),p(this,ki,setTimeout(()=>{var e;p(this,ki,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=e/i,h=t/i,d=this.x*r,f=this.y*o,g=this.width*r,m=this.height*o;switch(s){case 0:return[d+u+l,o-f-h-m+c,d+u+g+l,o-f-h+c];case 90:return[d+h+l,o-f+u+c,d+h+m+l,o-f+u+g+c];case 180:return[d-u-g+l,o-f+h+c,d-u+l,o-f+h+m+c];case 270:return[d-h-m+l,o-f-u-g+c,d-h+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,o]=e,l=r-s,c=o-i;switch(this.rotation){case 0:return[s,t-o,l,c];case 90:return[s,t-i,c,l];case 180:return[r,t-i,l,c];case 270:return[r,t-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&re._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=a(this,De))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:i,deleted:r,richText:o},uid:l,pageIndex:c,creationDate:u,modificationDate:h}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:s||h,popupRef:!r,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),p(this,el,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),p(this,el,!1),!0):!1}isInEditMode(){return a(this,el)}shouldGetKeyboardEvents(){return a(this,fr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&i>0&&e<r&&s>0}rebuild(){E(this,ee,Cw).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,p(i,Qa,e.accessibilityData),i._isCopy=e.isCopy||!1;const[r,o]=i.pageDimensions,[l,c,u,h]=i.getRectInCurrentCoords(e.rect,o);return i.x=l/r,i.y=c/o,i.width=u/r,i.height=h/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=a(this,_o))==null||e.abort(),p(this,_o,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,ki)&&(clearTimeout(a(this,ki)),p(this,ki,null)),E(this,ee,fd).call(this),this.removeEditToolbar(),a(this,ks)){for(const s of a(this,ks).values())clearTimeout(s);p(this,ks,null)}this.parent=null,(t=a(this,tl))==null||t.destroy(),p(this,tl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,ee,K_).call(this),a(this,zt).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,i,r,o]=this.getPDFRect();return[re._round(s+(r-s)*e),re._round(i+(o-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return a(this,De).commentPopupPositionInLayer}set commentPopupPosition(e){a(this,De).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return a(this,De).hasDefaultPopupPosition()}get commentButtonWidth(){return a(this,De).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){a(this,De).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),p(this,dr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=a(this,zt).children;if(!a(this,Xs)){p(this,Xs,Array.from(t));const o=E(this,ee,nT).bind(this),l=E(this,ee,sT).bind(this),c=this._uiManager._signal;for(const u of a(this,Xs)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",E(this,ee,iT).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",re._l10nResizer[h])}}const s=a(this,Xs)[0];let i=0;for(const o of t){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,Xs).length/4);if(r!==i){if(r<i)for(let l=0;l<i-r;l++)a(this,zt).append(a(this,zt).firstChild);else if(r>i)for(let l=0;l<r-i;l++)a(this,zt).firstChild.before(a(this,zt).lastChild);let o=0;for(const l of t){const u=a(this,Xs)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",re._l10nResizer[u])}}E(this,ee,_w).call(this,0),p(this,fr,!0),a(this,zt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){a(this,fr)&&E(this,ee,Ew).call(this,a(this,Ff),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,ee,fd).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=a(this,Xe))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,i,r;this.isSelected&&(this.isSelected=!1,(e=a(this,zt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=a(this,Xe))==null||r.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,Bf)}set isEditing(e){p(this,Bf,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){a(this,ks)||p(this,ks,new Map);const{action:s}=e;let i=a(this,ks).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),a(this,ks).delete(s),a(this,ks).size===0&&p(this,ks,null)},re._telemetryTimeout),a(this,ks).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),p(this,pu,!1)}disable(){this.div&&(this.div.tabIndex=-1),p(this,pu,!0)}updateFakeAnnotationElement(e){if(!a(this,Ti)&&!this.deleted){p(this,Ti,e.addFakeAnnotation(this));return}if(this.deleted){a(this,Ti).remove(),p(this,Ti,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&a(this,Ti).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Qa=new WeakMap,Xs=new WeakMap,Xe=new WeakMap,De=new WeakMap,hr=new WeakMap,pu=new WeakMap,Co=new WeakMap,Of=new WeakMap,zt=new WeakMap,Ja=new WeakMap,dr=new WeakMap,Ti=new WeakMap,_o=new WeakMap,Ff=new WeakMap,Za=new WeakMap,qn=new WeakMap,Bf=new WeakMap,el=new WeakMap,fr=new WeakMap,ki=new WeakMap,gu=new WeakMap,mu=new WeakMap,ks=new WeakMap,tl=new WeakMap,jf=new WeakMap,xy=new WeakMap,ee=new WeakSet,bw=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},zf=new WeakSet,Sw=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},rm=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},K_=function(){if(a(this,zt))return;p(this,zt,document.createElement("div")),a(this,zt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");a(this,zt).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",E(this,ee,Q_).bind(this,s),{signal:t}),i.addEventListener("contextmenu",ms,{signal:t}),i.tabIndex=-1}this.div.prepend(a(this,zt))},Q_=function(e,t){var h;t.preventDefault();const{isMac:s}=Ft.platform;if(t.button!==0||t.ctrlKey&&s)return;(h=a(this,Xe))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,p(this,Ja,[t.screenX,t.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,ee,Ew).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",et,{passive:!1,signal:o}),window.addEventListener("contextmenu",ms,{signal:o}),p(this,dr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Xe))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=c,E(this,ee,om).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},Aw=function(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},om=function(){if(!a(this,dr))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=a(this,dr);p(this,dr,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===e&&o===t&&l===s&&c===i||this.addCommands({cmd:E(this,ee,Aw).bind(this,r,o,l,c),undo:E(this,ee,Aw).bind(this,e,t,s,i),mustExec:!0})},Ew=function(e,t){const[s,i]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,u=re.MIN_SIZE/s,h=re.MIN_SIZE/i,d=E(this,ee,rm).call(this,this.rotation),f=(B,j)=>[d[0]*B+d[2]*j,d[1]*B+d[3]*j],g=E(this,ee,rm).call(this,360-this.rotation),m=(B,j)=>[g[0]*B+g[2]*j,g[1]*B+g[3]*j];let v,A,y=!1,b=!1;switch(e){case"topLeft":y=!0,v=(B,j)=>[0,0],A=(B,j)=>[B,j];break;case"topMiddle":v=(B,j)=>[B/2,0],A=(B,j)=>[B/2,j];break;case"topRight":y=!0,v=(B,j)=>[B,0],A=(B,j)=>[0,j];break;case"middleRight":b=!0,v=(B,j)=>[B,j/2],A=(B,j)=>[0,j/2];break;case"bottomRight":y=!0,v=(B,j)=>[B,j],A=(B,j)=>[0,0];break;case"bottomMiddle":v=(B,j)=>[B/2,j],A=(B,j)=>[B/2,0];break;case"bottomLeft":y=!0,v=(B,j)=>[0,j],A=(B,j)=>[B,0];break;case"middleLeft":b=!0,v=(B,j)=>[0,j/2],A=(B,j)=>[B,j/2];break}const S=v(l,c),x=A(l,c);let _=f(...x);const T=re._round(r+_[0]),k=re._round(o+_[1]);let R=1,D=1,M,I;if(t.fromKeyboard)({deltaX:M,deltaY:I}=t);else{const{screenX:B,screenY:j}=t,[N,$]=a(this,Ja);[M,I]=this.screenToPageTranslation(B-N,j-$),a(this,Ja)[0]=B,a(this,Ja)[1]=j}if([M,I]=m(M/s,I/i),y){const B=Math.hypot(l,c);R=D=Math.max(Math.min(Math.hypot(x[0]-S[0]-M,x[1]-S[1]-I)/B,1/l,1/c),u/l,h/c)}else b?R=on(Math.abs(x[0]-S[0]-M),u,1)/l:D=on(Math.abs(x[1]-S[1]-I),h,1)/c;const H=re._round(l*R),W=re._round(c*D);_=f(...A(H,W));const z=T-_[0],Z=k-_[1];a(this,qn)||p(this,qn,[this.x,this.y,this.width,this.height]),this.width=H,this.height=W,this.x=z,this.y=Z,this.setDims(),this.fixAndSetPosition(),this._onResizing()},J_=function(){var e;p(this,dr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=a(this,Xe))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Z_=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const o=E(this,ee,rm).call(this,this.rotation),l=(T,k)=>[o[0]*T+o[2]*k,o[1]*T+o[3]*k],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,g=this.height,m=re.MIN_SIZE/c,v=re.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/g),m/f,v/g);const A=re._round(f*r),y=re._round(g*r);if(A===f&&y===g)return;a(this,qn)||p(this,qn,[h,d,f,g]);const b=l(f/2,g/2),S=re._round(h+b[0]),x=re._round(d+b[1]),_=l(A/2,y/2);this.x=S-_[0],this.y=x-_[1],this.width=A,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},eT=function(){var e;(e=a(this,Xe))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),E(this,ee,om).call(this)},xw=function(e){const{isMac:t}=Ft.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},tT=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},l=u=>{i.abort(),p(this,Co,null),p(this,Za,!1),this._uiManager.endDragSession()||E(this,ee,xw).call(this,u),s&&this._onStopDragging()};t&&(p(this,gu,e.clientX),p(this,mu,e.clientY),p(this,Co,e.pointerId),p(this,Of,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==a(this,Co)){et(u);return}const[g,m]=this.screenToPageTranslation(h-a(this,gu),d-a(this,mu));p(this,gu,h),p(this,mu,d),this._uiManager.dragSelectedEditors(g,m)},o),window.addEventListener("touchmove",et,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,Of)&&(a(this,tl)||u.isPrimary)&&l(u),et(u)},o));const c=u=>{if(!a(this,Co)||a(this,Co)===u.pointerId){l(u);return}et(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Cw=function(){if(a(this,_o)||!this.div)return;p(this,_o,new AbortController);const e=this._uiManager.combinedSignal(a(this,_o));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},nT=function(e){re._resizerKeyboardManager.exec(this,e)},sT=function(e){var t;a(this,fr)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==a(this,zt)&&E(this,ee,fd).call(this)},iT=function(e){p(this,Ff,a(this,fr)?e:"")},_w=function(e){if(a(this,Xs))for(const t of a(this,Xs))t.tabIndex=e},fd=function(){p(this,fr,!1),E(this,ee,_w).call(this,-1),E(this,ee,om).call(this)},w(re,zf),O(re,"_l10n",null),O(re,"_l10nResizer",null),O(re,"_borderLineWidth",-1),O(re,"_colorManager",new dw),O(re,"_zIndex",1),O(re,"_telemetryTimeout",1e3);let ze=re;class jD extends ze{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const q1=3285377520,ws=4294901760,mi=65535;class rT{constructor(e){this.h1=e?e&4294967295:q1,this.h2=e?e&4294967295:q1}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let v=0,A=e.length;v<A;v++){const y=e.charCodeAt(v);y<=255?t[s++]=y:(t[s++]=y>>>8,t[s++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(t.buffer,0,i);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,g=d&mi,m=f&mi;for(let v=0;v<i;v++)v&1?(l=o[v],l=l*d&ws|l*g&mi,l=l<<15|l>>>17,l=l*f&ws|l*m&mi,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[v],c=c*d&ws|c*g&mi,c=c<<15|c>>>17,c=c*f&ws|c*m&mi,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=t[i*4+2]<<16;case 2:l^=t[i*4+1]<<8;case 1:l^=t[i*4],l=l*d&ws|l*g&mi,l=l<<15|l>>>17,l=l*f&ws|l*m&mi,i&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ws|e*36045&mi,t=t*4283543511&ws|((t<<16|e>>>16)*2950163797&ws)>>>16,e^=t>>>1,e=e*444984403&ws|e*60499&mi,t=t*3301882366&ws|((t<<16|e>>>16)*3120437893&ws)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Tw=Object.freeze({map:null,hash:"",transfer:void 0});var nl,sl,pr,Ut,Cy,oT;class US{constructor(){w(this,Cy);w(this,nl,!1);w(this,sl,null);w(this,pr,null);w(this,Ut,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=a(this,Ut).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return a(this,Ut).get(e)}remove(e){const t=a(this,Ut).get(e);if(t!==void 0&&(t instanceof ze&&a(this,pr).delete(t.annotationElementId),a(this,Ut).delete(e),a(this,Ut).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of a(this,Ut).values())if(s instanceof ze)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=a(this,Ut).get(e);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(t))s[r]!==o&&(i=!0,s[r]=o);else i=!0,a(this,Ut).set(e,t);i&&E(this,Cy,oT).call(this),t instanceof ze&&((a(this,pr)||p(this,pr,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return a(this,Ut).has(e)}get size(){return a(this,Ut).size}resetModified(){a(this,nl)&&(p(this,nl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new aT(this)}get serializable(){if(a(this,Ut).size===0)return Tw;const e=new Map,t=new rT,s=[],i=Object.create(null);let r=!1;for(const[o,l]of a(this,Ut)){const c=l instanceof ze?l.serialize(!1,i):l;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Tw}get editorStats(){let e=null;const t=new Map;let s=0,i=0;for(const r of a(this,Ut).values()){if(!(r instanceof ze)){r.popup&&(r.popup.deleted?i+=1:s+=1);continue}r.isCommentDeleted?i+=1:r.hasEditedComment&&(s+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:l}=o;t.has(l)||t.set(l,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const c=e[l]||(e[l]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let d=c.get(u);d||(d=new Map,c.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}if((i>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:s}),!e)return null;for(const[r,o]of t)e[r]=o.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){p(this,sl,null)}updateEditor(e,t){var i;const s=(i=a(this,pr))==null?void 0:i.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=a(this,pr))==null?void 0:t.get(e))||null}get modifiedIds(){if(a(this,sl))return a(this,sl);const e=[];if(a(this,pr))for(const t of a(this,pr).values())t.serialize()&&e.push(t.annotationElementId);return p(this,sl,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return a(this,Ut).entries()}}nl=new WeakMap,sl=new WeakMap,pr=new WeakMap,Ut=new WeakMap,Cy=new WeakSet,oT=function(){a(this,nl)||(p(this,nl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Uf;class aT extends US{constructor(t){super();w(this,Uf);const{map:s,hash:i,transfer:r}=t.serializable,o=structuredClone(s,r?{transfer:r}:null);p(this,Uf,{map:o,hash:i,transfer:r})}get print(){Fe("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,Uf)}get modifiedIds(){return le(this,"modifiedIds",{ids:new Set,hash:""})}}Uf=new WeakMap;var yu;class zD{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){w(this,yu,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),a(this,yu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||a(this,yu).has(e.loadedName))){if(ge(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=e,l=new FontFace(i,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,yu).add(i),s==null||s(e)}catch{se(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Fe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw se(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return le(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return le(this,"isSyncFontLoadingSupported",mn||Ft.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(ge(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return le(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(x,_){return x.charCodeAt(_)<<24|x.charCodeAt(_+1)<<16|x.charCodeAt(_+2)<<8|x.charCodeAt(_+3)&255}function i(x,_,T,k){const R=x.substring(0,_),D=x.substring(_+T);return R+k+D}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(x,_){if(++u>30){se("Load test font never loaded."),_();return}if(c.font="30px "+x,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(h.bind(null,x,_))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const m=16,v=1482184792;let A=s(f,m);for(r=0,o=d.length-3;r<o;r+=4)A=A-v+s(d,r)|0;r<d.length&&(A=A-v+s(d+"XXX",r)|0),f=i(f,m,4,TD(A));const y=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(b);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const x of[e.loadedName,d]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=x,S.append(_)}this._document.body.append(S),h(d,()=>{S.remove(),t.complete()})}}yu=new WeakMap;var Te;class UD{constructor(e,t=null,s,i){w(this,Te);this.compiledGlyphs=Object.create(null),p(this,Te,e),this._inspectFont=t,s&&Object.assign(this,s),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${E_(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(o){se(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}get black(){return a(this,Te).black}get bold(){return a(this,Te).bold}get disableFontFace(){return a(this,Te).disableFontFace??!1}get fontExtraProperties(){return a(this,Te).fontExtraProperties??!1}get isInvalidPDFjsFont(){return a(this,Te).isInvalidPDFjsFont}get isType3Font(){return a(this,Te).isType3Font}get italic(){return a(this,Te).italic}get missingFile(){return a(this,Te).missingFile}get remeasure(){return a(this,Te).remeasure}get vertical(){return a(this,Te).vertical}get ascent(){return a(this,Te).ascent}get defaultWidth(){return a(this,Te).defaultWidth}get descent(){return a(this,Te).descent}get bbox(){return a(this,Te).bbox}get fontMatrix(){return a(this,Te).fontMatrix}get fallbackName(){return a(this,Te).fallbackName}get loadedName(){return a(this,Te).loadedName}get mimetype(){return a(this,Te).mimetype}get name(){return a(this,Te).name}get data(){return a(this,Te).data}clearData(){a(this,Te).clearData()}get cssFontInfo(){return a(this,Te).cssFontInfo}get systemFontInfo(){return a(this,Te).systemFontInfo}get defaultVMetrics(){return a(this,Te).defaultVMetrics}}Te=new WeakMap;function HD(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(mn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function $D(n){if(mn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return ig(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Mg(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const kw=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,VD=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",lT=LD.bind(null,kw,VD);var gr,_y;class WD{constructor(){w(this,gr,new Map);w(this,_y,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};a(this,_y).then(()=>{for(const[i]of a(this,gr))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){se("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,gr).set(t,i)}removeEventListener(e,t){const s=a(this,gr).get(t);s==null||s(),a(this,gr).delete(t)}terminate(){for(const[,e]of a(this,gr))e==null||e();a(this,gr).clear()}}gr=new WeakMap,_y=new WeakMap;const Dg={DATA:1,ERROR:2},gt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function X1(){}function Cn(n){if(n instanceof qr||n instanceof ay||n instanceof z1||n instanceof of||n instanceof Qv)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Fe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new qr(n.message);case"InvalidPDFException":return new ay(n.message);case"PasswordException":return new z1(n.message,n.code);case"ResponseException":return new of(n.message,n.status,n.missing);case"UnknownErrorException":return new Qv(n.message,n.details)}return new Qv(n.message,n.toString())}var vu,Bs,cT,uT,hT,am;class pd{constructor(e,t,s){w(this,Bs);w(this,vu,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",E(this,Bs,cT).bind(this),{signal:a(this,vu).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:r,data:t,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:gt.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{ge(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:gt.CANCEL,streamId:r,reason:Cn(u)}),h.promise}},s)}destroy(){var e;(e=a(this,vu))==null||e.abort(),p(this,vu,null)}}vu=new WeakMap,Bs=new WeakSet,cT=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){E(this,Bs,hT).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Dg.DATA)i.resolve(e.data);else if(e.callback===Dg.ERROR)i.reject(Cn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:Dg.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:Dg.ERROR,callbackId:e.callbackId,reason:Cn(o)})});return}if(e.streamId){E(this,Bs,uT).call(this,e);return}t(e.data)},uT=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:gt.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:gt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){ge(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:gt.ERROR,streamId:t,reason:Cn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:gt.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:gt.START_COMPLETE,streamId:t,reason:Cn(u)})})},hT=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case gt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Cn(e.reason));break;case gt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Cn(e.reason));break;case gt.PULL:if(!l){r.postMessage({sourceName:s,targetName:i,stream:gt.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||X1).then(function(){r.postMessage({sourceName:s,targetName:i,stream:gt.PULL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:gt.PULL_COMPLETE,streamId:t,reason:Cn(u)})});break;case gt.ENQUEUE:if(ge(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case gt.CLOSE:if(ge(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),E(this,Bs,am).call(this,o,t);break;case gt.ERROR:ge(o,"error should have stream controller"),o.controller.error(Cn(e.reason)),E(this,Bs,am).call(this,o,t);break;case gt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Cn(e.reason)),E(this,Bs,am).call(this,o,t);break;case gt.CANCEL:if(!l)break;const c=Cn(e.reason);Promise.try(l.onCancel||X1,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:gt.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:gt.CANCEL_COMPLETE,streamId:t,reason:Cn(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},am=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Hf;class dT{constructor({enableHWA:e=!1}){w(this,Hf,!1);p(this,Hf,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!a(this,Hf)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Fe("Abstract method `_createCanvas` called.")}}Hf=new WeakMap;class GD extends dT{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class fT{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class Y1 extends fT{async _fetch(e){const t=await Hh(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ig(t)}}class pT{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var il,wu,mr,yr,tn,rl,ol,V,Jt,gd,wc,lm,bc,gT,Pw,Sc,md,yd,Rw,vd;class qD extends pT{constructor({docId:t,ownerDocument:s=globalThis.document}){super();w(this,V);w(this,il);w(this,wu);w(this,mr);w(this,yr);w(this,tn);w(this,rl);w(this,ol,0);p(this,yr,t),p(this,tn,s)}addFilter(t){if(!t)return"none";let s=a(this,V,Jt).get(t);if(s)return s;const[i,r,o]=E(this,V,lm).call(this,t),l=t.length===1?i:`${i}${r}${o}`;if(s=a(this,V,Jt).get(l),s)return a(this,V,Jt).set(t,s),s;const c=`g_${a(this,yr)}_transfer_map_${bt(this,ol)._++}`,u=E(this,V,bc).call(this,c);a(this,V,Jt).set(t,u),a(this,V,Jt).set(l,u);const h=E(this,V,Sc).call(this,c);return E(this,V,yd).call(this,i,r,o,h),u}addHCMFilter(t,s){var m;const i=`${t}-${s}`,r="base";let o=a(this,V,gd).get(r);if((o==null?void 0:o.key)===i||(o?((m=o.filter)==null||m.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},a(this,V,gd).set(r,o)),!t||!s))return o.url;const l=E(this,V,vd).call(this,t);t=q.makeHexColor(...l);const c=E(this,V,vd).call(this,s);if(s=q.makeHexColor(...c),a(this,V,wc).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const u=new Array(256);for(let v=0;v<=255;v++){const A=v/255;u[v]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const h=u.join(","),d=`g_${a(this,yr)}_hcm_filter`,f=o.filter=E(this,V,Sc).call(this,d);E(this,V,yd).call(this,h,h,h,f),E(this,V,Pw).call(this,f);const g=(v,A)=>{const y=l[v]/255,b=c[v]/255,S=new Array(A+1);for(let x=0;x<=A;x++)S[x]=y+x/A*(b-y);return S.join(",")};return E(this,V,yd).call(this,g(0,5),g(1,5),g(2,5),f),o.url=E(this,V,bc).call(this,d),o.url}addAlphaFilter(t){let s=a(this,V,Jt).get(t);if(s)return s;const[i]=E(this,V,lm).call(this,[t]),r=`alpha_${i}`;if(s=a(this,V,Jt).get(r),s)return a(this,V,Jt).set(t,s),s;const o=`g_${a(this,yr)}_alpha_map_${bt(this,ol)._++}`,l=E(this,V,bc).call(this,o);a(this,V,Jt).set(t,l),a(this,V,Jt).set(r,l);const c=E(this,V,Sc).call(this,o);return E(this,V,Rw).call(this,i,c),l}addLuminosityFilter(t){let s=a(this,V,Jt).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=E(this,V,lm).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=a(this,V,Jt).get(r),s)return a(this,V,Jt).set(t,s),s;const o=`g_${a(this,yr)}_luminosity_map_${bt(this,ol)._++}`,l=E(this,V,bc).call(this,o);a(this,V,Jt).set(t,l),a(this,V,Jt).set(r,l);const c=E(this,V,Sc).call(this,o);return E(this,V,gT).call(this,c),t&&E(this,V,Rw).call(this,i,c),l}addHighlightHCMFilter(t,s,i,r,o){var b;const l=`${s}-${i}-${r}-${o}`;let c=a(this,V,gd).get(t);if((c==null?void 0:c.key)===l||(c?((b=c.filter)==null||b.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,V,gd).set(t,c)),!s||!i))return c.url;const[u,h]=[s,i].map(E(this,V,vd).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[g,m]=[r,o].map(E(this,V,vd).bind(this));f<d&&([d,f,g,m]=[f,d,m,g]),a(this,V,wc).style.color="";const v=(S,x,_)=>{const T=new Array(256),k=(f-d)/_,R=S/255,D=(x-S)/(255*_);let M=0;for(let I=0;I<=_;I++){const H=Math.round(d+I*k),W=R+I*D;for(let z=M;z<=H;z++)T[z]=W;M=H+1}for(let I=M;I<256;I++)T[I]=T[M-1];return T.join(",")},A=`g_${a(this,yr)}_hcm_${t}_filter`,y=c.filter=E(this,V,Sc).call(this,A);return E(this,V,Pw).call(this,y),E(this,V,yd).call(this,v(g[0],m[0],5),v(g[1],m[1],5),v(g[2],m[2],5),y),c.url=E(this,V,bc).call(this,A),c.url}destroy(t=!1){var s,i,r,o;t&&((s=a(this,rl))!=null&&s.size)||((i=a(this,mr))==null||i.parentNode.parentNode.remove(),p(this,mr,null),(r=a(this,wu))==null||r.clear(),p(this,wu,null),(o=a(this,rl))==null||o.clear(),p(this,rl,null),p(this,ol,0))}}il=new WeakMap,wu=new WeakMap,mr=new WeakMap,yr=new WeakMap,tn=new WeakMap,rl=new WeakMap,ol=new WeakMap,V=new WeakSet,Jt=function(){return a(this,wu)||p(this,wu,new Map)},gd=function(){return a(this,rl)||p(this,rl,new Map)},wc=function(){if(!a(this,mr)){const t=a(this,tn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=a(this,tn).createElementNS(Qi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),p(this,mr,a(this,tn).createElementNS(Qi,"defs")),t.append(i),i.append(a(this,mr)),a(this,tn).body.append(t)}return a(this,mr)},lm=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[s,i,r]=t,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,l[u]=i[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]},bc=function(t){if(a(this,il)===void 0){p(this,il,"");const s=a(this,tn).URL;s!==a(this,tn).baseURI&&(og(s)?se('#createUrl: ignore "data:"-URL for performance reasons.'):p(this,il,OS(s,"")))}return`url(${a(this,il)}#${t})`},gT=function(t){const s=a(this,tn).createElementNS(Qi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},Pw=function(t){const s=a(this,tn).createElementNS(Qi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Sc=function(t){const s=a(this,tn).createElementNS(Qi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),a(this,V,wc).append(s),s},md=function(t,s,i){const r=a(this,tn).createElementNS(Qi,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},yd=function(t,s,i,r){const o=a(this,tn).createElementNS(Qi,"feComponentTransfer");r.append(o),E(this,V,md).call(this,o,"feFuncR",t),E(this,V,md).call(this,o,"feFuncG",s),E(this,V,md).call(this,o,"feFuncB",i)},Rw=function(t,s){const i=a(this,tn).createElementNS(Qi,"feComponentTransfer");s.append(i),E(this,V,md).call(this,i,"feFuncA",t)},vd=function(t){return a(this,V,wc).style.color=t,$h(getComputedStyle(a(this,V,wc)).getPropertyValue("color"))};class mT{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class K1 extends mT{async _fetch(e){const t=await Hh(e,"arraybuffer");return new Uint8Array(t)}}class yT{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class Q1 extends yT{async _fetch(e){const t=await Hh(e,"arraybuffer");return new Uint8Array(t)}}mn&&se("Please use the `legacy` build in Node.js environments.");async function HS(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class XD extends pT{}class YD extends dT{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class KD extends fT{async _fetch(e){return HS(e)}}class QD extends mT{async _fetch(e){return HS(e)}}class JD extends yT{async _fetch(e){return HS(e)}}const mc="__forcedDependency",{floor:J1,ceil:Z1}=Math;function Ng(n,e,t,s,i,r){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],r)}const Lw=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var bu,To;class ZD{constructor(e,t){w(this,bu);w(this,To);p(this,bu,e),p(this,To,t)}get length(){return a(this,bu).length}isEmpty(e){return a(this,bu)[e]===Lw}minX(e){return a(this,To)[e*4+0]/256}minY(e){return a(this,To)[e*4+1]/256}maxX(e){return(a(this,To)[e*4+2]+1)/256}maxY(e){return(a(this,To)[e*4+3]+1)/256}}bu=new WeakMap,To=new WeakMap;const Ig=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var kn,Pn,al,Ys,ll,vr,Ce,ke,wr,Rn,$f,Su,cl,ul,br,nn,Pi,Vf,Mw;class eN{constructor(e,t,s=!1){w(this,Vf);w(this,kn,{__proto__:null});w(this,Pn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[mc]:[]});w(this,al,new Map);w(this,Ys,[]);w(this,ll,[]);w(this,vr,[[1,0,0,1,0,0]]);w(this,Ce,[-1/0,-1/0,1/0,1/0]);w(this,ke,new Float64Array([1/0,1/0,-1/0,-1/0]));w(this,wr,-1);w(this,Rn,new Set);w(this,$f,new Map);w(this,Su,new Map);w(this,cl);w(this,ul);w(this,br);w(this,nn);w(this,Pi);p(this,cl,e.width),p(this,ul,e.height),E(this,Vf,Mw).call(this,t),s&&p(this,Pi,new Map)}growOperationsCount(e){e>=a(this,nn).length&&E(this,Vf,Mw).call(this,e,a(this,nn))}save(e){return p(this,kn,{__proto__:a(this,kn)}),p(this,Pn,{__proto__:a(this,Pn),transform:{__proto__:a(this,Pn).transform},moveText:{__proto__:a(this,Pn).moveText},sameLineText:{__proto__:a(this,Pn).sameLineText},[mc]:{__proto__:a(this,Pn)[mc]}}),p(this,Ce,{__proto__:a(this,Ce)}),a(this,Ys).push(e),this}restore(e){var i;const t=Object.getPrototypeOf(a(this,kn));if(t===null)return this;p(this,kn,t),p(this,Pn,Object.getPrototypeOf(a(this,Pn))),p(this,Ce,Object.getPrototypeOf(a(this,Ce)));const s=a(this,Ys).pop();return s!==void 0&&((i=Ig(a(this,Pi),e))==null||i.dependencies.add(s),a(this,nn)[e]=a(this,nn)[s]),this}recordOpenMarker(e){return a(this,Ys).push(e),this}getOpenMarker(){return a(this,Ys).length===0?null:a(this,Ys).at(-1)}recordCloseMarker(e){var s;const t=a(this,Ys).pop();return t!==void 0&&((s=Ig(a(this,Pi),e))==null||s.dependencies.add(t),a(this,nn)[e]=a(this,nn)[t]),this}beginMarkedContent(e){return a(this,ll).push(e),this}endMarkedContent(e){var s;const t=a(this,ll).pop();return t!==void 0&&((s=Ig(a(this,Pi),e))==null||s.dependencies.add(t),a(this,nn)[e]=a(this,nn)[t]),this}pushBaseTransform(e){return a(this,vr).push(q.multiplyByDOMMatrix(a(this,vr).at(-1),e.getTransform())),this}popBaseTransform(){return a(this,vr).length>1&&a(this,vr).pop(),this}recordSimpleData(e,t){return a(this,kn)[e]=t,this}recordIncrementalData(e,t){return a(this,Pn)[e].push(t),this}resetIncrementalData(e,t){return a(this,Pn)[e].length=0,this}recordNamedData(e,t){return a(this,al).set(e,t),this}recordSimpleDataFromNamed(e,t,s){a(this,kn)[e]=a(this,al).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(mc,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in a(this,kn)&&this.recordFutureForcedDependency(t,a(this,kn)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of a(this,Rn))this.recordFutureForcedDependency(mc,e);return this}resetBBox(e){return a(this,wr)!==e&&(p(this,wr,e),a(this,ke)[0]=1/0,a(this,ke)[1]=1/0,a(this,ke)[2]=-1/0,a(this,ke)[3]=-1/0),this}recordClipBox(e,t,s,i,r,o){const l=q.multiplyByDOMMatrix(a(this,vr).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];q.axialAlignedBoundingBox([s,r,i,o],l,c);const u=q.intersect(a(this,Ce),c);return u?(a(this,Ce)[0]=u[0],a(this,Ce)[1]=u[1],a(this,Ce)[2]=u[2],a(this,Ce)[3]=u[3]):(a(this,Ce)[0]=a(this,Ce)[1]=1/0,a(this,Ce)[2]=a(this,Ce)[3]=-1/0),this}recordBBox(e,t,s,i,r,o){const l=a(this,Ce);if(l[0]===1/0)return this;const c=q.multiplyByDOMMatrix(a(this,vr).at(-1),t.getTransform());if(l[0]===-1/0)return q.axialAlignedBoundingBox([s,r,i,o],c,a(this,ke)),this;const u=[1/0,1/0,-1/0,-1/0];return q.axialAlignedBoundingBox([s,r,i,o],c,u),a(this,ke)[0]=Math.min(a(this,ke)[0],Math.max(u[0],l[0])),a(this,ke)[1]=Math.min(a(this,ke)[1],Math.max(u[1],l[1])),a(this,ke)[2]=Math.max(a(this,ke)[2],Math.min(u[2],l[2])),a(this,ke)[3]=Math.max(a(this,ke)[3],Math.min(u[3],l[3])),this}recordCharacterBBox(e,t,s,i=1,r=0,o=0,l){const c=s.bbox;let u,h;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&a(this,Su).get(s),u!==!1&&(h=[0,0,0,0],q.axialAlignedBoundingBox(c,s.fontMatrix,h),(i!==1||r!==0||o!==0)&&q.scaleMinMax([i,0,0,-i,r,o],h),u)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(e);const d=l();return c&&h&&u===void 0&&(u=h[0]<=r-d.actualBoundingBoxLeft&&h[2]>=r+d.actualBoundingBoxRight&&h[1]<=o-d.actualBoundingBoxAscent&&h[3]>=o+d.actualBoundingBoxDescent,a(this,Su).set(s,u),u)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return a(this,ke)[0]=Math.max(0,a(this,Ce)[0]),a(this,ke)[1]=Math.max(0,a(this,Ce)[1]),a(this,ke)[2]=Math.min(a(this,cl),a(this,Ce)[2]),a(this,ke)[3]=Math.min(a(this,ul),a(this,Ce)[3]),this}getSimpleIndex(e){return a(this,kn)[e]}recordDependencies(e,t){const s=a(this,Rn),i=a(this,kn),r=a(this,Pn);for(const o of t)o in a(this,kn)?s.add(i[o]):o in r&&r[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return a(this,al).has(t)&&a(this,Rn).add(a(this,al).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[mc]),a(this,Pi)){const s=Ig(a(this,Pi),e),{dependencies:i}=s;a(this,Rn).forEach(i.add,i),a(this,Ys).forEach(i.add,i),a(this,ll).forEach(i.add,i),i.delete(e),s.isRenderingOperation=!0}if(a(this,wr)===e){const s=J1(a(this,ke)[0]*256/a(this,cl)),i=J1(a(this,ke)[1]*256/a(this,ul)),r=Z1(a(this,ke)[2]*256/a(this,cl)),o=Z1(a(this,ke)[3]*256/a(this,ul));Ng(a(this,br),e,s,i,r,o);for(const l of a(this,Rn))l!==e&&Ng(a(this,br),l,s,i,r,o);for(const l of a(this,Ys))l!==e&&Ng(a(this,br),l,s,i,r,o);for(const l of a(this,ll))l!==e&&Ng(a(this,br),l,s,i,r,o);t||(a(this,Rn).clear(),p(this,wr,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(a(this,Rn));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of s)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return a(this,wr)===e&&(p(this,wr,-1),a(this,Ce)[0]=Math.max(a(this,Ce)[0],a(this,ke)[0]),a(this,Ce)[1]=Math.max(a(this,Ce)[1],a(this,ke)[1]),a(this,Ce)[2]=Math.min(a(this,Ce)[2],a(this,ke)[2]),a(this,Ce)[3]=Math.min(a(this,Ce)[3],a(this,ke)[3]),t||a(this,Rn).clear()),this}_takePendingDependencies(){const e=a(this,Rn);return p(this,Rn,new Set),e}_extractOperation(e){const t=a(this,$f).get(e);return a(this,$f).delete(e),t}_pushPendingDependencies(e){for(const t of e)a(this,Rn).add(t)}take(){return a(this,Su).clear(),new ZD(a(this,nn),a(this,br))}takeDebugMetadata(){return a(this,Pi)}}kn=new WeakMap,Pn=new WeakMap,al=new WeakMap,Ys=new WeakMap,ll=new WeakMap,vr=new WeakMap,Ce=new WeakMap,ke=new WeakMap,wr=new WeakMap,Rn=new WeakMap,$f=new WeakMap,Su=new WeakMap,cl=new WeakMap,ul=new WeakMap,br=new WeakMap,nn=new WeakMap,Pi=new WeakMap,Vf=new WeakSet,Mw=function(e,t){const s=new ArrayBuffer(e*4);p(this,br,new Uint8ClampedArray(s)),p(this,nn,new Uint32Array(s)),t&&t.length>0?(a(this,nn).set(t),a(this,nn).fill(Lw,t.length)):a(this,nn).fill(Lw)};var Ne,rt,Ks,Au,Eu;const ZS=class ZS{constructor(e,t,s){w(this,Ne);w(this,rt);w(this,Ks);w(this,Au,0);w(this,Eu,0);if(e instanceof ZS&&a(e,Ks)===!!s)return e;p(this,Ne,e),p(this,rt,t),p(this,Ks,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return bt(this,Eu)._++,a(this,Ne).save(a(this,rt)),this}restore(e){return a(this,Eu)>0&&(a(this,Ne).restore(a(this,rt)),bt(this,Eu)._--),this}recordOpenMarker(e){return bt(this,Au)._++,this}getOpenMarker(){return a(this,Au)>0?a(this,rt):a(this,Ne).getOpenMarker()}recordCloseMarker(e){return bt(this,Au)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return a(this,Ne).pushBaseTransform(e),this}popBaseTransform(){return a(this,Ne).popBaseTransform(),this}recordSimpleData(e,t){return a(this,Ne).recordSimpleData(e,a(this,rt)),this}recordIncrementalData(e,t){return a(this,Ne).recordIncrementalData(e,a(this,rt)),this}resetIncrementalData(e,t){return a(this,Ne).resetIncrementalData(e,a(this,rt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return a(this,Ne).recordSimpleDataFromNamed(e,t,a(this,rt)),this}recordFutureForcedDependency(e,t){return a(this,Ne).recordFutureForcedDependency(e,a(this,rt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return a(this,Ne).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,Ne).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return a(this,Ks)||a(this,Ne).resetBBox(a(this,rt)),this}recordClipBox(e,t,s,i,r,o){return a(this,Ks)||a(this,Ne).recordClipBox(a(this,rt),t,s,i,r,o),this}recordBBox(e,t,s,i,r,o){return a(this,Ks)||a(this,Ne).recordBBox(a(this,rt),t,s,i,r,o),this}recordCharacterBBox(e,t,s,i,r,o,l){return a(this,Ks)||a(this,Ne).recordCharacterBBox(a(this,rt),t,s,i,r,o,l),this}recordFullPageBBox(e){return a(this,Ks)||a(this,Ne).recordFullPageBBox(a(this,rt)),this}getSimpleIndex(e){return a(this,Ne).getSimpleIndex(e)}recordDependencies(e,t){return a(this,Ne).recordDependencies(a(this,rt),t),this}recordNamedDependency(e,t){return a(this,Ne).recordNamedDependency(a(this,rt),t),this}recordOperation(e){return a(this,Ne).recordOperation(a(this,rt),!0),this}recordShowTextOperation(e){return a(this,Ne).recordShowTextOperation(a(this,rt),!0),this}bboxToClipBoxDropOperation(e){return a(this,Ks)||a(this,Ne).bboxToClipBoxDropOperation(a(this,rt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ne=new WeakMap,rt=new WeakMap,Ks=new WeakMap,Au=new WeakMap,Eu=new WeakMap;let uy=ZS;const bs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Wt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Dw(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class $S{isModifyingCurrentTransform(){return!1}getPattern(){Fe("Abstract method `getPattern` called.")}}class tN extends $S{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===Wt.STROKE||i===Wt.FILL){const o=t.current.getClippedPathBoundingBox(i,Je(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),s=q.transform(s,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),Dw(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else Dw(e,this._bbox),r=this._createGradient(e);return r}}function e0(n,e,t,s,i,r,o,l){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=r,r=o,o=f),c[s+1]>c[i+1]&&(f=s,s=i,i=f,f=o,o=l,l=f),c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=r,r=o,o=f);const g=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,v=(c[s]+e.offsetX)*e.scaleX,A=(c[s+1]+e.offsetY)*e.scaleY,y=(c[i]+e.offsetX)*e.scaleX,b=(c[i+1]+e.offsetY)*e.scaleY;if(m>=b)return;const S=u[r],x=u[r+1],_=u[r+2],T=u[o],k=u[o+1],R=u[o+2],D=u[l],M=u[l+1],I=u[l+2],H=Math.round(m),W=Math.round(b);let z,Z,B,j,N,$,J,te;for(let Q=H;Q<=W;Q++){if(Q<A){const be=Q<m?0:(m-Q)/(m-A);z=g-(g-v)*be,Z=S-(S-T)*be,B=x-(x-k)*be,j=_-(_-R)*be}else{let be;Q>b?be=1:A===b?be=0:be=(A-Q)/(A-b),z=v-(v-y)*be,Z=T-(T-D)*be,B=k-(k-M)*be,j=R-(R-I)*be}let ie;Q<m?ie=0:Q>b?ie=1:ie=(m-Q)/(m-b),N=g-(g-y)*ie,$=S-(S-D)*ie,J=x-(x-M)*ie,te=_-(_-I)*ie;const we=Math.round(Math.min(z,N)),Ve=Math.round(Math.max(z,N));let We=d*Q+we*4;for(let be=we;be<=Ve;be++)ie=(z-be)/(z-N),ie<0?ie=0:ie>1&&(ie=1),h[We++]=Z-(Z-$)*ie|0,h[We++]=B-(B-J)*ie|0,h[We++]=j-(j-te)*ie|0,h[We++]=255}}function nN(n,e,t){const s=e.coords,i=e.colors;let r,o;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(s.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let d=0;d<u;d++,h++)e0(n,t,s[h],s[h+1],s[h+l],i[h],i[h+1],i[h+l]),e0(n,t,s[h+l+1],s[h+1],s[h+l],i[h+l+1],i[h+1],i[h+l])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)e0(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class sN extends $S{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),g=u/d,m=h/f,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/g,scaleY:1/m},A=d+2*2,y=f+2*2,b=s.getCanvas("mesh",A,y),S=b.context,x=S.createImageData(d,f);if(t){const T=x.data;for(let k=0,R=T.length;k<R;k+=4)T[k]=t[0],T[k+1]=t[1],T[k+2]=t[2],T[k+3]=255}for(const T of this._figures)nN(x,T,v);return S.putImageData(x,2,2),{canvas:b.canvas,offsetX:l-2*g,offsetY:c-2*m,scaleX:g,scaleY:m}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){Dw(e,this._bbox);const r=new Float32Array(2);if(i===Wt.SHADING)q.singularValueDecompose2dScale(Je(e),r);else if(this.matrix){q.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;q.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=l,r[1]*=c}else q.singularValueDecompose2dScale(t.baseTransform,r);const o=this._createMeshCanvas(r,i===Wt.SHADING?null:this._background,t.cachedCanvases);return i!==Wt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class iN extends $S{getPattern(){return"hotpink"}}function rN(n){switch(n[0]){case"RadialAxial":return new tN(n);case"Mesh":return new sN(n);case"Dummy":return new iN}throw new Error(`Unknown IR type: ${n[0]}`)}const eE={COLORED:1,UNCOLORED:2},Ty=class Ty{constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e,t){var $,J;const{bbox:s,operatorList:i,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),lv("TilingType: "+o);const d=s[0],f=s[1],g=s[2],m=s[3],v=g-d,A=m-f,y=new Float32Array(2);q.singularValueDecompose2dScale(this.matrix,y);const[b,S]=y;q.singularValueDecompose2dScale(this.baseTransform,y);const x=b*y[0],_=S*y[1];let T=v,k=A,R=!1,D=!1;const M=Math.ceil(u*x),I=Math.ceil(h*_),H=Math.ceil(v*x),W=Math.ceil(A*_);M>=H?T=u:R=!0,I>=W?k=h:D=!0;const z=this.getSizeAndScale(T,this.ctx.canvas.width,x),Z=this.getSizeAndScale(k,this.ctx.canvas.height,_),B=e.cachedCanvases.getCanvas("pattern",z.size,Z.size),j=B.context,N=c.createCanvasGraphics(j,t);if(N.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(N,r,l),j.translate(-z.scale*d,-Z.scale*f),N.transform(0,z.scale,0,0,Z.scale,0,0),j.save(),($=N.dependencyTracker)==null||$.save(),this.clipBbox(N,d,f,g,m),N.baseTransform=Je(N.ctx),N.executeOperatorList(i),N.endDrawing(),(J=N.dependencyTracker)==null||J.restore(),j.restore(),R||D){const te=B.canvas;R&&(T=u),D&&(k=h);const Q=this.getSizeAndScale(T,this.ctx.canvas.width,x),ie=this.getSizeAndScale(k,this.ctx.canvas.height,_),we=Q.size,Ve=ie.size,We=e.cachedCanvases.getCanvas("pattern-workaround",we,Ve),be=We.context,Zr=R?Math.floor(v/u):0,Hn=D?Math.floor(A/h):0;for(let Me=0;Me<=Zr;Me++)for(let $n=0;$n<=Hn;$n++)be.drawImage(te,we*Me,Ve*$n,we,Ve,0,0,we,Ve);return{canvas:We.canvas,scaleX:Q.scale,scaleY:ie.scale,offsetX:d,offsetY:f}}return{canvas:B.canvas,scaleX:z.scale,scaleY:Z.scale,offsetX:d,offsetY:f}}getSizeAndScale(e,t,s){const i=Math.max(Ty.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const o=i-t,l=r-s;e.ctx.rect(t,s,o,l),q.axialAlignedBoundingBox([t,s,i,r],Je(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case eE.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;i.fillStyle=r.fillColor=o,i.strokeStyle=r.strokeColor=l;break;case eE.UNCOLORED:i.fillStyle=i.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new _D(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i,r){let o=s;i!==Wt.SHADING&&(o=q.transform(o,t.baseTransform),this.matrix&&(o=q.transform(o,this.matrix)));const l=this.createPatternCanvas(t,r);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=e.createPattern(l.canvas,"repeat");return u.setTransform(c),u}};O(Ty,"MAX_PATTERN_SIZE",3e3);let Nw=Ty;function oN({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=Ft.isLittleEndian?4278190080:255,[c,u]=o?[r,l]:[l,r],h=s>>3,d=s&7,f=n.length;t=new Uint32Array(t.buffer);let g=0;for(let m=0;m<i;m++){for(const A=e+h;e<A;e++){const y=e<f?n[e]:255;t[g++]=y&128?u:c,t[g++]=y&64?u:c,t[g++]=y&32?u:c,t[g++]=y&16?u:c,t[g++]=y&8?u:c,t[g++]=y&4?u:c,t[g++]=y&2?u:c,t[g++]=y&1?u:c}if(d===0)continue;const v=e<f?n[e++]:255;for(let A=0;A<d;A++)t[g++]=v&1<<7-A?u:c}return{srcPos:e,destPos:g}}const tE=16,nE=100,aN=15,sE=10,Nn=16,t0=new DOMMatrix,us=new Float32Array(2),Fc=new Float32Array([1/0,1/0,-1/0,-1/0]);function lN(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,i,r,o,l){e.transform(t,s,i,r,o,l),this.__originalTransform(t,s,i,r,o,l)},n.setTransform=function(t,s,i,r,o,l){e.setTransform(t,s,i,r,o,l),this.__originalSetTransform(t,s,i,r,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,o,l){e.bezierCurveTo(t,s,i,r,o,l),this.__originalBezierCurveTo(t,s,i,r,o,l)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class cN{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Og(n,e,t,s,i,r,o,l,c,u){const[h,d,f,g,m,v]=Je(n);if(d===0&&f===0){const b=o*h+m,S=Math.round(b),x=l*g+v,_=Math.round(x),T=(o+c)*h+m,k=Math.abs(Math.round(T)-S)||1,R=(l+u)*g+v,D=Math.abs(Math.round(R)-_)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(g),S,_),n.drawImage(e,t,s,i,r,0,0,k,D),n.setTransform(h,d,f,g,m,v),[k,D]}if(h===0&&g===0){const b=l*f+m,S=Math.round(b),x=o*d+v,_=Math.round(x),T=(l+u)*f+m,k=Math.abs(Math.round(T)-S)||1,R=(o+c)*d+v,D=Math.abs(Math.round(R)-_)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,S,_),n.drawImage(e,t,s,i,r,0,0,D,k),n.setTransform(h,d,f,g,m,v),[D,k]}n.drawImage(e,t,s,i,r,o,l,c,u);const A=Math.hypot(h,d),y=Math.hypot(f,g);return[A*c,y*u]}class iE{constructor(e,t,s){O(this,"alphaIsShape",!1);O(this,"fontSize",0);O(this,"fontSizeScale",1);O(this,"textMatrix",null);O(this,"textMatrixScale",1);O(this,"fontMatrix",ow);O(this,"leading",0);O(this,"x",0);O(this,"y",0);O(this,"lineX",0);O(this,"lineY",0);O(this,"charSpacing",0);O(this,"wordSpacing",0);O(this,"textHScale",1);O(this,"textRenderingMode",Bt.FILL);O(this,"textRise",0);O(this,"fillColor","#000000");O(this,"strokeColor","#000000");O(this,"patternFill",!1);O(this,"patternStroke",!1);O(this,"fillAlpha",1);O(this,"strokeAlpha",1);O(this,"lineWidth",1);O(this,"activeSMask",null);O(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Fc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Wt.FILL,t=null){const s=this.minMax.slice();if(e===Wt.STROKE){t||Fe("Stroke bounding box must include transform."),q.singularValueDecompose2dScale(t,us);const i=us[0]*this.lineWidth/2,r=us[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const e=q.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Fc,0)}getClippedPathBoundingBox(e=Wt.FILL,t=null){return q.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function rE(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%Nn,r=(t-i)/Nn,o=i===0?r:r+1,l=n.createImageData(s,Nn);let c=0,u;const h=e.data,d=l.data;let f,g,m,v;if(e.kind===Bd.GRAYSCALE_1BPP){const A=h.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),b=y.length,S=s+7>>3,x=4294967295,_=Ft.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?Nn:i,u=0,g=0;g<m;g++){const T=A-c;let k=0;const R=T>S?s:T*8-7,D=R&-8;let M=0,I=0;for(;k<D;k+=8)I=h[c++],y[u++]=I&128?x:_,y[u++]=I&64?x:_,y[u++]=I&32?x:_,y[u++]=I&16?x:_,y[u++]=I&8?x:_,y[u++]=I&4?x:_,y[u++]=I&2?x:_,y[u++]=I&1?x:_;for(;k<R;k++)M===0&&(I=h[c++],M=128),y[u++]=I&M?x:_,M>>=1}for(;u<b;)y[u++]=0;n.putImageData(l,0,f*Nn)}}else if(e.kind===Bd.RGBA_32BPP){for(g=0,v=s*Nn*4,f=0;f<r;f++)d.set(h.subarray(c,c+v)),c+=v,n.putImageData(l,0,g),g+=Nn;f<o&&(v=s*i*4,d.set(h.subarray(c,c+v)),n.putImageData(l,0,g))}else if(e.kind===Bd.RGB_24BPP)for(m=Nn,v=s*m,f=0;f<o;f++){for(f>=r&&(m=i,v=s*m),u=0,g=v;g--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(l,0,f*Nn)}else throw new Error(`bad image kind: ${e.kind}`)}function oE(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%Nn,r=(t-i)/Nn,o=i===0?r:r+1,l=n.createImageData(s,Nn);let c=0;const u=e.data,h=l.data;for(let d=0;d<o;d++){const f=d<r?Nn:i;({srcPos:c}=oN({src:u,srcPos:c,dest:h,width:s,height:f,nonBlackColor:0})),n.putImageData(l,0,d*Nn)}}function ed(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Fg(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function aE(n,e){if(e)return!0;q.singularValueDecompose2dScale(n,us);const t=Math.fround(ui.pixelRatio*Xr.PDF_TO_CSS_UNITS);return us[0]<=t&&us[1]<=t}const uN=["butt","round","square"],hN=["miter","round","bevel"],dN={},lE={};var hi,Iw,Ow,Fw;const eA=class eA{constructor(e,t,s,i,r,{optionalContentConfig:o,markedContentStack:l=null},c,u,h){w(this,hi);this.ctx=e,this.current=new iE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new cN(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,s=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Je(this.compositeCtx))}this.ctx.save(),Fg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Je(this.ctx)}executeOperatorList(e,t,s,i,r){var y;const o=e.argsArray,l=e.fnArray;let c=t||0;const u=o.length;if(u===c)return c;const h=u-c>sE&&typeof s=="function",d=h?Date.now()+aN:0;let f=0;const g=this.commonObjs,m=this.objs;let v,A;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,s),c;if(!r||r(c))if(v=l[c],A=o[c]??null,v!==Lh.dependency)A===null?this[v](c):this[v](c,...A);else for(const b of A){(y=this.dependencyTracker)==null||y.recordNamedData(b,c);const S=b.startsWith("g_")?g:m;if(!S.has(b))return S.get(b,s),c}if(c++,c===u)return c;if(h&&++f>sE){if(Date.now()>d)return s(),c;f=0}}}endDrawing(){E(this,hi,Iw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),E(this,hi,Ow).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=s,c=i,u="prescale1",h,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,g=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),h=this.cachedCanvases.getCanvas(u,f,g),d=h.context,d.clearRect(0,0,f,g),d.drawImage(e,0,0,l,c,0,0,f,g),e=h.canvas,l=f,c=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,t){var M,I;const s=this.ctx,{width:i,height:r}=t,o=this.current.fillColor,l=this.current.patternFill,c=Je(s);let u,h,d,f;if((t.bitmap||t.data)&&t.count>1){const H=t.bitmap||t.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(H),u||(u=new Map,this._cachedBitmapsMap.set(H,u));const W=u.get(h);if(W&&!l){const z=Math.round(Math.min(c[0],c[2])+c[4]),Z=Math.round(Math.min(c[1],c[3])+c[5]);return(M=this.dependencyTracker)==null||M.recordDependencies(e,bs.transformAndFill),{canvas:W,offsetX:z,offsetY:Z}}d=W}d||(f=this.cachedCanvases.getCanvas("maskCanvas",i,r),oE(f.context,t));let g=q.transform(c,[1/i,0,0,-1/r,0,0]);g=q.transform(g,[1,0,0,1,0,-r]);const m=Fc.slice();q.axialAlignedBoundingBox([0,0,i,r],g,m);const[v,A,y,b]=m,S=Math.round(y-v)||1,x=Math.round(b-A)||1,_=this.cachedCanvases.getCanvas("fillCanvas",S,x),T=_.context,k=v,R=A;T.translate(-k,-R),T.transform(...g),d||(d=this._scaleImage(f.canvas,gi(T)),d=d.img,u&&l&&u.set(h,d)),T.imageSmoothingEnabled=aE(Je(T),t.interpolate),Og(T,d,0,0,d.width,d.height,0,0,i,r),T.globalCompositeOperation="source-in";const D=q.transform(gi(T),[1,0,0,1,-k,-R]);return T.fillStyle=l?o.getPattern(s,this,D,Wt.FILL,e):o,T.fillRect(0,0,i,r),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,_.canvas)),(I=this.dependencyTracker)==null||I.recordDependencies(e,bs.transformAndFill),{canvas:_.canvas,offsetX:Math.round(k),offsetY:Math.round(R)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=uN[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=hN[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,i,r,o,l;for(const[c,u]of t)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),ed(this.suspendedCtx,o),lN(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ed(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],o=i[1],l=i[2]-r,c=i[3]-o;l===0||c===0||(this.genericComposeSMask(t.context,s,l,c,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,o,l,c,u,h,d){let f=e.canvas,g=c-h,m=u-d;if(o)if(g<0||m<0||g+s>f.width||m+i>f.height){const A=this.cachedCanvases.getCanvas("maskExtension",s,i),y=A.context;y.drawImage(f,-g,-m),y.globalCompositeOperation="destination-atop",y.fillStyle=o,y.fillRect(0,0,s,i),y.globalCompositeOperation="source-over",f=A.canvas,g=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(g,m,s,i),e.clip(A),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(g,m,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(c,u,s,i),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(f,g,m,s,i,c,u,s,i),t.restore()}save(e){var s;this.inSMaskMode&&ed(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ed(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,r,o,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,s,i,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,i){let[r]=s;if(!i){r||(r=s[0]=new Path2D),this[t](e,r);return}if(this.dependencyTracker!==null){const o=t===Lh.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}if(!(r instanceof Path2D)){const o=s[0]=new Path2D;for(let l=0,c=r.length;l<c;)switch(r[l++]){case Rg.moveTo:o.moveTo(r[l++],r[l++]);break;case Rg.lineTo:o.lineTo(r[l++],r[l++]);break;case Rg.curveTo:o.bezierCurveTo(r[l++],r[l++],r[l++],r[l++],r[l++],r[l++]);break;case Rg.closePath:o.closePath();break;default:se(`Unrecognized drawing path operator: ${r[l-1]}`);break}r=o}q.axialAlignedBoundingBox(i,Je(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var o;const i=this.ctx,r=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=r.getPattern(i,this,gi(i),Wt.STROKE,e),l){const c=new Path2D;c.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,bs.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Wt.STROKE,Je(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var u,h,d;const i=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const f=r.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=r.getPattern(i,this,gi(i),Wt.FILL,e),f){const g=new Path2D;g.addPath(t,i.getTransform().invertSelf().multiplySelf(f)),t=g}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,bs.fill),l&&(i.restore(),(d=this.dependencyTracker)==null||d.restore(e)),s&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,bs.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=dN}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=lE}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,r=s.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:u,path:h}of t)h&&i.addPath(h,new DOMMatrix(o).preMultiplySelf(r).translate(l,c).scale(u,-u));s.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||ow,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&se("Invalid font matrix for font "+t),s<0?(s=-s,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const o=i.loadedName||"sans-serif",l=((f=i.systemFontInfo)==null?void 0:f.css)||`"${o}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const u=i.italic?"italic":"normal";let h=s;s<tE?h=tE:s>nE&&(h=nE),this.current.fontSizeScale=s/h,this.ctx.font=`${u} ${c} ${h}px ${l}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,i,r,o){var y,b,S,x;const l=this.ctx,c=this.current,u=c.font,h=c.textRenderingMode,d=c.fontSize/c.fontSizeScale,f=h&Bt.FILL_STROKE_MASK,g=!!(h&Bt.ADD_TO_PATH_FLAG),m=c.patternFill&&!u.missingFile,v=c.patternStroke&&!u.missingFile;let A;if((u.disableFontFace||g||m||v)&&!u.missingFile&&(A=u.getPathGenerator(this.commonObjs,t)),A&&(u.disableFontFace||m||v)){l.save(),l.translate(s,i),l.scale(d,-d),(y=this.dependencyTracker)==null||y.recordCharacterBBox(e,l,u);let _;if(f===Bt.FILL||f===Bt.FILL_STROKE)if(r){_=l.getTransform(),l.setTransform(...r);const T=E(this,hi,Fw).call(this,A,_,r);l.fill(T)}else l.fill(A);if(f===Bt.STROKE||f===Bt.FILL_STROKE)if(o){_||(_=l.getTransform()),l.setTransform(...o);const{a:T,b:k,c:R,d:D}=_,M=q.inverseTransform(o),I=q.transform([T,k,R,D,0,0],M);q.singularValueDecompose2dScale(I,us),l.lineWidth*=Math.max(us[0],us[1])/d,l.stroke(E(this,hi,Fw).call(this,A,_,o))}else l.lineWidth/=d,l.stroke(A);l.restore()}else(f===Bt.FILL||f===Bt.FILL_STROKE)&&(l.fillText(t,s,i),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,l,u,d,s,i,()=>l.measureText(t))),(f===Bt.STROKE||f===Bt.FILL_STROKE)&&(this.dependencyTracker&&((S=this.dependencyTracker)==null||S.recordCharacterBBox(e,l,u,d,s,i,()=>l.measureText(t)).recordDependencies(e,bs.stroke)),l.strokeText(t,s,i));g&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Je(l),x:s,y:i,fontSize:d,path:A}),(x=this.dependencyTracker)==null||x.recordCharacterBBox(e,l,u,d,s,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return le(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var R,D,M,I;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,bs.showText).resetBBox(e),this.current.textRenderingMode&Bt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,i=s.font;if(i.isType3Font){this.showType3Text(e,t),(R=this.dependencyTracker)==null||R.recordShowTextOperation(e);return}const r=s.fontSize;if(r===0){(D=this.dependencyTracker)==null||D.recordOperation(e);return}const o=this.ctx,l=s.fontSizeScale,c=s.charSpacing,u=s.wordSpacing,h=s.fontDirection,d=s.textHScale*h,f=t.length,g=i.vertical,m=g?1:-1,v=i.defaultVMetrics,A=r*s.fontMatrix[0],y=s.textRenderingMode===Bt.FILL&&!i.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),h>0?o.scale(d,-1):o.scale(d,1);let b,S;if(s.patternFill){o.save();const H=s.fillColor.getPattern(o,this,gi(o),Wt.FILL,e);b=Je(o),o.restore(),o.fillStyle=H}if(s.patternStroke){o.save();const H=s.strokeColor.getPattern(o,this,gi(o),Wt.STROKE,e);S=Je(o),o.restore(),o.strokeStyle=H}let x=s.lineWidth;const _=s.textMatrixScale;if(_===0||x===0){const H=s.textRenderingMode&Bt.FILL_STROKE_MASK;(H===Bt.STROKE||H===Bt.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=_;if(l!==1&&(o.scale(l,l),x/=l),o.lineWidth=x,i.isInvalidPDFjsFont){const H=[];let W=0;for(const Z of t)H.push(Z.unicode),W+=Z.width;const z=H.join("");if(o.fillText(z,0,0),this.dependencyTracker!==null){const Z=o.measureText(z);this.dependencyTracker.recordBBox(e,this.ctx,-Z.actualBoundingBoxLeft,Z.actualBoundingBoxRight,-Z.actualBoundingBoxAscent,Z.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=W*A*d,o.restore(),this.compose();return}let T=0,k;for(k=0;k<f;++k){const H=t[k];if(typeof H=="number"){T+=m*H*r/1e3;continue}let W=!1;const z=(H.isSpace?u:0)+c,Z=H.fontChar,B=H.accent;let j,N,$=H.width;if(g){const Q=H.vmetric||v,ie=-(H.vmetric?Q[1]:$*.5)*A,we=Q[2]*A;$=Q?-Q[0]:$,j=ie/l,N=(T+we)/l}else j=T/l,N=0;let J;if(i.remeasure&&$>0){J=o.measureText(Z);const Q=J.width*1e3/r*l;if($<Q&&this.isFontSubpixelAAEnabled){const ie=$/Q;W=!0,o.save(),o.scale(ie,1),j/=ie}else $!==Q&&(j+=($-Q)/2e3*r/l)}if(this.contentVisible&&(H.isInFont||i.missingFile)){if(y&&!B)o.fillText(Z,j,N),(M=this.dependencyTracker)==null||M.recordCharacterBBox(e,o,J?{bbox:null}:i,r/l,j,N,()=>J??o.measureText(Z));else if(this.paintChar(e,Z,j,N,b,S),B){const Q=j+r*B.offset.x/l,ie=N-r*B.offset.y/l;this.paintChar(e,B.fontChar,Q,ie,b,S)}}const te=g?$*A-z*h:$*A+z*h;T+=te,W&&o.restore()}g?s.y-=T:s.x+=T*d,o.restore(),this.compose(),(I=this.dependencyTracker)==null||I.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,i=this.current,r=i.font,o=i.fontSize,l=i.fontDirection,c=r.vertical?1:-1,u=i.charSpacing,h=i.wordSpacing,d=i.textHScale*l,f=i.fontMatrix||ow,g=t.length,m=i.textRenderingMode===Bt.INVISIBLE;let v,A,y,b;if(m||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),s.scale(d,l);const S=this.dependencyTracker;for(this.dependencyTracker=S?new uy(S,e):null,v=0;v<g;++v){if(A=t[v],typeof A=="number"){b=c*A*o/1e3,this.ctx.translate(b,0),i.x+=b*d;continue}const x=(A.isSpace?h:0)+u,_=r.charProcOperatorList[A.operatorListId];_?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...f),this.executeOperatorList(_),this.restore()):se(`Type3 character "${A.operatorListId}" is not available.`);const T=[A.width,0];q.applyTransform(T,f),y=T[0]*o+x,s.translate(y,0),i.x+=y*d}s.restore(),S&&(this.dependencyTracker=S)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,i,r,o,l){var u;const c=new Path2D;c.rect(i,r,o-i,l-r),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,o,r,l).recordClipBox(e,this.ctx,i,o,r,l),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const i=this.baseTransform||Je(this.ctx),r={createCanvasGraphics:(o,l)=>new eA(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new uy(this.dependencyTracker,l,!0):null)};s=new Nw(t,this.ctx,r,i)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=rN(this.getObject(e,t)),this.cachedPatterns.set(t,i)),s&&(i.matrix=s),i}shadingFill(e,t){var o;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const i=this._getPattern(e,t);s.fillStyle=i.getPattern(s,this,gi(s),Wt.SHADING,e);const r=gi(s);if(r){const{width:l,height:c}=s.canvas,u=Fc.slice();q.axialAlignedBoundingBox([0,0,l,c],r,u);const[h,d,f,g]=u;this.ctx.fillRect(h,d,f-h,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,bs.transform).recordDependencies(e,bs.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Fe("Should not call beginInlineImage")}beginImageData(){Fe("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Je(this.ctx),s)){q.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,o,l,c]=s,u=new Path2D;u.rect(r,o,l-r,c-o),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,r,l,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var S;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||lv("TODO: Support non-isolated groups."),t.knockout&&se("Knockout groups not supported.");const i=Je(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Fc.slice();q.axialAlignedBoundingBox(t.bbox,Je(s),r);const o=[0,0,s.canvas.width,s.canvas.height];r=q.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),u=Math.max(Math.ceil(r[2])-l,1),h=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,h]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,u,h),g=f.context;g.translate(-l,-c),g.transform(...i);let m=new Path2D;const[v,A,y,b]=t.bbox;if(m.rect(v,A,y-v,b-A),t.matrix){const x=new Path2D;x.addPath(m,new DOMMatrix(t.matrix)),m=x}g.clip(m),t.smask&&this.smaskStack.push({canvas:f.canvas,context:g,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(l,c),s.save()),ed(s,g),this.ctx=g,(S=this.dependencyTracker)==null||S.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var r;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Je(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=Fc.slice();q.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,s,i,r,o){if(E(this,hi,Iw).call(this),Fg(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const l=s[2]-s[0],c=s[3]-s[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=l,s[3]=c,q.singularValueDecompose2dScale(Je(this.ctx),us);const{viewportScale:u}=this,h=Math.ceil(l*this.outputScaleX*u),d=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(us[0],0,0,-us[1],0,c*us[1]),Fg(this.ctx)}else{Fg(this.ctx),this.endPath(e);const u=new Path2D;u.rect(s[0],s[1],l,c),this.ctx.clip(u)}}this.current=new iE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),E(this,hi,Ow).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const i=this.ctx,r=this._createMaskCanvas(e,t),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,i=0,r=0,o,l){var d,f,g;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=Je(c);c.transform(s,i,r,o,0,0);const h=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),(d=this.dependencyTracker)==null||d.resetBBox(e);for(let m=0,v=l.length;m<v;m+=2){const A=q.transform(u,[s,i,r,o,l[m],l[m+1]]);c.drawImage(h.canvas,A[4],A[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,A[4],A[4]+h.canvas.width,A[5],A[5]+h.canvas.height)}c.restore(),this.compose(),(g=this.dependencyTracker)==null||g.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,l,c;if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,bs.transformAndFill);for(const u of t){const{data:h,width:d,height:f,transform:g}=u,m=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=m.context;v.save();const A=this.getObject(e,h,u);oE(v,A),v.globalCompositeOperation="source-in",v.fillStyle=r?i.getPattern(v,this,gi(s),Wt.FILL,e):i,v.fillRect(0,0,d,f),v.restore(),s.save(),s.transform(...g),s.scale(1,-1),Og(s,m.canvas,0,0,d,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,s,0,d,0,f),s.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){se("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,i,r){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){se("Dependent image isn't ready yet");return}const l=o.width,c=o.height,u=[];for(let h=0,d=r.length;h<d;h+=2)u.push({transform:[s,0,0,i,r[h],r[h+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const s=t.width,i=t.height,r=this.ctx;this.save(e);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/s,-1/i);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",s,i).context;rE(d,t),l=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(l,gi(r));r.imageSmoothingEnabled=aE(Je(r),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,r,0,s,-i,0).recordDependencies(e,bs.imageXObject).recordOperation(e),Og(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,s,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var o,l,c;if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const u=t.width,h=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,h).context;rE(f,t),r=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of s)i.save(),i.transform(...u.transform),i.scale(1,-1),Og(i,r,u.x,u.y,u.w,u.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,i,0,1,-1,0),i.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,bs.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var o,l;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const r=this.ctx;this.pendingClip?(i||(this.pendingClip===lE?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Je(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let o,l;if(s===0&&i===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)o=l=1/c;else{const h=c*e;o=l=h<1?1/h:1}else if(e===0)o=1/c,l=1/u;else{const h=c*e,d=u*e;o=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(t*r-s*i),u=Math.hypot(t,s),h=Math.hypot(i,r);if(e===0)o=h/c,l=u/c;else{const d=e*c;o=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(i||1)*r,s.stroke(e);return}const l=s.getLineDash();t&&s.save(),s.scale(r,o),t0.a=1/r,t0.d=1/o;const c=new Path2D;if(c.addPath(e,t0),l.length>0){const u=Math.max(r,o);s.setLineDash(l.map(h=>h/u)),s.lineDashOffset/=u}s.lineWidth=i||1,s.stroke(c),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};hi=new WeakSet,Iw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ow=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Fw=function(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i};let Xc=eA;for(const n in Lh)Xc.prototype[n]!==void 0&&(Xc.prototype[Lh[n]]=Xc.prototype[n]);var xu,Cu,Wf,_u,cm;const jc=class jc{constructor(e){w(this,_u);w(this,xu);w(this,Cu);w(this,Wf);p(this,xu,e),p(this,Cu,new DataView(a(this,xu))),p(this,Wf,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let i=0;for(const u of jc.strings){const h=t.encode(e[u]);s[u]=h,i+=4+h.length}const r=new ArrayBuffer(i),o=new Uint8Array(r),l=new DataView(r);let c=0;for(const u of jc.strings){const h=s[u],d=h.length;l.setUint32(c,d),o.set(h,c+4),c+=4+d}return ge(c===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return E(this,_u,cm).call(this,0)}get fontWeight(){return E(this,_u,cm).call(this,1)}get italicAngle(){return E(this,_u,cm).call(this,2)}};xu=new WeakMap,Cu=new WeakMap,Wf=new WeakMap,_u=new WeakSet,cm=function(e){ge(e<jc.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=a(this,Cu).getUint32(t)+4;const s=a(this,Cu).getUint32(t);return a(this,Wf).decode(new Uint8Array(a(this,xu),t+4,s))},O(jc,"strings",["fontFamily","fontWeight","italicAngle"]);let hy=jc;var ko,Ri,hl,dl,wd;const zc=class zc{constructor(e){w(this,dl);w(this,ko);w(this,Ri);w(this,hl);p(this,ko,e),p(this,Ri,new DataView(a(this,ko))),p(this,hl,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let i=0;for(const f of zc.strings){const g=t.encode(e[f]);s[f]=g,i+=4+g.length}i+=4;let r,o,l=1+i;e.style&&(r=t.encode(e.style.style),o=t.encode(e.style.weight),l+=4+r.length+4+o.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;h.setUint8(d++,e.guessFallback?1:0),h.setUint32(d,0),d+=4,i=0;for(const f of zc.strings){const g=s[f],m=g.length;i+=4+m,h.setUint32(d,m),u.set(g,d+4),d+=4+m}return h.setUint32(d-i-4,i),e.style&&(h.setUint32(d,r.length),u.set(r,d+4),d+=4+r.length,h.setUint32(d,o.length),u.set(o,d+4),d+=4+o.length),ge(d<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(d)}get guessFallback(){return a(this,Ri).getUint8(0)!==0}get css(){return E(this,dl,wd).call(this,0)}get loadedName(){return E(this,dl,wd).call(this,1)}get baseFontName(){return E(this,dl,wd).call(this,2)}get src(){return E(this,dl,wd).call(this,3)}get style(){let e=1;e+=4+a(this,Ri).getUint32(e);const t=a(this,Ri).getUint32(e),s=a(this,hl).decode(new Uint8Array(a(this,ko),e+4,t));e+=4+t;const i=a(this,Ri).getUint32(e),r=a(this,hl).decode(new Uint8Array(a(this,ko),e+4,i));return{style:s,weight:r}}};ko=new WeakMap,Ri=new WeakMap,hl=new WeakMap,dl=new WeakSet,wd=function(e){ge(e<zc.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=a(this,Ri).getUint32(t)+4;const s=a(this,Ri).getUint32(t);return a(this,hl).decode(new Uint8Array(a(this,ko),t+4,s))},O(zc,"strings",["css","loadedName","baseFontName","src"]);let dy=zc;var Tu,ku,Pu,Ru,Xn,Li,Gf,Pe,lt,$s,um,bd;const oe=class oe{constructor({data:e,extra:t}){w(this,lt);w(this,Li);w(this,Gf);w(this,Pe);p(this,Li,e),p(this,Gf,new TextDecoder),p(this,Pe,new DataView(a(this,Li))),t&&Object.assign(this,t)}get black(){return E(this,lt,$s).call(this,0)}get bold(){return E(this,lt,$s).call(this,1)}get disableFontFace(){return E(this,lt,$s).call(this,2)}get fontExtraProperties(){return E(this,lt,$s).call(this,3)}get isInvalidPDFjsFont(){return E(this,lt,$s).call(this,4)}get isType3Font(){return E(this,lt,$s).call(this,5)}get italic(){return E(this,lt,$s).call(this,6)}get missingFile(){return E(this,lt,$s).call(this,7)}get remeasure(){return E(this,lt,$s).call(this,8)}get vertical(){return E(this,lt,$s).call(this,9)}get ascent(){return E(this,lt,um).call(this,0)}get defaultWidth(){return E(this,lt,um).call(this,1)}get descent(){return E(this,lt,um).call(this,2)}get bbox(){let e=a(oe,ku);if(a(this,Pe).getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<4;i++)s.push(a(this,Pe).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=a(oe,Pu);if(a(this,Pe).getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<6;i++)s.push(a(this,Pe).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=a(oe,Ru);if(a(this,Pe).getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<3;i++)s.push(a(this,Pe).getInt16(e,!0)),e+=2;return s}get fallbackName(){return E(this,lt,bd).call(this,0)}get loadedName(){return E(this,lt,bd).call(this,1)}get mimetype(){return E(this,lt,bd).call(this,2)}get name(){return E(this,lt,bd).call(this,3)}get data(){let e=a(oe,Xn);const t=a(this,Pe).getUint32(e);e+=4+t;const s=a(this,Pe).getUint32(e);e+=4+s;const i=a(this,Pe).getUint32(e);e+=4+i;const r=a(this,Pe).getUint32(e);if(r!==0)return new Uint8Array(a(this,Li),e+4,r)}clearData(){let e=a(oe,Xn);const t=a(this,Pe).getUint32(e);e+=4+t;const s=a(this,Pe).getUint32(e);e+=4+s;const i=a(this,Pe).getUint32(e);e+=4+i;const r=a(this,Pe).getUint32(e);new Uint8Array(a(this,Li),e+4,r).fill(0),a(this,Pe).setUint32(e,0)}get cssFontInfo(){let e=a(oe,Xn);const t=a(this,Pe).getUint32(e);e+=4+t;const s=a(this,Pe).getUint32(e);e+=4+s;const i=a(this,Pe).getUint32(e);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(a(this,Li),e+4,i)),new hy(r.buffer)}get systemFontInfo(){let e=a(oe,Xn);const t=a(this,Pe).getUint32(e);e+=4+t;const s=a(this,Pe).getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(a(this,Li),e+4,s)),new dy(i.buffer)}static write(e){const t=e.systemFontInfo?dy.write(e.systemFontInfo):null,s=e.cssFontInfo?hy.write(e.cssFontInfo):null,i=new TextEncoder,r={};let o=0;for(const v of oe.strings)r[v]=i.encode(e[v]),o+=4+r[v].length;const l=a(oe,Xn)+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;const f=oe.bools.length;let g=0,m=0;for(let v=0;v<f;v++){const A=e[oe.bools[v]];g|=(A===void 0?0:A?2:1)<<m,m+=2,(m===8||v===f-1)&&(h.setUint8(d++,g),g=0,m=0)}ge(d===a(oe,Tu),"FontInfo.write: Boolean properties offset mismatch");for(const v of oe.numbers)h.setFloat64(d,e[v]),d+=8;if(ge(d===a(oe,ku),"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(d++,4);for(const v of e.bbox)h.setInt16(d,v,!0),d+=2}else h.setUint8(d++,0),d+=2*4;if(ge(d===a(oe,Pu),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(d++,6);for(const v of e.fontMatrix)h.setFloat64(d,v,!0),d+=8}else h.setUint8(d++,0),d+=8*6;if(ge(d===a(oe,Ru),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(d++,1);for(const v of e.defaultVMetrics)h.setInt16(d,v,!0),d+=2}else h.setUint8(d++,0),d+=3*2;ge(d===a(oe,Xn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(a(oe,Xn),0),d+=4;for(const v of oe.strings){const A=r[v],y=A.length;h.setUint32(d,y),u.set(A,d+4),d+=4+y}if(h.setUint32(a(oe,Xn),d-a(oe,Xn)-4),!t)h.setUint32(d,0),d+=4;else{const v=t.byteLength;h.setUint32(d,v),ge(d+4+v<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),d+4),d+=4+v}if(!s)h.setUint32(d,0),d+=4;else{const v=s.byteLength;h.setUint32(d,v),ge(d+4+v<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(s),d+4),d+=4+v}return e.data===void 0?(h.setUint32(d,0),d+=4):(h.setUint32(d,e.data.length),u.set(e.data,d+4),d+=4+e.data.length),ge(d<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(d)}};Tu=new WeakMap,ku=new WeakMap,Pu=new WeakMap,Ru=new WeakMap,Xn=new WeakMap,Li=new WeakMap,Gf=new WeakMap,Pe=new WeakMap,lt=new WeakSet,$s=function(e){ge(e<oe.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,i=a(this,Pe).getUint8(t)>>s&3;return i===0?void 0:i===2},um=function(e){return ge(e<oe.numbers.length,"Invalid number index"),a(this,Pe).getFloat64(a(oe,Tu)+e*8)},bd=function(e){ge(e<oe.strings.length,"Invalid string index");let t=a(oe,Xn)+4;for(let r=0;r<e;r++)t+=a(this,Pe).getUint32(t)+4;const s=a(this,Pe).getUint32(t),i=new Uint8Array(s);return i.set(new Uint8Array(a(this,Li),t+4,s)),a(this,Gf).decode(i)},O(oe,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),O(oe,"numbers",["ascent","defaultWidth","descent"]),O(oe,"strings",["fallbackName","loadedName","mimetype","name"]),w(oe,Tu,Math.ceil(oe.bools.length*2/8)),w(oe,ku,a(oe,Tu)+oe.numbers.length*8),w(oe,Pu,a(oe,ku)+1+2*4),w(oe,Ru,a(oe,Pu)+1+8*6),w(oe,Xn,a(oe,Ru)+1+2*3);let Bw=oe;var qf,Xf;class Ns{static get workerPort(){return a(this,qf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");p(this,qf,e)}static get workerSrc(){return a(this,Xf)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");p(this,Xf,e)}}qf=new WeakMap,Xf=new WeakMap,w(Ns,qf,null),w(Ns,Xf,"");var Lu,Yf;class fN{constructor({parsedData:e,rawData:t}){w(this,Lu);w(this,Yf);p(this,Lu,e),p(this,Yf,t)}getRaw(){return a(this,Yf)}get(e){return a(this,Lu).get(e)??null}[Symbol.iterator](){return a(this,Lu).entries()}}Lu=new WeakMap,Yf=new WeakMap;const Ac=Symbol("INTERNAL");var Kf,Qf,Jf,Mu;class pN{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){w(this,Kf,!1);w(this,Qf,!1);w(this,Jf,!1);w(this,Mu,!0);p(this,Kf,!!(e&ls.DISPLAY)),p(this,Qf,!!(e&ls.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(a(this,Jf))return a(this,Mu);if(!a(this,Mu))return!1;const{print:e,view:t}=this.usage;return a(this,Kf)?(t==null?void 0:t.viewState)!=="OFF":a(this,Qf)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Ac&&Fe("Internal method `_setVisible` called."),p(this,Jf,s),p(this,Mu,t)}}Kf=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Mu=new WeakMap;var Po,Re,Du,Nu,Zf,jw;class gN{constructor(e,t=ls.DISPLAY){w(this,Zf);w(this,Po,null);w(this,Re,new Map);w(this,Du,null);w(this,Nu,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,p(this,Nu,e.order);for(const s of e.groups)a(this,Re).set(s.id,new pN(t,s));if(e.baseState==="OFF")for(const s of a(this,Re).values())s._setVisible(Ac,!1);for(const s of e.on)a(this,Re).get(s)._setVisible(Ac,!0);for(const s of e.off)a(this,Re).get(s)._setVisible(Ac,!1);p(this,Du,this.getHash())}}isVisible(e){if(a(this,Re).size===0)return!0;if(!e)return lv("Optional content group not defined."),!0;if(e.type==="OCG")return a(this,Re).has(e.id)?a(this,Re).get(e.id).visible:(se(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return E(this,Zf,jw).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!a(this,Re).has(t))return se(`Optional content group not found: ${t}`),!0;if(a(this,Re).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!a(this,Re).has(t))return se(`Optional content group not found: ${t}`),!0;if(!a(this,Re).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!a(this,Re).has(t))return se(`Optional content group not found: ${t}`),!0;if(!a(this,Re).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!a(this,Re).has(t))return se(`Optional content group not found: ${t}`),!0;if(a(this,Re).get(t).visible)return!1}return!0}return se(`Unknown optional content policy ${e.policy}.`),!0}return se(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=a(this,Re).get(e);if(!i){se(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const l of o)l!==e&&((r=a(this,Re).get(l))==null||r._setVisible(Ac,!1,!0));i._setVisible(Ac,!!t,!0),p(this,Po,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=a(this,Re).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}p(this,Po,null)}get hasInitialVisibility(){return a(this,Du)===null||this.getHash()===a(this,Du)}getOrder(){return a(this,Re).size?a(this,Nu)?a(this,Nu).slice():[...a(this,Re).keys()]:null}getGroup(e){return a(this,Re).get(e)||null}getHash(){if(a(this,Po)!==null)return a(this,Po);const e=new rT;for(const[t,s]of a(this,Re))e.update(`${t}:${s.visible}`);return p(this,Po,e.hexdigest())}[Symbol.iterator](){return a(this,Re).entries()}}Po=new WeakMap,Re=new WeakMap,Du=new WeakMap,Nu=new WeakMap,Zf=new WeakSet,jw=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let o;if(Array.isArray(r))o=E(this,Zf,jw).call(this,r);else if(a(this,Re).has(r))o=a(this,Re).get(r).visible;else return se(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class mN{constructor(e,{disableRange:t=!1,disableStream:s=!1}){ge(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});ge(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ge(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new yN(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new vN(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class yN{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=uv(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class vN{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function wN(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=l(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=o(n),t){const h=u(t);return r(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=l(t);return h=u(h),r(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),g=ig(d);d=f.decode(g),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function o(h){const d=[];let f;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(h))!==null;){let[,v,A,y]=f;if(v=parseInt(v,10),v in d){if(v===0)break;continue}d[v]=[A,y]}const m=[];for(let v=0;v<d.length&&v in d;++v){let[A,y]=d[v];y=l(y),A&&(y=unescape(y),v===0&&(y=c(y))),m.push(y)}return m.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const g=d[f].indexOf('"');g!==-1&&(d[f]=d[f].slice(0,g),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return i(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,g,m){if(g==="q"||g==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,A){return String.fromCharCode(parseInt(A,16))}),i(f,m);try{m=atob(m)}catch{}return i(f,m)})}return""}function vT(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function hv(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function wT({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function bT(n){const e=n.get("Content-Disposition");if(e){let t=wN(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(uv(t))return t}return null}function lg(n,e){return new of(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function ST(n){return n===200||n===206}function AT(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function ET(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(se(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class bN{constructor(e){O(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=vT(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ge(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new SN(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new AN(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class SN{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,AT(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=hv(r.url),!ST(r.status))throw lg(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=wT({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=bT(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new qr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ET(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class AN{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const o=i.url;fetch(o,AT(r,this._withCredentials,this._abortController)).then(l=>{const c=hv(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!ST(l.status))throw lg(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:ET(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const n0=200,s0=206;function EN(n){const e=n.response;return typeof e!="string"?e:ig(e).buffer}class xN{constructor({url:e,httpHeaders:t,withCredentials:s}){O(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=vT(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=s0):i.expectedStatus=n0,t.responseType="arraybuffer",ge(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||n0;if(!(r===n0&&s.expectedStatus===s0)&&r!==s.expectedStatus){s.onError(i.status);return}const l=EN(i);if(r===s0){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?s.onDone({begin:parseInt(u[1],10),chunk:l}):(se('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class CN{constructor(e){this._source=e,this._manager=new xN(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ge(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _N(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new TN(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class _N{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=hv(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=wT({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=bT(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=lg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class TN{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=hv((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=lg(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const kN=/^[a-z][a-z0-9\-+.]+:/i;function PN(n){if(kN.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class RN{constructor(e){this.source=e,this.url=PN(e.url),ge(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ge(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new LN(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new MN(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class LN{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=lg(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new qr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class MN{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const td=Symbol("INITIAL_DATA");var Yn,ep,zw;class xT{constructor(){w(this,ep);w(this,Yn,Object.create(null))}get(e,t=null){if(t){const i=E(this,ep,zw).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=a(this,Yn)[e];if(!s||s.data===td)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=a(this,Yn)[e];return!!t&&t.data!==td}delete(e){const t=a(this,Yn)[e];return!t||t.data===td?!1:(delete a(this,Yn)[e],!0)}resolve(e,t=null){const s=E(this,ep,zw).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in a(this,Yn)){const{data:s}=a(this,Yn)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}p(this,Yn,Object.create(null))}*[Symbol.iterator](){for(const e in a(this,Yn)){const{data:t}=a(this,Yn)[e];t!==td&&(yield[e,t])}}}Yn=new WeakMap,ep=new WeakSet,zw=function(e){var t;return(t=a(this,Yn))[e]||(t[e]={...Promise.withResolvers(),data:td})};const DN=1e5,cE=30;var AE,Ro,Ln,tp,np,fl,Sr,sp,ip,pl,Iu,Ou,Lo,Fu,rp,Bu,gl,op,ap,at,ju,ml,lp,Mo,zu,Kr,CT,_T,Uw,ps,hm,Hw,TT,kT;let uf=(at=class{constructor({textContentSource:e,container:t,viewport:s}){w(this,Kr);w(this,Ro,Promise.withResolvers());w(this,Ln,null);w(this,tp,!1);w(this,np,!!((AE=globalThis.FontInspector)!=null&&AE.enabled));w(this,fl,null);w(this,Sr,null);w(this,sp,0);w(this,ip,0);w(this,pl,null);w(this,Iu,null);w(this,Ou,0);w(this,Lo,0);w(this,Fu,Object.create(null));w(this,rp,[]);w(this,Bu,null);w(this,gl,[]);w(this,op,new WeakMap);w(this,ap,null);var c;if(e instanceof ReadableStream)p(this,Bu,e);else if(typeof e=="object")p(this,Bu,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');p(this,Ln,p(this,Iu,t)),p(this,Lo,s.scale*ui.pixelRatio),p(this,Ou,s.rotation),p(this,Sr,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:l}=s.rawDims;p(this,ap,[1,0,0,-1,-o,l+r]),p(this,ip,i),p(this,sp,r),E(c=at,ps,TT).call(c),ya(t,s),a(this,Ro).promise.finally(()=>{a(at,zu).delete(this),p(this,Sr,null),p(this,Fu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ft.platform;return le(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{a(this,pl).read().then(({value:t,done:s})=>{if(s){a(this,Ro).resolve();return}a(this,fl)??p(this,fl,t.lang),Object.assign(a(this,Fu),t.styles),E(this,Kr,CT).call(this,t.items),e()},a(this,Ro).reject)};return p(this,pl,a(this,Bu).getReader()),a(at,zu).add(this),e(),a(this,Ro).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*ui.pixelRatio,i=e.rotation;if(i!==a(this,Ou)&&(t==null||t(),p(this,Ou,i),ya(a(this,Iu),{rotation:i})),s!==a(this,Lo)){t==null||t(),p(this,Lo,s);const o={div:null,properties:null,ctx:E(r=at,ps,hm).call(r,a(this,fl))};for(const l of a(this,gl))o.properties=a(this,op).get(l),o.div=l,E(this,Kr,Uw).call(this,o)}}cancel(){var t;const e=new qr("TextLayer task cancelled.");(t=a(this,pl))==null||t.cancel(e).catch(()=>{}),p(this,pl,null),a(this,Ro).reject(e)}get textDivs(){return a(this,gl)}get textContentItemsStr(){return a(this,rp)}static cleanup(){if(!(a(this,zu).size>0)){a(this,ju).clear();for(const{canvas:e}of a(this,ml).values())e.remove();a(this,ml).clear()}}},Ro=new WeakMap,Ln=new WeakMap,tp=new WeakMap,np=new WeakMap,fl=new WeakMap,Sr=new WeakMap,sp=new WeakMap,ip=new WeakMap,pl=new WeakMap,Iu=new WeakMap,Ou=new WeakMap,Lo=new WeakMap,Fu=new WeakMap,rp=new WeakMap,Bu=new WeakMap,gl=new WeakMap,op=new WeakMap,ap=new WeakMap,ju=new WeakMap,ml=new WeakMap,lp=new WeakMap,Mo=new WeakMap,zu=new WeakMap,Kr=new WeakSet,CT=function(e){var i,r;if(a(this,tp))return;(r=a(this,Sr)).ctx??(r.ctx=E(i=at,ps,hm).call(i,a(this,fl)));const t=a(this,gl),s=a(this,rp);for(const o of e){if(t.length>DN){se("Ignoring additional textDivs for performance reasons."),p(this,tp,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,Ln);p(this,Ln,document.createElement("span")),a(this,Ln).classList.add("markedContent"),o.id&&a(this,Ln).setAttribute("id",`${o.id}`),l.append(a(this,Ln))}else o.type==="endMarkedContent"&&p(this,Ln,a(this,Ln).parentNode);continue}s.push(o.str),E(this,Kr,_T).call(this,o)}},_T=function(e){var v;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};a(this,gl).push(t);const i=q.transform(a(this,ap),e.transform);let r=Math.atan2(i[1],i[0]);const o=a(this,Fu)[e.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,np)&&o.fontSubstitution||o.fontFamily;l=at.fontFamilyMap.get(l)||l;const c=Math.hypot(i[2],i[3]),u=c*E(v=at,ps,kT).call(v,l,o,a(this,fl));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--total-scale-factor) *",g=t.style;a(this,Ln)===a(this,Iu)?(g.left=`${(100*h/a(this,ip)).toFixed(2)}%`,g.top=`${(100*d/a(this,sp)).toFixed(2)}%`):(g.left=`${f}${h.toFixed(2)}px)`,g.top=`${f}${d.toFixed(2)}px)`),g.fontSize=`${f}${(a(at,Mo)*c).toFixed(2)}px)`,g.fontFamily=l,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,a(this,np)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const A=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);A!==y&&Math.max(A,y)/Math.min(A,y)>1.5&&(m=!0)}if(m&&(s.canvasWidth=o.vertical?e.height:e.width),a(this,op).set(t,s),a(this,Sr).div=t,a(this,Sr).properties=s,E(this,Kr,Uw).call(this,a(this,Sr)),s.hasText&&a(this,Ln).append(t),s.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),a(this,Ln).append(A)}},Uw=function(e){var l;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let o="";if(a(at,Mo)>1&&(o=`scale(${1/a(at,Mo)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=s;E(l=at,ps,Hw).call(l,i,h*a(this,Lo),c);const{width:d}=i.measureText(t.textContent);d>0&&(o=`scaleX(${u*a(this,Lo)/d}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},ps=new WeakSet,hm=function(e=null){let t=a(this,ml).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,ml).set(e,t),a(this,lp).set(t,{size:0,family:""})}return t},Hw=function(e,t,s){const i=a(this,lp).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},TT=function(){if(a(this,Mo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),p(this,Mo,e.getBoundingClientRect().height),e.remove()},kT=function(e,t,s){const i=a(this,ju).get(e);if(i)return i;const r=E(this,ps,hm).call(this,s);r.canvas.width=r.canvas.height=cE,E(this,ps,Hw).call(this,r,cE,e);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return l?u=l/(l+c):(Ft.platform.isFirefox&&se("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),a(this,ju).set(e,u),u},w(at,ps),w(at,ju,new Map),w(at,ml,new Map),w(at,lp,new WeakMap),w(at,Mo,null),w(at,zu,new Set),at);const NN=100;function VS(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new $w,{docId:t}=e,s=n.url?HD(n.url):null,i=n.data?$D(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof WS?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof Mh?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!og(n.docBaseUrl)?n.docBaseUrl:null,g=Mg(n.cMapUrl),m=n.cMapPacked!==!1,v=n.CMapReaderFactory||(mn?KD:Y1),A=Mg(n.iccUrl),y=Mg(n.standardFontDataUrl),b=n.StandardFontDataFactory||(mn?QD:K1),S=Mg(n.wasmUrl),x=n.WasmFactory||(mn?JD:Q1),_=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,R=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!mn,D=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!mn&&(Ft.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I=typeof n.disableFontFace=="boolean"?n.disableFontFace:mn,H=n.fontExtraProperties===!0,W=n.enableXfa===!0,z=n.ownerDocument||globalThis.document,Z=n.disableRange===!0,B=n.disableStream===!0,j=n.disableAutoFetch===!0,N=n.pdfBug===!0,$=n.CanvasFactory||(mn?YD:GD),J=n.FilterFactory||(mn?XD:qD),te=n.enableHWA===!0,Q=n.useWasm!==!1,ie=c?c.length:n.length??NaN,we=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!mn&&!I,Ve=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(v===Y1&&b===K1&&x===Q1&&g&&y&&S&&ld(g,document.baseURI)&&ld(y,document.baseURI)&&ld(S,document.baseURI)),We=null;ED(d);const be={canvasFactory:new $({ownerDocument:z,enableHWA:te}),filterFactory:new J({docId:t,ownerDocument:z}),cMapReaderFactory:Ve?null:new v({baseUrl:g,isCompressed:m}),standardFontDataFactory:Ve?null:new b({baseUrl:y}),wasmFactory:Ve?null:new x({baseUrl:S})};h||(h=Mh.create({verbosity:d,port:Ns.workerPort}),e._worker=h);const Zr={docId:t,apiVersion:"5.4.296",data:i,password:l,disableAutoFetch:j,rangeChunkSize:u,length:ie,docBaseUrl:f,enableXfa:W,evaluatorOptions:{maxImageSize:T,disableFontFace:I,ignoreErrors:_,isEvalSupported:k,isOffscreenCanvasSupported:R,isImageDecoderSupported:D,canvasMaxAreaInBytes:M,fontExtraProperties:H,useSystemFonts:we,useWasm:Q,useWorkerFetch:Ve,cMapUrl:g,iccUrl:A,standardFontDataUrl:y,wasmUrl:S}},Hn={ownerDocument:z,pdfBug:N,styleElement:We,loadingParams:{disableAutoFetch:j,enableXfa:W}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Me=h.messageHandler.sendWithPromise("GetDocRequest",Zr,i?[i.buffer]:null);let $n;if(c)$n=new mN(c,{disableRange:Z,disableStream:B});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Ki=ld(s)?bN:mn?RN:CN;$n=new Ki({url:s,length:ie,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:Z,disableStream:B})}return Me.then(Ki=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Se=new pd(t,Ki,h.port),Ge=new FN(Se,e,$n,Hn,be,te);e._transport=Ge,Se.send("Ready",null)})}).catch(e._capability.reject),e}var ky;const Py=class Py{constructor(){O(this,"_capability",Promise.withResolvers());O(this,"_transport",null);O(this,"_worker",null);O(this,"docId",`d${bt(Py,ky)._++}`);O(this,"destroyed",!1);O(this,"onPassword",null);O(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};ky=new WeakMap,w(Py,ky,0);let $w=Py;var yl,cp,up,hp,dp,EE;let WS=(EE=class{constructor(e,t,s=!1,i=null){w(this,yl,Promise.withResolvers());w(this,cp,[]);w(this,up,[]);w(this,hp,[]);w(this,dp,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){a(this,dp).push(e)}addProgressListener(e){a(this,hp).push(e)}addProgressiveReadListener(e){a(this,up).push(e)}addProgressiveDoneListener(e){a(this,cp).push(e)}onDataRange(e,t){for(const s of a(this,dp))s(e,t)}onDataProgress(e,t){a(this,yl).promise.then(()=>{for(const s of a(this,hp))s(e,t)})}onDataProgressiveRead(e){a(this,yl).promise.then(()=>{for(const t of a(this,up))t(e)})}onDataProgressiveDone(){a(this,yl).promise.then(()=>{for(const e of a(this,cp))e()})}transportReady(){a(this,yl).resolve()}requestDataRange(e,t){Fe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},yl=new WeakMap,cp=new WeakMap,up=new WeakMap,hp=new WeakMap,dp=new WeakMap,EE);class IN{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return le(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ar,vl,Sd;class ON{constructor(e,t,s,i=!1){w(this,vl);w(this,Ar,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new H1:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new xT,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new rg({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return le(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:i="display",annotationMode:r=$i.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:g=!1,operationsFilter:m=null}){var D,M,I;(D=this._stats)==null||D.time("Overall");const v=this._transport.getRenderingIntent(i,r,d,f),{renderingIntent:A,cacheKey:y}=v;p(this,Ar,!1),c||(c=this._transport.getOptionalContentConfig(A));let b=this._intentStates.get(y);b||(b=Object.create(null),this._intentStates.set(y,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const S=!!(A&ls.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(M=this._stats)==null||M.time("Page Request"),this._pumpOperatorList(v));const x=!!(this._pdfBug&&((I=globalThis.StepperManager)!=null&&I.enabled)),_=!this.recordedBBoxes&&(g||x),T=H=>{var W,z;if(b.renderTasks.delete(k),_){const Z=(W=k.gfx)==null?void 0:W.dependencyTracker.take();Z&&(k.stepper&&k.stepper.setOperatorBBoxes(Z,k.gfx.dependencyTracker.takeDebugMetadata()),g&&(this.recordedBBoxes=Z))}S&&p(this,Ar,!0),E(this,vl,Sd).call(this),H?(k.capability.reject(H),this._abortOperatorList({intentState:b,reason:H instanceof Error?H:new Error(H)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(z=globalThis.Stats)!=null&&z.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new Vw({callback:T,params:{canvas:t,canvasContext:e,dependencyTracker:_?new eN(t,b.operatorList.length,x):null,viewport:s,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:m});(b.renderTasks||(b.renderTasks=new Set)).add(k);const R=k.task;return Promise.all([b.displayReadyCapability.promise,c]).then(([H,W])=>{var z;if(this.destroyed){T();return}if((z=this._stats)==null||z.time("Rendering"),!(W.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:H,optionalContentConfig:W}),k.operatorListChanged()}).catch(T),R}getOperatorList({intent:e="display",annotationMode:t=$i.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,s,i,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>af.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){o.read().then(function({value:c,done:u}){if(u){s(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},i)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),p(this,Ar,!1),Promise.all(e)}cleanup(e=!1){p(this,Ar,!0);const t=E(this,vl,Sd).call(this);return e&&t&&this._stats&&(this._stats=new H1),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&E(this,vl,Sd).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();E(this,vl,Sd).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof cv){let i=NN;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new qr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Ar=new WeakMap,vl=new WeakSet,Sd=function(){if(!a(this,Ar)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),p(this,Ar,!1),!0};var Do,Qs,Er,wl,Ry,bl,Sl,wn,dm,PT,RT,Ad,Uu,fm;const qe=class qe{constructor({name:e=null,port:t=null,verbosity:s=xD()}={}){w(this,wn);w(this,Do,Promise.withResolvers());w(this,Qs,null);w(this,Er,null);w(this,wl,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(a(qe,Sl).has(t))throw new Error("Cannot use more than one PDFWorker per port.");a(qe,Sl).set(t,this),E(this,wn,PT).call(this,t)}else E(this,wn,RT).call(this)}get promise(){return a(this,Do).promise}get port(){return a(this,Er)}get messageHandler(){return a(this,Qs)}destroy(){var e,t;this.destroyed=!0,(e=a(this,wl))==null||e.terminate(),p(this,wl,null),a(qe,Sl).delete(a(this,Er)),p(this,Er,null),(t=a(this,Qs))==null||t.destroy(),p(this,Qs,null)}static create(e){const t=a(this,Sl).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new qe(e)}static get workerSrc(){if(Ns.workerSrc)return Ns.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return le(this,"_setupFakeWorkerGlobal",(async()=>a(this,Uu,fm)?a(this,Uu,fm):(await import(this.workerSrc)).WorkerMessageHandler)())}};Do=new WeakMap,Qs=new WeakMap,Er=new WeakMap,wl=new WeakMap,Ry=new WeakMap,bl=new WeakMap,Sl=new WeakMap,wn=new WeakSet,dm=function(){a(this,Do).resolve(),a(this,Qs).send("configure",{verbosity:this.verbosity})},PT=function(e){p(this,Er,e),p(this,Qs,new pd("main","worker",e)),a(this,Qs).on("ready",()=>{}),E(this,wn,dm).call(this)},RT=function(){if(a(qe,bl)||a(qe,Uu,fm)){E(this,wn,Ad).call(this);return}let{workerSrc:e}=qe;try{qe._isSameOrigin(window.location,e)||(e=qe._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new pd("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?a(this,Do).reject(new Error("Worker was destroyed")):E(this,wn,Ad).call(this)},r=new AbortController;t.addEventListener("error",()=>{a(this,wl)||i()},{signal:r.signal}),s.on("test",l=>{if(r.abort(),this.destroyed||!l){i();return}p(this,Qs,s),p(this,Er,t),p(this,wl,t),E(this,wn,dm).call(this)}),s.on("ready",l=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{E(this,wn,Ad).call(this)}});const o=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};o();return}catch{lv("The worker has been disabled.")}E(this,wn,Ad).call(this)},Ad=function(){a(qe,bl)||(se("Setting up fake worker."),p(qe,bl,!0)),qe._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){a(this,Do).reject(new Error("Worker was destroyed"));return}const t=new WD;p(this,Er,t);const s=`fake${bt(qe,Ry)._++}`,i=new pd(s+"_worker",s,t);e.setup(i,t),p(this,Qs,new pd(s,s+"_worker",t)),E(this,wn,dm).call(this)}).catch(e=>{a(this,Do).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Uu=new WeakSet,fm=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},w(qe,Uu),w(qe,Ry,0),w(qe,bl,!1),w(qe,Sl,new WeakMap),mn&&(p(qe,bl,!0),Ns.workerSrc||(Ns.workerSrc="./pdf.worker.mjs")),qe._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},qe._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},qe.fromPort=e=>{if(DD("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return qe.create(e)};let Mh=qe;var xr,Mi,Hu,$u,Cr,Al,Ed;class FN{constructor(e,t,s,i,r,o){w(this,Al);w(this,xr,new Map);w(this,Mi,new Map);w(this,Hu,new Map);w(this,$u,new Map);w(this,Cr,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new xT,this.fontLoader=new zD({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return le(this,"annotationStorage",new US)}getRenderingIntent(e,t=$i.ENABLE,s=null,i=!1,r=!1){let o=ls.DISPLAY,l=Tw;switch(e){case"any":o=ls.ANY;break;case"display":break;case"print":o=ls.PRINT;break;default:se(`getRenderingIntent - invalid intent: ${e}`)}const c=o&ls.PRINT&&s instanceof aT?s:this.annotationStorage;switch(t){case $i.DISABLE:o+=ls.ANNOTATIONS_DISABLE;break;case $i.ENABLE:break;case $i.ENABLE_FORMS:o+=ls.ANNOTATIONS_FORMS;break;case $i.ENABLE_STORAGE:o+=ls.ANNOTATIONS_STORAGE,l=c.serializable;break;default:se(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=ls.IS_EDITING),r&&(o+=ls.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,l.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=a(this,Cr))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of a(this,Mi).values())e.push(i._destroy());a(this,Mi).clear(),a(this,Hu).clear(),a(this,$u).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,xr).clear(),this.filterFactory.destroy(),uf.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new qr("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{ge(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}ge(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(s,i)=>{ge(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){i.close();return}ge(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new IN(s,this))}),e.on("DocException",s=>{t._capability.reject(Cn(s))}),e.on("PasswordRequest",s=>{p(this,Cr,Promise.withResolvers());try{if(!t.onPassword)throw Cn(s);const i=r=>{r instanceof Error?a(this,Cr).reject(r):a(this,Cr).resolve({password:r})};t.onPassword(i,s.code)}catch(i){a(this,Cr).reject(i)}return a(this,Cr).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;a(this,Mi).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const d=r.error;se(`Error during font loading: ${d}`),this.commonObjs.resolve(s,d);break}const l=new Bw(r),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new UD(l,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:h}=r;ge(h,"The imageRef must be defined.");for(const d of a(this,Mi).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,o])=>{var c;if(this.destroyed)return;const l=a(this,Mi).get(i);if(!l.objs.has(s)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&se("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=a(this,Hu).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,$u).set(r.refStr,e);const o=new ON(t,r,this,this._params.pdfBug);return a(this,Mi).set(t,o),o});return a(this,Hu).set(t,i),i}getPageIndex(e){return kw(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return E(this,Al,Ed).call(this,"GetFieldObjects")}hasJSActions(){return E(this,Al,Ed).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return E(this,Al,Ed).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return E(this,Al,Ed).call(this,"GetOptionalContentConfig").then(t=>new gN(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=a(this,xr).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new fN(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,xr).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of a(this,Mi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),a(this,xr).clear(),this.filterFactory.destroy(!0),uf.cleanup()}}cachedPageNumber(e){if(!kw(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return a(this,$u).get(t)??null}}xr=new WeakMap,Mi=new WeakMap,Hu=new WeakMap,$u=new WeakMap,Cr=new WeakMap,Al=new WeakSet,Ed=function(e,t=null){const s=a(this,xr).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return a(this,xr).set(e,i),i};var No;class BN{constructor(e){w(this,No,null);O(this,"onContinue",null);O(this,"onError",null);p(this,No,e)}get promise(){return a(this,No).capability.promise}cancel(e=0){a(this,No).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=a(this,No).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=a(this,No);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}No=new WeakMap;var Io,El;const Da=class Da{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:g=!1,operationsFilter:m=null}){w(this,Io,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new BN(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=g,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=m}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,u;if(this.cancelled)return;if(this._canvas){if(a(Da,El).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Da,El).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:i,background:r,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Xc(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var s,i,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),a(this,Io)&&(window.cancelAnimationFrame(a(this,Io)),p(this,Io,null)),a(Da,El).delete(this._canvas),e||(e=new cv(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(i=this.task).onError)==null||r.call(i,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?p(this,Io,window.requestAnimationFrame(()=>{p(this,Io,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Da,El).delete(this._canvas),this.callback())))}};Io=new WeakMap,El=new WeakMap,w(Da,El,new WeakSet);let Vw=Da;const hf="5.4.296",LT="f56dc8601";var Kn,xl,Vu,Et,fp,Wu,_r,pp,Oo,Js,gp,Le,Ww,Gw,qw,Pa,MT,so;const _n=class _n{constructor({editor:e=null,uiManager:t=null}){w(this,Le);w(this,Kn,null);w(this,xl,null);w(this,Vu);w(this,Et,null);w(this,fp,!1);w(this,Wu,!1);w(this,_r,null);w(this,pp);w(this,Oo,null);w(this,Js,null);var s,i;e?(p(this,Wu,!1),p(this,_r,e)):p(this,Wu,!0),p(this,Js,(e==null?void 0:e._uiManager)||t),p(this,pp,a(this,Js)._eventBus),p(this,Vu,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((i=a(this,Js))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),a(_n,gp)||p(_n,gp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return le(this,"_keyboardManager",new ag([[["Escape","mac+Escape"],_n.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],_n.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],_n.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],_n.prototype._moveToPrevious],[["Home","mac+Home"],_n.prototype._moveToBeginning],[["End","mac+End"],_n.prototype._moveToEnd]]))}renderButton(){const e=p(this,Kn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",a(this,_r)&&(e.ariaControls=`${a(this,_r).id}_colorpicker_dropdown`);const t=a(this,Js)._signal;e.addEventListener("click",E(this,Le,Pa).bind(this),{signal:t}),e.addEventListener("keydown",E(this,Le,qw).bind(this),{signal:t});const s=p(this,xl,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=a(this,Vu),e.append(s),e}renderMainDropdown(){const e=p(this,Et,E(this,Le,Ww).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===a(this,Kn)){E(this,Le,Pa).call(this,e);return}const t=e.target.getAttribute("data-color");t&&E(this,Le,Gw).call(this,t,e)}_moveToNext(e){var t,s;if(!a(this,Le,so)){E(this,Le,Pa).call(this,e);return}if(e.target===a(this,Kn)){(t=a(this,Et).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=a(this,Et))==null?void 0:t.firstChild)||e.target===a(this,Kn)){a(this,Le,so)&&this._hideDropdownFromKeyboard();return}a(this,Le,so)||E(this,Le,Pa).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!a(this,Le,so)){E(this,Le,Pa).call(this,e);return}(t=a(this,Et).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!a(this,Le,so)){E(this,Le,Pa).call(this,e);return}(t=a(this,Et).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=a(this,Et))==null||e.classList.add("hidden"),a(this,Kn).ariaExpanded="false",(t=a(this,Oo))==null||t.abort(),p(this,Oo,null)}_hideDropdownFromKeyboard(){var e;if(!a(this,Wu)){if(!a(this,Le,so)){(e=a(this,_r))==null||e.unselect();return}this.hideDropdown(),a(this,Kn).focus({preventScroll:!0,focusVisible:a(this,fp)})}}updateColor(e){if(a(this,xl)&&(a(this,xl).style.backgroundColor=e),!a(this,Et))return;const t=a(this,Js).highlightColors.values();for(const s of a(this,Et).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=a(this,Kn))==null||e.remove(),p(this,Kn,null),p(this,xl,null),(t=a(this,Et))==null||t.remove(),p(this,Et,null)}};Kn=new WeakMap,xl=new WeakMap,Vu=new WeakMap,Et=new WeakMap,fp=new WeakMap,Wu=new WeakMap,_r=new WeakMap,pp=new WeakMap,Oo=new WeakMap,Js=new WeakMap,gp=new WeakMap,Le=new WeakSet,Ww=function(){const e=document.createElement("div"),t=a(this,Js)._signal;e.addEventListener("contextmenu",ms,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,_r)&&(e.id=`${a(this,_r).id}_colorpicker_dropdown`);for(const[s,i]of a(this,Js).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",a(_n,gp)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.ariaSelected=i===a(this,Vu),r.addEventListener("click",E(this,Le,Gw).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",E(this,Le,qw).bind(this),{signal:t}),e},Gw=function(e,t){t.stopPropagation(),a(this,pp).dispatch("switchannotationeditorparams",{source:this,type:fe.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},qw=function(e){_n._keyboardManager.exec(this,e)},Pa=function(e){if(a(this,Le,so)){this.hideDropdown();return}if(p(this,fp,e.detail===0),a(this,Oo)||(p(this,Oo,new AbortController),window.addEventListener("pointerdown",E(this,Le,MT).bind(this),{signal:a(this,Js).combinedSignal(a(this,Oo))})),a(this,Kn).ariaExpanded="true",a(this,Et)){a(this,Et).classList.remove("hidden");return}const t=p(this,Et,E(this,Le,Ww).call(this));a(this,Kn).append(t)},MT=function(e){var t;(t=a(this,Et))!=null&&t.contains(e.target)||this.hideDropdown()},so=function(){return a(this,Et)&&!a(this,Et).classList.contains("hidden")},w(_n,gp,null);let df=_n;var Di,mp,Gu,yp;const Na=class Na{constructor(e){w(this,Di,null);w(this,mp,null);w(this,Gu,null);p(this,mp,e),p(this,Gu,e._uiManager),a(Na,yp)||p(Na,yp,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,Di))return a(this,Di);const{editorType:e,colorType:t,colorValue:s}=a(this,mp),i=p(this,Di,document.createElement("input"));return i.type="color",i.value=s||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",a(Na,yp)[e]),i.addEventListener("input",()=>{a(this,Gu).updateParams(t,i.value)},{signal:a(this,Gu)._signal}),i}update(e){a(this,Di)&&(a(this,Di).value=e)}destroy(){var e;(e=a(this,Di))==null||e.remove(),p(this,Di,null)}hideDropdown(){}};Di=new WeakMap,mp=new WeakMap,Gu=new WeakMap,yp=new WeakMap,w(Na,yp,null);let fy=Na;function uE(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function nd(n){return Math.max(0,Math.min(255,255*n))}class hE{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=nd(e),[e,e,e]}static G_HTML([e]){const t=uE(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(nd)}static RGB_HTML(e){return`#${e.map(uE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[nd(1-Math.min(1,e+i)),nd(1-Math.min(1,s+i)),nd(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,o=1-s,l=Math.min(i,r,o);return["CMYK",i,r,o,l]}}class jN{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Fe("Abstract method `_createSVG` called.")}}class ff extends jN{_createSVG(e){return document.createElementNS(Qi,e)}}const zN=9,oc=new WeakSet,UN=new Date().getTimezoneOffset()*60*1e3;class dE{static create(e){switch(e.data.annotationType){case ut.LINK:return new GS(e);case ut.TEXT:return new $N(e);case ut.WIDGET:switch(e.data.fieldType){case"Tx":return new VN(e);case"Btn":return e.data.radioButton?new IT(e):e.data.checkBox?new GN(e):new qN(e);case"Ch":return new XN(e);case"Sig":return new WN(e)}return new dc(e);case ut.POPUP:return new Yw(e);case ut.FREETEXT:return new zT(e);case ut.LINE:return new KN(e);case ut.SQUARE:return new QN(e);case ut.CIRCLE:return new JN(e);case ut.POLYLINE:return new UT(e);case ut.CARET:return new eI(e);case ut.INK:return new qS(e);case ut.POLYGON:return new ZN(e);case ut.HIGHLIGHT:return new HT(e);case ut.UNDERLINE:return new tI(e);case ut.SQUIGGLY:return new nI(e);case ut.STRIKEOUT:return new sI(e);case ut.STAMP:return new $T(e);case ut.FILEATTACHMENT:return new iI(e);default:return new nt(e)}}}var Cl,qu,Ps,vp,Xw;const tA=class tA{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){w(this,vp);w(this,Cl,null);w(this,qu,!1);w(this,Ps,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return tA._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const e=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:i}=this.data;let r=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],r=t[c+2]):t[c+1]===o&&(r=Math.max(r,t[c+2]));return[r,o]}if((s==null?void 0:s.length)>=1){for(const c of s)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>o?(o=c[u+1],r=c[u]):c[u+1]===o&&(r=Math.max(r,c[u]));if(r!==1/0)return[r,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/s,e[1]=100*(e[1]-o)/i,e}get commentText(){var t,s,i;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${rf}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${rf}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=a(this,Ps))==null?void 0:e.popup)||this.popup)==null||t.remove(),p(this,Ps,this.popup=null)}updateEdited(e){var r;if(!this.container)return;e.rect&&(a(this,Cl)||p(this,Cl,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&E(this,vp,Xw).call(this,t);let i=((r=a(this,Ps))==null?void 0:r.popup)||this.popup;!i&&(s!=null&&s.text)&&(this._createPopup(s),i=a(this,Ps).popup),i&&(i.updateEdited(e),s!=null&&s.deleted&&(i.remove(),p(this,Ps,null),this.popup=null))}resetEdited(){var e;a(this,Cl)&&(E(this,vp,Xw).call(this,a(this,Cl).rect),(e=a(this,Ps))==null||e.popup.resetEdited(),p(this,Cl,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof dc)&&!(this instanceof GS)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Yw){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:l,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(v>0||A>0){const b=`calc(${v}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;o.borderRadius=b}else if(this instanceof IT){const b=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=b}switch(t.borderStyle.style){case yc.SOLID:o.borderStyle="solid";break;case yc.DASHED:o.borderStyle="dashed";break;case yc.BEVELED:se("Unimplemented border style: beveled");break;case yc.INSET:se("Unimplemented border style: inset");break;case yc.UNDERLINE:o.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(p(this,qu,!0),o.borderColor=q.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const u=q.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:g}=i.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-g)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(o.width=`${100*l/h}%`,o.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;e%180!==0&&([r,o]=[o,r]),t.style.width=`${100*r/s}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],o=r[0],l=r.slice(1);i.target.style[s]=hE[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:hE[`${o}_rgb`](l)})};return le(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const o=s[i];if(o){const l={detail:{[i]:r},target:e};o(l),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,A,y,b]=e.subarray(2,6);if(i===v&&r===A&&t===y&&s===b)return}const{style:o}=this.container;let l;if(a(this,qu)){const{borderColor:v,borderWidth:A}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const c=i-t,u=r-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const g=h.createElement("clipPath"),m=`clippath_${this.data.id}`;g.setAttribute("id",m),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let v=2,A=e.length;v<A;v+=8){const y=e[v],b=e[v+1],S=e[v+2],x=e[v+3],_=h.createElement("rect"),T=(S-t)/c,k=(r-b)/u,R=(y-S)/c,D=(b-x)/u;_.setAttribute("x",T),_.setAttribute("y",k),_.setAttribute("width",R),_.setAttribute("height",D),g.append(_),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${k}" width="${R}" height="${D}"/>`)}a(this,qu)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(e=null){const{data:t}=this;let s,i;e?(s={str:e.text},i=e.date):(s=t.contentsObj,i=t.modificationDate);const r=p(this,Ps,new Yw({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(a(this,Ps)||this.popup||this.data.popupRef)}get extraPopupElement(){return a(this,Ps)}render(){Fe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:o,exportValues:l}of i){if(r===-1||o===t)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!oc.has(u)){se(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:u})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==t&&oc.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Cl=new WeakMap,qu=new WeakMap,Ps=new WeakMap,vp=new WeakSet,Xw=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-l)/r}%`,t.top=`${100*(o-e[3]+c)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let nt=tA;class HN extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var hs,Ra,DT,NT;class GS extends nt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});w(this,hs);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),r=!0):t.attachment?(E(this,hs,DT).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(E(this,hs,NT).call(this,i,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s,i=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&E(this,hs,Ra).call(this),i&&(t.title=i)}_bindNamedAction(t,s,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),i&&(t.title=i),E(this,hs,Ra).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=i.get(r);o&&(t[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),E(this,hs,Ra).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),E(this,hs,Ra).call(this),!this._fieldObjects){se('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var d;i==null||i();const{fields:r,refs:o,include:l}=s,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const g of r){const m=this._fieldObjects[g]||[];for(const{id:v}of m)f.add(v)}for(const g of Object.values(this._fieldObjects))for(const m of g)f.has(m.id)===l&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:g}=f;switch(h.push(g),f.type){case"text":{const v=f.defaultValue||"";u.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;u.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";u.setValue(g,{value:v});break}default:continue}const m=document.querySelector(`[data-element-id="${g}"]`);if(m){if(!oc.has(m)){se(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}hs=new WeakSet,Ra=function(){this.container.setAttribute("data-internal-link","")},DT=function(t,s,i="",r=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:i&&(t.title=i),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,r),!1},E(this,hs,Ra).call(this)},NT=function(t,s,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),i&&(t.title=i),E(this,hs,Ra).call(this)};class $N extends nt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class dc extends nt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ft.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var l;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(e,t,s,i){var r,o,l;for(const[c,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":q.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||zN,r=e.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(Kv*i))||1,d=u/h;o=Math.min(i,c(d/Kv))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(i,c(u/Kv))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=q.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class VN extends dc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),r.setValue(o.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),oc.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:g}=this.data,m=!!f&&this.enableScripting;d&&(s.title=d),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(s,"value",A.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",A=>{const y=this.data.defaultFieldValue??"";s.value=h.userValue=y,h.formattedValue=null});let v=A=>{const{formattedValue:y}=h;y!=null&&(A.target.value=y),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",y=>{var S;if(h.focused)return;const{target:b}=y;if(m&&(b.type=f,g&&(b.step=g)),h.userValue){const x=h.userValue;if(m)if(f==="time"){const _=new Date(x),T=[_.getHours(),_.getMinutes(),_.getSeconds()];b.value=T.map(k=>k.toString().padStart(2,"0")).join(":")}else b.value=new Date(x-UN).toISOString().split(f==="date"?"T":".",1)[0];else b.value=x}h.lastCommittedValue=b.value,h.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const b={value(S){h.userValue=S.detail.value??"",m||e.setValue(t,{value:h.userValue.toString()}),S.target.value=h.userValue},formattedValue(S){const{formattedValue:x}=S.detail;h.formattedValue=x,x!=null&&S.target!==document.activeElement&&(S.target.value=x);const _={formattedValue:x};m&&(_.value=x),e.setValue(t,_)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var k;const{charLimit:x}=S.detail,{target:_}=S;if(x===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",x);let T=h.userValue;!T||T.length<=x||(T=T.slice(0,x),_.value=h.userValue=T,e.setValue(t,{value:T}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(b,y)}),s.addEventListener("keydown",y=>{var x;h.commitKey=1;let b=-1;if(y.key==="Escape"?b=0:y.key==="Enter"&&!this.data.multiLine?b=2:y.key==="Tab"&&(h.commitKey=3),b===-1)return;const{value:S}=y.target;h.lastCommittedValue!==S&&(h.lastCommittedValue=S,h.userValue=S,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:b,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const A=v;v=null,s.addEventListener("blur",y=>{var x,_;if(!h.focused||!y.relatedTarget)return;(x=this.data.actions)!=null&&x.Blur||(h.focused=!1);const{target:b}=y;let{value:S}=b;if(m){if(S&&f==="time"){const T=S.split(":").map(k=>parseInt(k,10));S=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),b.step=""}else S.includes("T")||(S=`${S}T00:00`),S=new Date(S).valueOf();b.type="text"}h.userValue=S,h.lastCommittedValue!==S&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:h.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),A(y)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",y=>{var D;h.lastCommittedValue=null;const{data:b,target:S}=y,{value:x,selectionStart:_,selectionEnd:T}=S;let k=_,R=T;switch(y.inputType){case"deleteWordBackward":{const M=x.substring(0,_).match(/\w*[^\w]*$/);M&&(k-=M[0].length);break}case"deleteWordForward":{const M=x.substring(_).match(/^[^\w]*\w*/);M&&(R+=M[0].length);break}case"deleteContentBackward":_===T&&(k-=1);break;case"deleteContentForward":_===T&&(R+=1);break}y.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:b||"",willCommit:!1,selStart:k,selEnd:R}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(v&&s.addEventListener("blur",v),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class WN extends dc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class GN extends dc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return oc.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,s)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class IT extends dc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(oc.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===s;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class qN extends GS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class XN extends dc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");oc.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),o=()=>{h.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:g}=i;return g?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const g=f.detail.value,m=new Set(Array.isArray(g)?g:[g]);for(const v of i.options)v.selected=m.has(v.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(f){i.multiple=!0},remove(f){const g=i.options,m=f.detail.remove;g[m].selected=!1,i.remove(m),g.length>0&&Array.prototype.findIndex.call(g,A=>A.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(f){const{index:g,displayValue:m,exportValue:v}=f.detail.insert,A=i.children[g],y=document.createElement("option");y.textContent=m,y.value=v,A?A.before(y):i.append(y),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:g}=f.detail;for(;i.length!==0;)i.remove(0);for(const m of g){const{displayValue:v,exportValue:A}=m,y=document.createElement("option");y.textContent=v,y.value=A,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const g=new Set(f.detail.indices);for(const m of f.target.options)m.selected=g.has(m.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var g;const d=l(!0),f=l(!1);e.setValue(t,{value:d}),h.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var wp,Kw;class Yw extends nt{constructor(t){const{data:s,elements:i,parent:r}=t,o=!!r._commentManager;super(t,{isRenderable:!o&&nt._hasPopupData(s)});w(this,wp);if(this.elements=i,o&&nt._hasPopupData(s)){const l=this.popup=E(this,wp,Kw).call(this);for(const c of i)c.popup=l}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=E(this,wp,Kw).call(this),i=[];for(const r of this.elements)r.popup=s,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${BS}${r}`).join(",")),this.container}}wp=new WeakSet,Kw=function(){return new YN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Qn,Fo,Ly,My,Xu,Yu,ot,Ni,Bo,_l,Ku,Qu,Ii,Jn,Tr,kr,Pt,Pr,jo,bp,Rr,Ju,Tl,zo,sn,Uo,ue,pm,Qw,Jw,Zw,gm,eb,OT,FT,BT,jT,mm,ym,tb;class YN{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:u,parentRect:h,open:d,commentManager:f=null}){w(this,ue);w(this,Qn,null);w(this,Fo,E(this,ue,BT).bind(this));w(this,Ly,E(this,ue,tb).bind(this));w(this,My,E(this,ue,ym).bind(this));w(this,Xu,E(this,ue,mm).bind(this));w(this,Yu,null);w(this,ot,null);w(this,Ni,null);w(this,Bo,null);w(this,_l,null);w(this,Ku,null);w(this,Qu,null);w(this,Ii,!1);w(this,Jn,null);w(this,Tr,null);w(this,kr,null);w(this,Pt,null);w(this,Pr,null);w(this,jo,null);w(this,bp,null);w(this,Rr,null);w(this,Ju,null);w(this,Tl,null);w(this,zo,!1);w(this,sn,null);w(this,Uo,null);p(this,ot,e),p(this,Ju,i),p(this,Ni,o),p(this,Rr,l),p(this,Ku,c),p(this,Yu,t),p(this,bp,u),p(this,Qu,h),p(this,_l,s),p(this,Qn,f),p(this,sn,s[0]),p(this,Bo,lf.toDateObject(r)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup()),f?this.renderCommentButton():(E(this,ue,pm).call(this),a(this,ot).hidden=!0,d&&E(this,ue,mm).call(this))}renderCommentButton(){if(a(this,Pt)||(a(this,Pr)||E(this,ue,Qw).call(this),!a(this,Pr)))return;const{signal:e}=p(this,Tr,new AbortController),t=!!a(this,sn).extraPopupElement,s=()=>{a(this,Qn).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{a(this,Qn).toggleCommentPopup(this,!1,!0,!t)},r=()=>{a(this,Qn).toggleCommentPopup(this,!1,!1)};if(t){p(this,Pt,a(this,sn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",a(this,Fo),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=p(this,Pt,document.createElement("button"));o.className="annotationCommentButton";const l=a(this,sn).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),E(this,ue,Zw).call(this),E(this,ue,Jw).call(this),o.addEventListener("keydown",a(this,Fo),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),l.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=a(this,sn).commentData;return e?a(this,Ku)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=a(this,Pt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:i,modificationDate:r}=a(this,sn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:i,modificationDate:r}}get elementBeforePopup(){return a(this,Pt)}get comment(){return a(this,Uo)||p(this,Uo,a(this,sn).commentText),a(this,Uo)}set comment(e){e!==this.comment&&(a(this,sn).commentText=p(this,Uo,e))}get parentBoundingClientRect(){return a(this,sn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){a(this,Pt)&&(a(this,Pt).classList.toggle("selected",e),a(this,Pt).ariaExpanded=t)}setSelectedCommentButton(e){a(this,Pt).classList.toggle("selected",e)}get commentPopupPosition(){if(a(this,jo))return a(this,jo);const{x:e,y:t,height:s}=a(this,Pt).getBoundingClientRect(),{x:i,y:r,width:o,height:l}=a(this,sn).layer.getBoundingClientRect();return[(e-i)/o,(t+s-r)/l]}set commentPopupPosition(e){p(this,jo,e)}hasDefaultPopupPosition(){return a(this,jo)===null}get commentButtonPosition(){return a(this,Pr)}get commentButtonWidth(){return a(this,Pt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=a(this,jo)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:r,y:o,width:l,height:c}=i;a(this,Qn).showDialog(null,this,r+t*l,o+s*c,{...e,parentDimensions:i})}render(){var s,i;if(a(this,Jn))return;const e=p(this,Jn,document.createElement("div"));if(e.className="popup",a(this,Yu)){const r=e.style.outlineColor=q.makeHexColor(...a(this,Yu));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=a(this,Ju))!=null&&s.str){const r=document.createElement("span");r.className="title",t.append(r),{dir:r.dir,str:r.textContent}=a(this,Ju)}if(e.append(t),a(this,Bo)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Bo).valueOf()})),r.dateTime=a(this,Bo).toISOString(),t.append(r)}zS({html:a(this,ue,gm)||a(this,Ni).str,dir:(i=a(this,Ni))==null?void 0:i.dir,className:"popupContent"},e),a(this,ot).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var i;if(a(this,Qn)){s?(this.remove(),p(this,Uo,null)):t&&(t.deleted?this.remove():(E(this,ue,Zw).call(this),p(this,Uo,t.text))),e&&(p(this,Pr,null),E(this,ue,Qw).call(this),E(this,ue,Jw).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}E(this,ue,pm).call(this),a(this,Tl)||p(this,Tl,{contentsObj:a(this,Ni),richText:a(this,Rr)}),e&&p(this,kr,null),t&&t.text&&(p(this,Rr,E(this,ue,FT).call(this,t.text)),p(this,Bo,lf.toDateObject(t.date)),p(this,Ni,null)),(i=a(this,Jn))==null||i.remove(),p(this,Jn,null)}resetEdited(){var e;a(this,Tl)&&({contentsObj:bt(this,Ni)._,richText:bt(this,Rr)._}=a(this,Tl),p(this,Tl,null),(e=a(this,Jn))==null||e.remove(),p(this,Jn,null),p(this,kr,null))}remove(){var e,t,s;if((e=a(this,Tr))==null||e.abort(),p(this,Tr,null),(t=a(this,Jn))==null||t.remove(),p(this,Jn,null),p(this,zo,!1),p(this,Ii,!1),(s=a(this,Pt))==null||s.remove(),p(this,Pt,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){p(this,zo,this.isVisible),a(this,zo)&&(a(this,ot).hidden=!0)}maybeShow(){a(this,Qn)||(E(this,ue,pm).call(this),a(this,zo)&&(a(this,Jn)||E(this,ue,ym).call(this),p(this,zo,!1),a(this,ot).hidden=!1))}get isVisible(){return a(this,Qn)?!1:a(this,ot).hidden===!1}}Qn=new WeakMap,Fo=new WeakMap,Ly=new WeakMap,My=new WeakMap,Xu=new WeakMap,Yu=new WeakMap,ot=new WeakMap,Ni=new WeakMap,Bo=new WeakMap,_l=new WeakMap,Ku=new WeakMap,Qu=new WeakMap,Ii=new WeakMap,Jn=new WeakMap,Tr=new WeakMap,kr=new WeakMap,Pt=new WeakMap,Pr=new WeakMap,jo=new WeakMap,bp=new WeakMap,Rr=new WeakMap,Ju=new WeakMap,Tl=new WeakMap,zo=new WeakMap,sn=new WeakMap,Uo=new WeakMap,ue=new WeakSet,pm=function(){var t;if(a(this,Tr))return;p(this,Tr,new AbortController);const{signal:e}=a(this,Tr);for(const s of this.trigger)s.addEventListener("click",a(this,Xu),{signal:e}),s.addEventListener("pointerenter",a(this,My),{signal:e}),s.addEventListener("pointerleave",a(this,Ly),{signal:e}),s.classList.add("popupTriggerArea");for(const s of a(this,_l))(t=s.container)==null||t.addEventListener("keydown",a(this,Fo),{signal:e})},Qw=function(){const e=a(this,_l).find(t=>t.hasCommentButton);e&&p(this,Pr,e._normalizePoint(e.commentButtonPosition))},Jw=function(){if(a(this,sn).extraPopupElement&&!a(this,sn).editor)return;this.renderCommentButton();const[e,t]=a(this,Pr),{style:s}=a(this,Pt);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},Zw=function(){a(this,sn).extraPopupElement||(this.renderCommentButton(),a(this,Pt).style.backgroundColor=this.commentButtonColor||"")},gm=function(){const e=a(this,Rr),t=a(this,Ni);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&a(this,Rr).html||null},eb=function(){var e,t,s;return((s=(t=(e=a(this,ue,gm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},OT=function(){var e,t,s;return((s=(t=(e=a(this,ue,gm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},FT=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:a(this,ue,OT),fontSize:a(this,ue,eb)?`calc(${a(this,ue,eb)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},BT=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&a(this,Ii))&&E(this,ue,mm).call(this)},jT=function(){if(a(this,kr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=a(this,Ku);let o=!!a(this,Qu),l=o?a(this,Qu):a(this,bp);for(const m of a(this,_l))if(!l||q.intersect(m.data.rect,l)!==null){l=m.data.rect,o=!0;break}const c=q.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=o?l[2]-l[0]+5:0,d=c[0]+h,f=c[1];p(this,kr,[100*(d-i)/t,100*(f-r)/s]);const{style:g}=a(this,ot);g.left=`${a(this,kr)[0]}%`,g.top=`${a(this,kr)[1]}%`},mm=function(){if(a(this,Qn)){a(this,Qn).toggleCommentPopup(this,!1);return}p(this,Ii,!a(this,Ii)),a(this,Ii)?(E(this,ue,ym).call(this),a(this,ot).addEventListener("click",a(this,Xu)),a(this,ot).addEventListener("keydown",a(this,Fo))):(E(this,ue,tb).call(this),a(this,ot).removeEventListener("click",a(this,Xu)),a(this,ot).removeEventListener("keydown",a(this,Fo)))},ym=function(){a(this,Jn)||this.render(),this.isVisible?a(this,Ii)&&a(this,ot).classList.add("focused"):(E(this,ue,jT).call(this),a(this,ot).hidden=!1,a(this,ot).style.zIndex=parseInt(a(this,ot).style.zIndex)+1e3)},tb=function(){a(this,ot).classList.remove("focused"),!(a(this,Ii)||!this.isVisible)&&(a(this,ot).hidden=!0,a(this,ot).style.zIndex=parseInt(a(this,ot).style.zIndex)-1e3)};class zT extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ne.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Sp;class KN extends nt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,Sp,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=p(this,Sp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Sp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sp=new WeakMap;var Ap;class QN extends nt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,Ap,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,l=p(this,Ap,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",s-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ap)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ap=new WeakMap;var Ep;class JN extends nt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,Ep,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,l=p(this,Ep,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",i/2),l.setAttribute("rx",s/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ep)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ep=new WeakMap;var xp;class UT extends nt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,xp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r},width:o,height:l}=this;if(!s)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let d=0,f=s.length;d<f;d+=2){const g=s[d]-t[0],m=t[3]-s[d+1];u.push(`${g},${m}`)}u=u.join(" ");const h=p(this,xp,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,xp)}addHighlightArea(){this.container.classList.add("highlightArea")}}xp=new WeakMap;class ZN extends UT{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class eI extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Cp,kl,_p,nb;class qS extends nt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,_p);w(this,Cp,null);w(this,kl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ne.HIGHLIGHT:ne.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=E(this,_p,nb).call(this,s,t),h=this.svgFactory.create(c,u,!0),d=p(this,Cp,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,g=i.length;f<g;f++){const m=this.svgFactory.createElement(this.svgElementName);a(this,kl).push(m),m.setAttribute("points",i[f].join(",")),d.append(m)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:i,rect:r}=t,o=a(this,Cp);if(s>=0&&o.setAttribute("stroke-width",s||1),i)for(let l=0,c=a(this,kl).length;l<c;l++)a(this,kl)[l].setAttribute("points",i[l].join(","));if(r){const{transform:l,width:c,height:u}=E(this,_p,nb).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,kl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cp=new WeakMap,kl=new WeakMap,_p=new WeakSet,nb=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class HT extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ne.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class tI extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class nI extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class sI extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class $T extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ne.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Tp,kp,sb;class iI extends nt{constructor(t){var i;super(t,{isRenderable:!0});w(this,kp);w(this,Tp,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",E(this,kp,sb).bind(this)),p(this,Tp,i);const{isMac:r}=Ft.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&E(this,kp,sb).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return a(this,Tp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tp=new WeakMap,kp=new WeakSet,sb=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Zu,Pl,eh,Ho,Pp,Rl,ba,ib,rb,th;let XS=(th=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:l,commentManager:c,linkService:u,annotationStorage:h}){w(this,ba);w(this,Zu,null);w(this,Pl,null);w(this,eh,null);w(this,Ho,new Map);w(this,Pp,null);w(this,Rl,null);this.div=e,p(this,Zu,t),p(this,Pl,s),p(this,Pp,l||null),p(this,Rl,u||null),p(this,eh,h||new US),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return a(this,Ho).size>0}async render(e){var o,l,c;const{annotations:t}=e,s=this.div;ya(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:a(this,Rl),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new ff,annotationStorage:a(this,eh),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const h=u.annotationType===ut.POPUP;if(h){const g=i.get(u.id);if(!g)continue;r.elements=g}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;r.data=u;const d=dE.create(r);if(!d.isRenderable)continue;if(!h&&u.popupRef){const g=i.get(u.popupRef);g?g.push(d):i.set(u.popupRef,[d])}const f=d.render();u.hidden&&(f.style.visibility="hidden"),await E(this,ba,ib).call(this,f,u.id,r.elements),(l=(o=d.extraPopupElement)==null?void 0:o.popup)==null||l.renderCommentButton(),d._isEditable&&(a(this,Ho).set(d.data.id,d),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(d))}E(this,ba,rb).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:a(this,Rl),svgFactory:new ff,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=th._defaultBorderStyle),t.data=s;const i=dE.create(t);if(!i.isRenderable)continue;const r=i.render();await E(this,ba,ib).call(this,r,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,ya(t,{rotation:e.rotation}),E(this,ba,rb).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Ho).values())}getEditableAnnotation(e){return a(this,Ho).get(e)}addFakeAnnotation(e){var l;const{div:t}=this,{id:s,rotation:i}=e,r=new HN({data:{id:s,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:a(this,Rl),annotationStorage:a(this,eh)}),o=r.render();return t.append(o),(l=a(this,Zu))==null||l.moveElementInDOM(t,o,o,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return le(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:yc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Zu=new WeakMap,Pl=new WeakMap,eh=new WeakMap,Ho=new WeakMap,Pp=new WeakMap,Rl=new WeakMap,ba=new WeakSet,ib=async function(e,t,s){var l,c;const i=e.firstChild||e,r=i.id=`${BS}${t}`,o=await((l=a(this,Pp))==null?void 0:l.getAriaAttributes(r));if(o)for(const[u,h]of o)i.setAttribute(u,h);s?s.at(-1).container.after(e):(this.div.append(e),(c=a(this,Zu))==null||c.moveElementInDOM(this.div,e,i,!1))},rb=function(){var t;if(!a(this,Pl))return;const e=this.div;for(const[s,i]of a(this,Pl)){const r=e.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i);const l=a(this,Ho).get(s);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,r.id,i),l._hasNoCanvas=!1):l.canvas=i)}a(this,Pl).clear()},th);const Bg=/\r\n?|\n/g;var Zn,Rp,Ll,es,vt,VT,WT,GT,vm,Hr,wm,bm,qT,ab,XT;const He=class He extends ze{constructor(t){super({...t,name:"freeTextEditor"});w(this,vt);w(this,Zn,"");w(this,Rp,`${this.id}-editor`);w(this,Ll,null);w(this,es);O(this,"_colorPicker",null);this.color=t.color||He._defaultColor||ze._defaultLineColor,p(this,es,t.fontSize||He._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=He.prototype,s=o=>o.isEmpty(),i=va.TRANSLATE_SMALL,r=va.TRANSLATE_BIG;return le(this,"_keyboardManager",new ag([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){ze.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case fe.FREETEXT_SIZE:He._defaultFontSize=s;break;case fe.FREETEXT_COLOR:He._defaultColor=s;break}}updateParams(t,s){switch(t){case fe.FREETEXT_SIZE:E(this,vt,VT).call(this,s);break;case fe.FREETEXT_COLOR:E(this,vt,WT).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[fe.FREETEXT_SIZE,He._defaultFontSize],[fe.FREETEXT_COLOR,He._defaultColor||ze._defaultLineColor]]}get propertiesToUpdate(){return[[fe.FREETEXT_SIZE,a(this,es)],[fe.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new fy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return fe.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-He._internalPadding*t,-(He._internalPadding+a(this,es))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),p(this,Ll,new AbortController);const t=this._uiManager.combinedSignal(a(this,Ll));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Rp)),this._isDraggable=!0,(t=a(this,Ll))==null||t.abort(),p(this,Ll,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=a(this,Zn),s=p(this,Zn,E(this,vt,GT).call(this).trimEnd());if(t===s)return;const i=r=>{if(p(this,Zn,r),!r){this.remove();return}E(this,vt,bm).call(this),this._uiManager.rebuild(this),E(this,vt,vm).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),E(this,vt,vm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){He._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Rp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${a(this,es)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,g]=this.pageTranslation;let m,v;switch(this.rotation){case 0:m=t+(l[0]-f)/h,v=s+this.height-(l[1]-g)/d;break;case 90:m=t+(l[0]-f)/h,v=s-(l[1]-g)/d,[c,u]=[u,-c];break;case 180:m=t-this.width+(l[0]-f)/h,v=s-(l[1]-g)/d,[c,u]=[-c,-u];break;case 270:m=t+(l[0]-f-this.height*d)/h,v=s+(l[1]-g-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,v*o,c,u)}else this._moveAfterPaste(t,s);E(this,vt,bm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,v,A;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=E(m=He,Hr,ab).call(m,s.getData("text")||"").replaceAll(Bg,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Bg,"")),y!==this.editorDiv){let b=h;for(const S of this.editorDiv.childNodes){if(S===y){b=d;continue}b.push(E(v=He,Hr,wm).call(v,S))}}h.push(c.nodeValue.slice(0,u).replaceAll(Bg,""))}else if(c===this.editorDiv){let y=h,b=0;for(const S of this.editorDiv.childNodes)b++===u&&(y=d),y.push(E(A=He,Hr,wm).call(A,S))}p(this,Zn,`${h.join(`
`)}${r}${d.join(`
`)}`),E(this,vt,bm).call(this);const f=new Range;let g=Math.sumPrecise(h.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const b=y.nodeValue.length;if(g<=b){f.setStart(y,g),f.setEnd(y,g);break}g-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=He._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,i){var l;let r=null;if(t instanceof zT){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:g,richText:m,contentsObj:v,creationDate:A,modificationDate:y},textContent:b,textPosition:S,parent:{page:{pageNumber:x}}}=t;if(!b||b.length===0)return null;r=t={annotationType:ne.FREETEXT,color:Array.from(u),fontSize:c,value:b.join(`
`),position:S,pageIndex:x-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:g,comment:(v==null?void 0:v.str)||null,richText:m,creationDate:A,modificationDate:y}}const o=await super.deserialize(t,s,i);return p(o,es,t.fontSize),o.color=q.makeHexColor(...t.color),p(o,Zn,E(l=He,Hr,ab).call(l,t.value)),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=ze._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:s,fontSize:a(this,es),value:E(this,vt,qT).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!E(this,vt,XT).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:i}=s;i.fontSize=`calc(${a(this,es)}px * var(--total-scale-factor))`,i.color=this.color,s.replaceChildren();for(const r of a(this,Zn).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),s.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:a(this,Zn)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Zn=new WeakMap,Rp=new WeakMap,Ll=new WeakMap,es=new WeakMap,vt=new WeakSet,VT=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,es))*this.parentScale),p(this,es,r),E(this,vt,vm).call(this)},i=a(this,es);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:fe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},WT=function(t){const s=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:fe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},GT=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(E(i=He,Hr,wm).call(i,r)),s=r);return t.join(`
`)},vm=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},Hr=new WeakSet,wm=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Bg,"")},bm=function(){if(this.editorDiv.replaceChildren(),!!a(this,Zn))for(const t of a(this,Zn).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},qT=function(){return a(this,Zn).replaceAll(""," ")},ab=function(t){return t.replaceAll(" ","")},XT=function(t){const{value:s,fontSize:i,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((l,c)=>l!==r[c])||t.pageIndex!==o},w(He,Hr),O(He,"_freeTextDefaultContent",""),O(He,"_internalPadding",0),O(He,"_defaultColor",null),O(He,"_defaultFontSize",10),O(He,"_type","freetext"),O(He,"_editorType",ne.FREETEXT);let ob=He;class G{toSVGPath(){Fe("Abstract method `toSVGPath` must be implemented.")}get box(){Fe("Abstract getter `box` must be implemented.")}serialize(e,t){Fe("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l]*i,o[l+1]=s+e[l+1]*r;return o}static _rescaleAndSwap(e,t,s,i,r,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l+1]*i,o[l+1]=s+e[l]*r;return o}static _translate(e,t,s,i){i||(i=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,o){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}O(G,"PRECISION",1e-4);var ts,Zs,nh,sh,Oi,he,Ml,Dl,Lp,Mp,ih,rh,$o,Dp,Dy,Ny,_t,xd,YT,KT,QT,JT,ZT,ek;const nr=class nr{constructor({x:e,y:t},s,i,r,o,l=0){w(this,_t);w(this,ts);w(this,Zs,[]);w(this,nh);w(this,sh);w(this,Oi,[]);w(this,he,new Float32Array(18));w(this,Ml);w(this,Dl);w(this,Lp);w(this,Mp);w(this,ih);w(this,rh);w(this,$o,[]);p(this,ts,s),p(this,rh,r*i),p(this,sh,o),a(this,he).set([NaN,NaN,NaN,NaN,e,t],6),p(this,nh,l),p(this,Mp,a(nr,Dp)*i),p(this,Lp,a(nr,Ny)*i),p(this,ih,i),a(this,$o).push(e,t)}isEmpty(){return isNaN(a(this,he)[8])}add({x:e,y:t}){var D;p(this,Ml,e),p(this,Dl,t);const[s,i,r,o]=a(this,ts);let[l,c,u,h]=a(this,he).subarray(8,12);const d=e-u,f=t-h,g=Math.hypot(d,f);if(g<a(this,Lp))return!1;const m=g-a(this,Mp),v=m/g,A=v*d,y=v*f;let b=l,S=c;l=u,c=h,u+=A,h+=y,(D=a(this,$o))==null||D.push(e,t);const x=-y/m,_=A/m,T=x*a(this,rh),k=_*a(this,rh);return a(this,he).set(a(this,he).subarray(2,8),0),a(this,he).set([u+T,h+k],4),a(this,he).set(a(this,he).subarray(14,18),12),a(this,he).set([u-T,h-k],16),isNaN(a(this,he)[6])?(a(this,Oi).length===0&&(a(this,he).set([l+T,c+k],2),a(this,Oi).push(NaN,NaN,NaN,NaN,(l+T-s)/r,(c+k-i)/o),a(this,he).set([l-T,c-k],14),a(this,Zs).push(NaN,NaN,NaN,NaN,(l-T-s)/r,(c-k-i)/o)),a(this,he).set([b,S,l,c,u,h],6),!this.isEmpty()):(a(this,he).set([b,S,l,c,u,h],6),Math.abs(Math.atan2(S-c,b-l)-Math.atan2(y,A))<Math.PI/2?([l,c,u,h]=a(this,he).subarray(2,6),a(this,Oi).push(NaN,NaN,NaN,NaN,((l+u)/2-s)/r,((c+h)/2-i)/o),[l,c,b,S]=a(this,he).subarray(14,18),a(this,Zs).push(NaN,NaN,NaN,NaN,((b+l)/2-s)/r,((S+c)/2-i)/o),!0):([b,S,l,c,u,h]=a(this,he).subarray(0,6),a(this,Oi).push(((b+5*l)/6-s)/r,((S+5*c)/6-i)/o,((5*l+u)/6-s)/r,((5*c+h)/6-i)/o,((l+u)/2-s)/r,((c+h)/2-i)/o),[u,h,l,c,b,S]=a(this,he).subarray(12,18),a(this,Zs).push(((b+5*l)/6-s)/r,((S+5*c)/6-i)/o,((5*l+u)/6-s)/r,((5*c+h)/6-i)/o,((l+u)/2-s)/r,((c+h)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=a(this,Oi),t=a(this,Zs);if(isNaN(a(this,he)[6])&&!this.isEmpty())return E(this,_t,YT).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);E(this,_t,QT).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return E(this,_t,KT).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,o){return new tk(e,t,s,i,r,o)}getOutlines(){var d;const e=a(this,Oi),t=a(this,Zs),s=a(this,he),[i,r,o,l]=a(this,ts),c=new Float32Array((((d=a(this,$o))==null?void 0:d.length)??0)+2);for(let f=0,g=c.length-2;f<g;f+=2)c[f]=(a(this,$o)[f]-i)/o,c[f+1]=(a(this,$o)[f+1]-r)/l;if(c[c.length-2]=(a(this,Ml)-i)/o,c[c.length-1]=(a(this,Dl)-r)/l,isNaN(s[6])&&!this.isEmpty())return E(this,_t,JT).call(this,c);const u=new Float32Array(a(this,Oi).length+24+a(this,Zs).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=E(this,_t,ek).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(t[f+g])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+g],u[h+1]=t[f+g+1],h+=2}return E(this,_t,ZT).call(this,u,h),this.newFreeDrawOutline(u,c,a(this,ts),a(this,ih),a(this,nh),a(this,sh))}};ts=new WeakMap,Zs=new WeakMap,nh=new WeakMap,sh=new WeakMap,Oi=new WeakMap,he=new WeakMap,Ml=new WeakMap,Dl=new WeakMap,Lp=new WeakMap,Mp=new WeakMap,ih=new WeakMap,rh=new WeakMap,$o=new WeakMap,Dp=new WeakMap,Dy=new WeakMap,Ny=new WeakMap,_t=new WeakSet,xd=function(){const e=a(this,he).subarray(4,6),t=a(this,he).subarray(16,18),[s,i,r,o]=a(this,ts);return[(a(this,Ml)+(e[0]-t[0])/2-s)/r,(a(this,Dl)+(e[1]-t[1])/2-i)/o,(a(this,Ml)+(t[0]-e[0])/2-s)/r,(a(this,Dl)+(t[1]-e[1])/2-i)/o]},YT=function(){const[e,t,s,i]=a(this,ts),[r,o,l,c]=E(this,_t,xd).call(this);return`M${(a(this,he)[2]-e)/s} ${(a(this,he)[3]-t)/i} L${(a(this,he)[4]-e)/s} ${(a(this,he)[5]-t)/i} L${r} ${o} L${l} ${c} L${(a(this,he)[16]-e)/s} ${(a(this,he)[17]-t)/i} L${(a(this,he)[14]-e)/s} ${(a(this,he)[15]-t)/i} Z`},KT=function(e){const t=a(this,Zs);e.push(`L${t[4]} ${t[5]} Z`)},QT=function(e){const[t,s,i,r]=a(this,ts),o=a(this,he).subarray(4,6),l=a(this,he).subarray(16,18),[c,u,h,d]=E(this,_t,xd).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-s)/r} L${c} ${u} L${h} ${d} L${(l[0]-t)/i} ${(l[1]-s)/r}`)},JT=function(e){const t=a(this,he),[s,i,r,o]=a(this,ts),[l,c,u,h]=E(this,_t,xd).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/o],0),this.newFreeDrawOutline(d,e,a(this,ts),a(this,ih),a(this,nh),a(this,sh))},ZT=function(e,t){const s=a(this,Zs);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},ek=function(e,t){const s=a(this,he).subarray(4,6),i=a(this,he).subarray(16,18),[r,o,l,c]=a(this,ts),[u,h,d,f]=E(this,_t,xd).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-o)/c],t),t+=24},w(nr,Dp,8),w(nr,Dy,2),w(nr,Ny,a(nr,Dp)+a(nr,Dy));let py=nr;var oh,Nl,Lr,Np,ns,Ip,dt,Iy,nk;class tk extends G{constructor(t,s,i,r,o,l){super();w(this,Iy);w(this,oh);w(this,Nl,new Float32Array(4));w(this,Lr);w(this,Np);w(this,ns);w(this,Ip);w(this,dt);p(this,dt,t),p(this,ns,s),p(this,oh,i),p(this,Ip,r),p(this,Lr,o),p(this,Np,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],E(this,Iy,nk).call(this,l);const[c,u,h,d]=a(this,Nl);for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,g=s.length;f<g;f+=2)s[f]=(s[f]-c)/h,s[f+1]=(s[f+1]-u)/d}toSVGPath(){const t=[`M${a(this,dt)[4]} ${a(this,dt)[5]}`];for(let s=6,i=a(this,dt).length;s<i;s+=6){if(isNaN(a(this,dt)[s])){t.push(`L${a(this,dt)[s+4]} ${a(this,dt)[s+5]}`);continue}t.push(`C${a(this,dt)[s]} ${a(this,dt)[s+1]} ${a(this,dt)[s+2]} ${a(this,dt)[s+3]} ${a(this,dt)[s+4]} ${a(this,dt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],o){const l=i-t,c=r-s;let u,h;switch(o){case 0:u=G._rescale(a(this,dt),t,r,l,-c),h=G._rescale(a(this,ns),t,r,l,-c);break;case 90:u=G._rescaleAndSwap(a(this,dt),t,s,l,c),h=G._rescaleAndSwap(a(this,ns),t,s,l,c);break;case 180:u=G._rescale(a(this,dt),i,s,-l,c),h=G._rescale(a(this,ns),i,s,-l,c);break;case 270:u=G._rescaleAndSwap(a(this,dt),i,r,-l,-c),h=G._rescaleAndSwap(a(this,ns),i,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return a(this,Nl)}newOutliner(t,s,i,r,o,l=0){return new py(t,s,i,r,o,l)}getNewOutline(t,s){const[i,r,o,l]=a(this,Nl),[c,u,h,d]=a(this,oh),f=o*h,g=l*d,m=i*h+c,v=r*d+u,A=this.newOutliner({x:a(this,ns)[0]*f+m,y:a(this,ns)[1]*g+v},a(this,oh),a(this,Ip),t,a(this,Np),s??a(this,Lr));for(let y=2;y<a(this,ns).length;y+=2)A.add({x:a(this,ns)[y]*f+m,y:a(this,ns)[y+1]*g+v});return A.getOutlines()}}oh=new WeakMap,Nl=new WeakMap,Lr=new WeakMap,Np=new WeakMap,ns=new WeakMap,Ip=new WeakMap,dt=new WeakMap,Iy=new WeakSet,nk=function(t){const s=a(this,dt);let i=s[4],r=s[5];const o=[i,r,i,r];let l=i,c=r,u=i,h=r;const d=t?Math.max:Math.min,f=new Float32Array(4);for(let m=6,v=s.length;m<v;m+=6){const A=s[m+4],y=s[m+5];isNaN(s[m])?(q.pointBoundingBox(A,y,o),c>y?(l=A,c=y):c===y&&(l=d(l,A)),h<y?(u=A,h=y):h===y&&(u=d(u,A))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,q.bezierBoundingBox(i,r,...s.slice(m,m+6),f),q.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(l=f[0],c=f[1]):c===f[1]&&(l=d(l,f[0])),h<f[3]?(u=f[2],h=f[3]):h===f[3]&&(u=d(u,f[2]))),i=A,r=y}const g=a(this,Nl);g[0]=o[0]-a(this,Lr),g[1]=o[1]-a(this,Lr),g[2]=o[2]-o[0]+2*a(this,Lr),g[3]=o[3]-o[1]+2*a(this,Lr),this.firstPoint=[l,c],this.lastPoint=[u,h]};var Op,Fp,Bp,Vo,ei,An,sk,Sm,ik,rk,cb;class lb{constructor(e,t=0,s=0,i=!0){w(this,An);w(this,Op);w(this,Fp);w(this,Bp);w(this,Vo,[]);w(this,ei,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:v,y:A,width:y,height:b}of e){const S=Math.floor((v-t)/o)*o,x=Math.ceil((v+y+t)/o)*o,_=Math.floor((A-t)/o)*o,T=Math.ceil((A+b+t)/o)*o,k=[S,_,T,!0],R=[x,_,T,!1];a(this,Vo).push(k,R),q.rectBoundingBox(S,_,x,T,r)}const l=r[2]-r[0]+2*s,c=r[3]-r[1]+2*s,u=r[0]-s,h=r[1]-s;let d=i?-1/0:1/0,f=1/0;const g=a(this,Vo).at(i?-1:-2),m=[g[0],g[2]];for(const v of a(this,Vo)){const[A,y,b,S]=v;!S&&i?y<f?(f=y,d=A):y===f&&(d=Math.max(d,A)):S&&!i&&(y<f?(f=y,d=A):y===f&&(d=Math.min(d,A))),v[0]=(A-u)/l,v[1]=(y-h)/c,v[2]=(b-h)/c}p(this,Op,new Float32Array([u,h,l,c])),p(this,Fp,[d,f]),p(this,Bp,m)}getOutlines(){a(this,Vo).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of a(this,Vo))t[3]?(e.push(...E(this,An,cb).call(this,t)),E(this,An,ik).call(this,t)):(E(this,An,rk).call(this,t),e.push(...E(this,An,cb).call(this,t)));return E(this,An,sk).call(this,e)}}Op=new WeakMap,Fp=new WeakMap,Bp=new WeakMap,Vo=new WeakMap,ei=new WeakMap,An=new WeakSet,sk=function(e){const t=[],s=new Set;for(const o of e){const[l,c,u]=o;t.push([l,c,o],[l,u,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[l,c,u,h,d]=o;s.delete(o);let f=l,g=c;for(r=[l,u],i.push(r);;){let m;if(s.has(h))m=h;else if(s.has(d))m=d;else break;s.delete(m),[l,c,u,h,d]=m,f!==l&&(r.push(f,g,l,g===c?c:u),f=l),g=g===c?u:c}r.push(f,g)}return new rI(i,a(this,Op),a(this,Fp),a(this,Bp))},Sm=function(e){const t=a(this,ei);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,o=t[r][0];if(o===e)return r;o<e?s=r+1:i=r-1}return i+1},ik=function([,e,t]){const s=E(this,An,Sm).call(this,e);a(this,ei).splice(s,0,[e,t])},rk=function([,e,t]){const s=E(this,An,Sm).call(this,e);for(let i=s;i<a(this,ei).length;i++){const[r,o]=a(this,ei)[i];if(r!==e)break;if(r===e&&o===t){a(this,ei).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=a(this,ei)[i];if(r!==e)break;if(r===e&&o===t){a(this,ei).splice(i,1);return}}},cb=function(e){const[t,s,i]=e,r=[[t,s,i]],o=E(this,An,Sm).call(this,i);for(let l=0;l<o;l++){const[c,u]=a(this,ei)[l];for(let h=0,d=r.length;h<d;h++){const[,f,g]=r[h];if(!(u<=f||g<=c)){if(f>=c){if(g>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,g>u&&r.push([t,u,g])}}}return r};var jp,ah;class rI extends G{constructor(t,s,i,r){super();w(this,jp);w(this,ah);p(this,ah,t),p(this,jp,s),this.firstPoint=i,this.lastPoint=r}toSVGPath(){const t=[];for(const s of a(this,ah)){let[i,r]=s;t.push(`M${i} ${r}`);for(let o=2;o<s.length;o+=2){const l=s[o],c=s[o+1];l===i?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${l}`),i=l)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],o){const l=[],c=i-t,u=r-s;for(const h of a(this,ah)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;l.push(d)}return l}get box(){return a(this,jp)}get classNamesForOutlining(){return["highlightOutline"]}}jp=new WeakMap,ah=new WeakMap;class ub extends py{newFreeDrawOutline(e,t,s,i,r,o){return new oI(e,t,s,i,r,o)}}class oI extends tk{newOutliner(e,t,s,i,r,o=0){return new ub(e,t,s,i,r,o)}}var lh,zp,Mr,Il,Up,Mn,Hp,$p,Ol,ss,is,Ht,ch,uh,rn,hh,Rs,Vp,ce,hb,Am,ok,ak,lk,db,La,Is,Ec,ck,Em,xm,uk,hk,dk,fk,pk;const Ae=class Ae extends ze{constructor(t){super({...t,name:"highlightEditor"});w(this,ce);w(this,lh,null);w(this,zp,0);w(this,Mr);w(this,Il,null);w(this,Up,null);w(this,Mn,null);w(this,Hp,null);w(this,$p,0);w(this,Ol,null);w(this,ss,null);w(this,is,null);w(this,Ht,!1);w(this,ch,null);w(this,uh,null);w(this,rn,null);w(this,hh,"");w(this,Rs);w(this,Vp,"");this.color=t.color||Ae._defaultColor,p(this,Rs,t.thickness||Ae._defaultThickness),this.opacity=t.opacity||Ae._defaultOpacity,p(this,Mr,t.boxes||null),p(this,Vp,t.methodOfCreation||""),p(this,hh,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(p(this,Ht,!0),E(this,ce,Am).call(this,t),E(this,ce,La).call(this)):a(this,Mr)&&(p(this,lh,t.anchorNode),p(this,zp,t.anchorOffset),p(this,Hp,t.focusNode),p(this,$p,t.focusOffset),E(this,ce,hb).call(this),E(this,ce,La).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ae.prototype;return le(this,"_keyboardManager",new ag([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Ht)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,Rs),methodOfCreation:a(this,Vp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;ze.initialize(t,s),Ae._defaultColor||(Ae._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case fe.HIGHLIGHT_COLOR:Ae._defaultColor=s;break;case fe.HIGHLIGHT_THICKNESS:Ae._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return a(this,uh)}get commentButtonPosition(){return a(this,ch)}updateParams(t,s){switch(t){case fe.HIGHLIGHT_COLOR:E(this,ce,ok).call(this,s);break;case fe.HIGHLIGHT_THICKNESS:E(this,ce,ak).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[fe.HIGHLIGHT_COLOR,Ae._defaultColor],[fe.HIGHLIGHT_THICKNESS,Ae._defaultThickness]]}get propertiesToUpdate(){return[[fe.HIGHLIGHT_COLOR,this.color||Ae._defaultColor],[fe.HIGHLIGHT_THICKNESS,a(this,Rs)||Ae._defaultThickness],[fe.HIGHLIGHT_FREE,a(this,Ht)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(a(this,is),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=a(this,Up))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",p(this,Up,new df({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,ce,xm).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,E(this,ce,xm).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){E(this,ce,db).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,ce,La).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?E(this,ce,db).call(this):t&&(E(this,ce,La).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,o,l;const{drawLayer:s}=this.parent;let i;a(this,Ht)?(t=(t-this.rotation+360)%360,i=E(r=Ae,Is,Ec).call(r,a(this,ss).box,t)):i=E(o=Ae,Is,Ec).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(a(this,is),{bbox:i,root:{"data-main-rotation":t}}),s.updateProperties(a(this,rn),{bbox:E(l=Ae,Is,Ec).call(l,a(this,Mn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();a(this,hh)&&(t.setAttribute("aria-label",a(this,hh)),t.setAttribute("role","mark")),a(this,Ht)?t.classList.add("free"):this.div.addEventListener("keydown",E(this,ce,ck).bind(this),{signal:this._uiManager._signal});const s=p(this,Ol,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=a(this,Il),this.setDims(this.width,this.height),I_(this,a(this,Ol),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(a(this,rn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(a(this,rn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:E(this,ce,Em).call(this,!0);break;case 1:case 3:E(this,ce,Em).call(this,!1);break}}select(){var t;super.select(),a(this,rn)&&((t=this.parent)==null||t.drawLayer.updateProperties(a(this,rn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),a(this,rn)&&((t=this.parent)==null||t.drawLayer.updateProperties(a(this,rn),{rootClass:{selected:!1}}),a(this,Ht)||E(this,ce,Em).call(this,!1))}get _mustFixPosition(){return!a(this,Ht)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(a(this,is),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(a(this,rn),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:i,x:r,y:o}){const{x:l,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),g=m=>{d.abort(),E(this,Is,fk).call(this,t,m)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",et,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ms,{signal:f}),i.addEventListener("pointermove",E(this,Is,dk).bind(this,t),{signal:f}),this._freeHighlight=new ub({x:r,y:o},[l,c,u,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,i){var v,A,y,b;let r=null;if(t instanceof HT){const{data:{quadPoints:S,rect:x,rotation:_,id:T,color:k,opacity:R,popupRef:D,richText:M,contentsObj:I,creationDate:H,modificationDate:W},parent:{page:{pageNumber:z}}}=t;r=t={annotationType:ne.HIGHLIGHT,color:Array.from(k),opacity:R,quadPoints:S,boxes:null,pageIndex:z-1,rect:x.slice(0),rotation:_,annotationElementId:T,id:T,deleted:!1,popupRef:D,richText:M,comment:(I==null?void 0:I.str)||null,creationDate:H,modificationDate:W}}else if(t instanceof qS){const{data:{inkLists:S,rect:x,rotation:_,id:T,color:k,borderStyle:{rawWidth:R},popupRef:D,richText:M,contentsObj:I,creationDate:H,modificationDate:W},parent:{page:{pageNumber:z}}}=t;r=t={annotationType:ne.HIGHLIGHT,color:Array.from(k),thickness:R,inkLists:S,boxes:null,pageIndex:z-1,rect:x.slice(0),rotation:_,annotationElementId:T,id:T,deleted:!1,popupRef:D,richText:M,comment:(I==null?void 0:I.str)||null,creationDate:H,modificationDate:W}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=t,h=await super.deserialize(t,s,i);h.color=q.makeHexColor(...o),h.opacity=u||1,c&&p(h,Rs,t.thickness),h._initialData=r,t.comment&&h.setCommentData(t);const[d,f]=h.pageDimensions,[g,m]=h.pageTranslation;if(l){const S=p(h,Mr,[]);for(let x=0;x<l.length;x+=8)S.push({x:(l[x]-g)/d,y:1-(l[x+1]-m)/f,width:(l[x+2]-l[x])/d,height:(l[x+1]-l[x+5])/f});E(v=h,ce,hb).call(v),E(A=h,ce,La).call(A),h.rotate(h.rotation)}else if(c){p(h,Ht,!0);const S=c[0],x={x:S[0]-g,y:f-(S[1]-m)},_=new ub(x,[0,0,d,f],1,a(h,Rs)/2,!0,.001);for(let R=0,D=S.length;R<D;R+=2)x.x=S[R]-g,x.y=f-(S[R+1]-m),_.add(x);const{id:T,clipPathId:k}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);E(y=h,ce,Am).call(y,{highlightOutlines:_.getOutlines(),highlightId:T,clipPathId:k}),E(b=h,ce,La).call(b),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=ze._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:s,opacity:this.opacity,thickness:a(this,Rs),quadPoints:E(this,ce,uk).call(this),outlines:E(this,ce,hk).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!E(this,ce,pk).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};lh=new WeakMap,zp=new WeakMap,Mr=new WeakMap,Il=new WeakMap,Up=new WeakMap,Mn=new WeakMap,Hp=new WeakMap,$p=new WeakMap,Ol=new WeakMap,ss=new WeakMap,is=new WeakMap,Ht=new WeakMap,ch=new WeakMap,uh=new WeakMap,rn=new WeakMap,hh=new WeakMap,Rs=new WeakMap,Vp=new WeakMap,ce=new WeakSet,hb=function(){const t=new lb(a(this,Mr),.001);p(this,ss,t.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,ss).box;const s=new lb(a(this,Mr),.0025,.001,this._uiManager.direction==="ltr");p(this,Mn,s.getOutlines());const{firstPoint:i}=a(this,ss);p(this,ch,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:r}=a(this,Mn);p(this,uh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Am=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var f,g;if(p(this,ss,t),p(this,Mn,t.getNewOutline(a(this,Rs)/2+1.5,.0025)),s>=0)p(this,is,s),p(this,Il,i),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),p(this,rn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Mn).box,path:{d:a(this,Mn).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,is),{bbox:E(f=Ae,Is,Ec).call(f,a(this,ss).box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,rn),{bbox:E(g=Ae,Is,Ec).call(g,a(this,Mn).box,m),path:{d:a(this,Mn).toSVGPath()}})}const[o,l,c,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[m,v]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*v/m,this.height=u*m/v;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[m,v]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*v/m,this.height=u*m/v;break}}const{firstPoint:h}=t;p(this,ch,[(h[0]-o)/c,(h[1]-l)/u]);const{lastPoint:d}=a(this,Mn);p(this,uh,[(d[0]-o)/c,(d[1]-l)/u])},ok=function(t){const s=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:s.bind(this,t,Ae._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:fe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},ak=function(t){const s=a(this,Rs),i=r=>{p(this,Rs,r),E(this,ce,lk).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:fe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},lk=function(t){a(this,Ht)&&(E(this,ce,Am).call(this,{highlightOutlines:a(this,ss).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},db=function(){a(this,is)===null||!this.parent||(this.parent.drawLayer.remove(a(this,is)),p(this,is,null),this.parent.drawLayer.remove(a(this,rn)),p(this,rn,null))},La=function(t=this.parent){a(this,is)===null&&({id:bt(this,is)._,clipPathId:bt(this,Il)._}=t.drawLayer.draw({bbox:a(this,ss).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:a(this,Ht)},path:{d:a(this,ss).toSVGPath()}},!1,!0),p(this,rn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Ht)},bbox:a(this,Mn).box,path:{d:a(this,Mn).toSVGPath()}},a(this,Ht))),a(this,Ol)&&(a(this,Ol).style.clipPath=a(this,Il)))},Is=new WeakSet,Ec=function([t,s,i,r],o){switch(o){case 90:return[1-s-r,t,r,i];case 180:return[1-t-i,1-s-r,i,r];case 270:return[s,1-t-i,r,i]}return[t,s,i,r]},ck=function(t){Ae._keyboardManager.exec(this,t)},Em=function(t){if(!a(this,lh))return;const s=window.getSelection();t?s.setPosition(a(this,lh),a(this,zp)):s.setPosition(a(this,Hp),a(this,$p))},xm=function(){return a(this,Ht)?this.rotation:0},uk=function(){if(a(this,Ht))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,o=a(this,Mr),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const g=u*t+i,m=(1-h)*s+r;l[c]=l[c+4]=g,l[c+1]=l[c+3]=m,l[c+2]=l[c+6]=g+d*t,l[c+5]=l[c+7]=m-f*s,c+=8}return l},hk=function(t){return a(this,ss).serialize(t,E(this,ce,xm).call(this))},dk=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},fk=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},pk=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((i,r)=>i!==s[r])},w(Ae,Is),O(Ae,"_defaultColor",null),O(Ae,"_defaultOpacity",1),O(Ae,"_defaultThickness",12),O(Ae,"_type","highlight"),O(Ae,"_editorType",ne.HIGHLIGHT),O(Ae,"_freeHighlightId",-1),O(Ae,"_freeHighlight",null),O(Ae,"_freeHighlightClipId","");let gy=Ae;var Fl;class gk{constructor(){w(this,Fl,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){a(this,Fl)[e]=t}toSVGProperties(){const e=a(this,Fl);return p(this,Fl,Object.create(null)),{root:e}}reset(){p(this,Fl,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Fe("Not implemented")}}Fl=new WeakMap;var rs,dh,Rt,Bl,jl,Wo,Go,qo,zl,ye,fb,pb,gb,Cd,mk,Cm,_d,xc;const Y=class Y extends ze{constructor(t){super(t);w(this,ye);w(this,rs,null);w(this,dh);O(this,"_colorPicker",null);O(this,"_drawId",null);p(this,dh,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(E(this,ye,fb).call(this,t),E(this,ye,Cd).call(this))}static _mergeSVGProperties(t,s){const i=new Set(Object.keys(t));for(const[r,o]of Object.entries(s))i.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Fe("Not implemented")}static get typesMap(){Fe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(a(Y,Rt).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,s[r]]);return t}_updateProperty(t,s,i){const r=this._drawingOptions,o=r[s],l=c=>{var h;r.updateProperty(s,c);const u=a(this,rs).updateProperty(s,c);u&&E(this,ye,_d).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Y._mergeSVGProperties(a(this,rs).getPathResizingSVGProperties(E(this,ye,Cm).call(this)),{bbox:E(this,ye,xc).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Y._mergeSVGProperties(a(this,rs).getPathResizedSVGProperties(E(this,ye,Cm).call(this)),{bbox:E(this,ye,xc).call(this)}))}_onTranslating(t,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:E(this,ye,xc).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Y._mergeSVGProperties(a(this,rs).getPathTranslatedSVGProperties(E(this,ye,Cm).call(this),this.parentDimensions),{bbox:E(this,ye,xc).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,dh)&&(p(this,dh,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){E(this,ye,gb).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,ye,Cd).call(this),E(this,ye,_d).call(this,a(this,rs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),E(this,ye,gb).call(this)):t&&(this._uiManager.addShouldRescale(this),E(this,ye,Cd).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Y._mergeSVGProperties({bbox:E(this,ye,xc).call(this)},a(this,rs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,ye,_d).call(this,a(this,rs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),i}static createDrawerInstance(t,s,i,r,o){Fe("Not implemented")}static startDrawing(t,s,i,r){var A;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(a(Y,Go)&&a(Y,Go)!==h)return;const{viewport:{rotation:d}}=t,{width:f,height:g}=o.getBoundingClientRect(),m=p(Y,Bl,new AbortController),v=t.combinedSignal(m);if(a(Y,Wo)||p(Y,Wo,u),a(Y,Go)??p(Y,Go,h),window.addEventListener("pointerup",y=>{var b;a(Y,Wo)===y.pointerId?this._endDraw(y):(b=a(Y,qo))==null||b.delete(y.pointerId)},{signal:v}),window.addEventListener("pointercancel",y=>{var b;a(Y,Wo)===y.pointerId?this._currentParent.endDrawingSession():(b=a(Y,qo))==null||b.delete(y.pointerId)},{signal:v}),window.addEventListener("pointerdown",y=>{a(Y,Go)===y.pointerType&&((a(Y,qo)||p(Y,qo,new Set)).add(y.pointerId),a(Y,Rt).isCancellable()&&(a(Y,Rt).removeLastElement(),a(Y,Rt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",ms,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",y=>{y.timeStamp===a(Y,zl)&&et(y)},{signal:v}),t.toggleDrawing(),(A=s._editorUndoBar)==null||A.hide(),a(Y,Rt)){t.drawLayer.updateProperties(this._currentDrawId,a(Y,Rt).startNew(l,c,f,g,d));return}s.updateUIForDefaultProperties(this),p(Y,Rt,this.createDrawerInstance(l,c,f,g,d)),p(Y,jl,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(a(Y,jl).toSVGProperties(),a(Y,Rt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(p(Y,zl,-1),!a(Y,Rt))return;const{offsetX:s,offsetY:i,pointerId:r}=t;if(a(Y,Wo)===r){if(((o=a(Y,qo))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(Y,Rt).add(s,i)),p(Y,zl,t.timeStamp),et(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,p(Y,Rt,null),p(Y,jl,null),p(Y,Go,null),p(Y,zl,NaN)),a(Y,Bl)&&(a(Y,Bl).abort(),p(Y,Bl,null),p(Y,Wo,NaN),p(Y,qo,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,a(Y,Rt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=a(Y,Rt),r=this._currentDrawId,o=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:fe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(fe.DRAW_STEP),!a(Y,Rt).isEmpty()){const{pageDimensions:[i,r],scale:o}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(Y,Rt).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(Y,jl),mustBeCommitted:!t});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,i,r,o,l){Fe("Not implemented")}static async deserialize(t,s,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=s.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,t),h=await super.deserialize(t,s,i);return h.createDrawingOptions(t),E(d=h,ye,fb).call(d,{drawOutlines:u}),E(f=h,ye,Cd).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[s,i]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,rs).serialize([s,i,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};rs=new WeakMap,dh=new WeakMap,Rt=new WeakMap,Bl=new WeakMap,jl=new WeakMap,Wo=new WeakMap,Go=new WeakMap,qo=new WeakMap,zl=new WeakMap,ye=new WeakSet,fb=function({drawOutlines:t,drawId:s,drawingOptions:i}){p(this,rs,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=E(this,ye,pb).call(this,t,this.parent),E(this,ye,_d).call(this,t.box)},pb=function(t,s){const{id:i}=s.drawLayer.draw(Y._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},gb=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Cd=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,ye,pb).call(this,a(this,rs),t)}},mk=function([t,s,i,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[s,1-t,i*(l/o),r*(o/l)];case 180:return[1-t,1-s,i,r];case 270:return[1-s,t,i*(l/o),r*(o/l)];default:return[t,s,i,r]}},Cm=function(){const{x:t,y:s,width:i,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-s,t,i*(o/l),r*(l/o)];case 180:return[1-t,1-s,i,r];case 270:return[s,1-t,i*(o/l),r*(l/o)];default:return[t,s,i,r]}},_d=function(t){[this.x,this.y,this.width,this.height]=E(this,ye,mk).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},xc=function(){const{x:t,y:s,width:i,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-s-r,t,r,i];case 2:return[1-t-i,1-s-r,i,r];case 3:return[s,1-t-i,r,i];case 4:return[t,s-i*(c/u),r*(u/c),i*(c/u)];case 5:return[1-s,t,i*(c/u),r*(u/c)];case 6:return[1-t-r*(u/c),1-s,r*(u/c),i*(c/u)];case 7:return[s-i*(c/u),1-t-r*(u/c),i*(c/u),r*(u/c)];case 8:return[t-i,s-r,i,r];case 9:return[1-s,t-i,r,i];case 10:return[1-t,1-s,i,r];case 11:return[s-r,1-t,r,i];case 12:return[t-r*(u/c),s,r*(u/c),i*(c/u)];case 13:return[1-s-i*(c/u),t-r*(u/c),i*(c/u),r*(u/c)];case 14:return[1-t,1-s-i*(c/u),r*(u/c),i*(c/u)];case 15:return[s,1-t,i*(c/u),r*(u/c)];default:return[t,s,i,r]}},O(Y,"_currentDrawId",-1),O(Y,"_currentParent",null),w(Y,Rt,null),w(Y,Bl,null),w(Y,jl,null),w(Y,Wo,NaN),w(Y,Go,null),w(Y,qo,null),w(Y,zl,NaN),O(Y,"_INNER_MARGIN",3);let my=Y;var Fi,Lt,Mt,Ul,fh,fn,$t,Ls,Hl,$l,Vl,ph,_m;class aI{constructor(e,t,s,i,r,o){w(this,ph);w(this,Fi,new Float64Array(6));w(this,Lt);w(this,Mt);w(this,Ul);w(this,fh);w(this,fn);w(this,$t,"");w(this,Ls,0);w(this,Hl,new cg);w(this,$l);w(this,Vl);p(this,$l,s),p(this,Vl,i),p(this,Ul,r),p(this,fh,o),[e,t]=E(this,ph,_m).call(this,e,t);const l=p(this,Lt,[NaN,NaN,NaN,NaN,e,t]);p(this,fn,[e,t]),p(this,Mt,[{line:l,points:a(this,fn)}]),a(this,Fi).set(l,0)}updateProperty(e,t){e==="stroke-width"&&p(this,fh,t)}isEmpty(){return!a(this,Mt)||a(this,Mt).length===0}isCancellable(){return a(this,fn).length<=10}add(e,t){[e,t]=E(this,ph,_m).call(this,e,t);const[s,i,r,o]=a(this,Fi).subarray(2,6),l=e-r,c=t-o;return Math.hypot(a(this,$l)*l,a(this,Vl)*c)<=2?null:(a(this,fn).push(e,t),isNaN(s)?(a(this,Fi).set([r,o,e,t],2),a(this,Lt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Fi)[0])&&a(this,Lt).splice(6,6),a(this,Fi).set([s,i,r,o,e,t],0),a(this,Lt).push(...G.createBezierPoints(s,i,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(a(this,fn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){p(this,$l,s),p(this,Vl,i),p(this,Ul,r),[e,t]=E(this,ph,_m).call(this,e,t);const o=p(this,Lt,[NaN,NaN,NaN,NaN,e,t]);p(this,fn,[e,t]);const l=a(this,Mt).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,Mt).push({line:o,points:a(this,fn)}),a(this,Fi).set(o,0),p(this,Ls,0),this.toSVGPath(),null}getLastElement(){return a(this,Mt).at(-1)}setLastElement(e){return a(this,Mt)?(a(this,Mt).push(e),p(this,Lt,e.line),p(this,fn,e.points),p(this,Ls,0),{path:{d:this.toSVGPath()}}):a(this,Hl).setLastElement(e)}removeLastElement(){if(!a(this,Mt))return a(this,Hl).removeLastElement();a(this,Mt).pop(),p(this,$t,"");for(let e=0,t=a(this,Mt).length;e<t;e++){const{line:s,points:i}=a(this,Mt)[e];p(this,Lt,s),p(this,fn,i),p(this,Ls,0),this.toSVGPath()}return{path:{d:a(this,$t)}}}toSVGPath(){const e=G.svgRound(a(this,Lt)[4]),t=G.svgRound(a(this,Lt)[5]);if(a(this,fn).length===2)return p(this,$t,`${a(this,$t)} M ${e} ${t} Z`),a(this,$t);if(a(this,fn).length<=6){const i=a(this,$t).lastIndexOf("M");p(this,$t,`${a(this,$t).slice(0,i)} M ${e} ${t}`),p(this,Ls,6)}if(a(this,fn).length===4){const i=G.svgRound(a(this,Lt)[10]),r=G.svgRound(a(this,Lt)[11]);return p(this,$t,`${a(this,$t)} L ${i} ${r}`),p(this,Ls,12),a(this,$t)}const s=[];a(this,Ls)===0&&(s.push(`M ${e} ${t}`),p(this,Ls,6));for(let i=a(this,Ls),r=a(this,Lt).length;i<r;i+=6){const[o,l,c,u,h,d]=a(this,Lt).slice(i,i+6).map(G.svgRound);s.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}return p(this,$t,a(this,$t)+s.join(" ")),p(this,Ls,a(this,Lt).length),a(this,$t)}getOutlines(e,t,s,i){const r=a(this,Mt).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Hl).build(a(this,Mt),e,t,s,a(this,Ul),a(this,fh),i),p(this,Fi,null),p(this,Lt,null),p(this,Mt,null),p(this,$t,null),a(this,Hl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Fi=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,Ul=new WeakMap,fh=new WeakMap,fn=new WeakMap,$t=new WeakMap,Ls=new WeakMap,Hl=new WeakMap,$l=new WeakMap,Vl=new WeakMap,ph=new WeakSet,_m=function(e,t){return G._normalizePoint(e,t,a(this,$l),a(this,Vl),a(this,Ul))};var pn,Wp,Gp,os,Bi,ji,gh,mh,Wl,Gt,Zi,yk,vk,wk;class cg extends G{constructor(){super(...arguments);w(this,Gt);w(this,pn);w(this,Wp,0);w(this,Gp);w(this,os);w(this,Bi);w(this,ji);w(this,gh);w(this,mh);w(this,Wl)}build(t,s,i,r,o,l,c){p(this,Bi,s),p(this,ji,i),p(this,gh,r),p(this,mh,o),p(this,Wl,l),p(this,Gp,c??0),p(this,os,t),E(this,Gt,vk).call(this)}get thickness(){return a(this,Wl)}setLastElement(t){return a(this,os).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,os).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of a(this,os)){if(t.push(`M${G.svgRound(s[4])} ${G.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${G.svgRound(s[10])} ${G.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[o,l,c,u,h,d]=s.subarray(i,i+6).map(G.svgRound);t.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}}return t.join("")}serialize([t,s,i,r],o){const l=[],c=[],[u,h,d,f]=E(this,Gt,yk).call(this);let g,m,v,A,y,b,S,x,_;switch(a(this,mh)){case 0:_=G._rescale,g=t,m=s+r,v=i,A=-r,y=t+u*i,b=s+(1-h-f)*r,S=t+(u+d)*i,x=s+(1-h)*r;break;case 90:_=G._rescaleAndSwap,g=t,m=s,v=i,A=r,y=t+h*i,b=s+u*r,S=t+(h+f)*i,x=s+(u+d)*r;break;case 180:_=G._rescale,g=t+i,m=s,v=-i,A=r,y=t+(1-u-d)*i,b=s+h*r,S=t+(1-u)*i,x=s+(h+f)*r;break;case 270:_=G._rescaleAndSwap,g=t+i,m=s+r,v=-i,A=-r,y=t+(1-h-f)*i,b=s+(1-u-d)*r,S=t+(1-h)*i,x=s+(1-u)*r;break}for(const{line:T,points:k}of a(this,os))l.push(_(T,g,m,v,A,o?new Array(T.length):null)),c.push(_(k,g,m,v,A,o?new Array(k.length):null));return{lines:l,points:c,rect:[y,b,S,x]}}static deserialize(t,s,i,r,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,g,m,v,A;switch(u){case 0:A=G._rescale,f=-t/i,g=s/r+1,m=1/i,v=-1/r;break;case 90:A=G._rescaleAndSwap,f=-s/r,g=-t/i,m=1/r,v=1/i;break;case 180:A=G._rescale,f=t/i+1,g=-s/r,m=-1/i,v=1/r;break;case 270:A=G._rescaleAndSwap,f=s/r+1,g=t/i+1,m=-1/r,v=-1/i;break}if(!l){l=[];for(const b of c){const S=b.length;if(S===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(S===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const x=new Float32Array(3*(S-2));l.push(x);let[_,T,k,R]=b.subarray(0,4);x.set([NaN,NaN,NaN,NaN,_,T],0);for(let D=4;D<S;D+=2){const M=b[D],I=b[D+1];x.set(G.createBezierPoints(_,T,k,R,M,I),(D-2)*3),[_,T,k,R]=[k,R,M,I]}}}for(let b=0,S=l.length;b<S;b++)d.push({line:A(l[b].map(x=>x??NaN),f,g,m,v),points:A(c[b].map(x=>x??NaN),f,g,m,v)});const y=new this.prototype.constructor;return y.build(d,i,r,1,u,h,o),y}get box(){return a(this,pn)}updateProperty(t,s){return t==="stroke-width"?E(this,Gt,wk).call(this,s):null}updateParentDimensions([t,s],i){const[r,o]=E(this,Gt,Zi).call(this);p(this,Bi,t),p(this,ji,s),p(this,gh,i);const[l,c]=E(this,Gt,Zi).call(this),u=l-r,h=c-o,d=a(this,pn);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(t){return p(this,Wp,t),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,pn).map(G.svgRound).join(" ")}get defaultProperties(){const[t,s]=a(this,pn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${G.svgRound(t)} ${G.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=a(this,pn);let i=0,r=0,o=0,l=0,c=0,u=0;switch(a(this,Wp)){case 90:r=s/t,o=-t/s,c=t;break;case 180:i=-1,l=-1,c=t,u=s;break;case 270:r=-s/t,o=t/s,u=s;break;default:return""}return`matrix(${i} ${r} ${o} ${l} ${G.svgRound(c)} ${G.svgRound(u)})`}getPathResizingSVGProperties([t,s,i,r]){const[o,l]=E(this,Gt,Zi).call(this),[c,u,h,d]=a(this,pn);if(Math.abs(h-o)<=G.PRECISION||Math.abs(d-l)<=G.PRECISION){const A=t+i/2-(c+h/2),y=s+r/2-(u+d/2);return{path:{"transform-origin":`${G.svgRound(t)} ${G.svgRound(s)}`,transform:`${this.rotationTransform} translate(${A} ${y})`}}}const f=(i-2*o)/(h-2*o),g=(r-2*l)/(d-2*l),m=h/i,v=d/r;return{path:{"transform-origin":`${G.svgRound(c)} ${G.svgRound(u)}`,transform:`${this.rotationTransform} scale(${m} ${v}) translate(${G.svgRound(o)} ${G.svgRound(l)}) scale(${f} ${g}) translate(${G.svgRound(-o)} ${G.svgRound(-l)})`}}}getPathResizedSVGProperties([t,s,i,r]){const[o,l]=E(this,Gt,Zi).call(this),c=a(this,pn),[u,h,d,f]=c;if(c[0]=t,c[1]=s,c[2]=i,c[3]=r,Math.abs(d-o)<=G.PRECISION||Math.abs(f-l)<=G.PRECISION){const y=t+i/2-(u+d/2),b=s+r/2-(h+f/2);for(const{line:S,points:x}of a(this,os))G._translate(S,y,b,S),G._translate(x,y,b,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${G.svgRound(t)} ${G.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(i-2*o)/(d-2*o),m=(r-2*l)/(f-2*l),v=-g*(u+o)+t+o,A=-m*(h+l)+s+l;if(g!==1||m!==1||v!==0||A!==0)for(const{line:y,points:b}of a(this,os))G._rescale(y,v,A,g,m,y),G._rescale(b,v,A,g,m,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${G.svgRound(t)} ${G.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],i){const[r,o]=i,l=a(this,pn),c=t-l[0],u=s-l[1];if(a(this,Bi)===r&&a(this,ji)===o)for(const{line:h,points:d}of a(this,os))G._translate(h,c,u,h),G._translate(d,c,u,d);else{const h=a(this,Bi)/r,d=a(this,ji)/o;p(this,Bi,r),p(this,ji,o);for(const{line:f,points:g}of a(this,os))G._rescale(f,c,u,h,d,f),G._rescale(g,c,u,h,d,g);l[2]*=h,l[3]*=d}return l[0]=t,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${G.svgRound(t)} ${G.svgRound(s)}`}}}get defaultSVGProperties(){const t=a(this,pn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${G.svgRound(t[0])} ${G.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}pn=new WeakMap,Wp=new WeakMap,Gp=new WeakMap,os=new WeakMap,Bi=new WeakMap,ji=new WeakMap,gh=new WeakMap,mh=new WeakMap,Wl=new WeakMap,Gt=new WeakSet,Zi=function(t=a(this,Wl)){const s=a(this,Gp)+t/2*a(this,gh);return a(this,mh)%180===0?[s/a(this,Bi),s/a(this,ji)]:[s/a(this,ji),s/a(this,Bi)]},yk=function(){const[t,s,i,r]=a(this,pn),[o,l]=E(this,Gt,Zi).call(this,0);return[t+o,s+l,i-2*o,r-2*l]},vk=function(){const t=p(this,pn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,os)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6)q.pointBoundingBox(r[c],r[c+1],t);continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,g,m,v]=r.subarray(c,c+6);q.bezierBoundingBox(o,l,h,d,f,g,m,v,t),o=m,l=v}}const[s,i]=E(this,Gt,Zi).call(this);t[0]=on(t[0]-s,0,1),t[1]=on(t[1]-i,0,1),t[2]=on(t[2]+s,0,1),t[3]=on(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},wk=function(t){const[s,i]=E(this,Gt,Zi).call(this);p(this,Wl,t);const[r,o]=E(this,Gt,Zi).call(this),[l,c]=[r-s,o-i],u=a(this,pn);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class dv extends gk{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ze._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new dv(this._viewParameters);return e.updateAll(this),e}}var Oy,bk;const Uc=class Uc extends my{constructor(t){super({...t,name:"inkEditor"});w(this,Oy);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){ze.initialize(t,s),this._defaultDrawingOptions=new dv(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return le(this,"typesMap",new Map([[fe.INK_THICKNESS,"stroke-width"],[fe.INK_COLOR,"stroke"],[fe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,i,r,o){return new aI(t,s,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,i,r,o,l){return cg.deserialize(t,s,i,r,o,l)}static async deserialize(t,s,i){let r=null;if(t instanceof qS){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:g},popupRef:m,richText:v,contentsObj:A,creationDate:y,modificationDate:b},parent:{page:{pageNumber:S}}}=t;r=t={annotationType:ne.INK,color:Array.from(d),thickness:g,opacity:f,paths:{points:l},boxes:null,pageIndex:S-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:m,richText:v,comment:(A==null?void 0:A.str)||null,creationDate:y,modificationDate:b}}const o=await super.deserialize(t,s,i);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new fy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return fe.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:i}){this._drawingOptions=Uc.getDefaultDrawingOptions({stroke:q.makeHexColor(...t),"stroke-width":s,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(t),{color:ze._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:s,points:i}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!E(this,Oy,bk).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};Oy=new WeakSet,bk=function(t){const{color:s,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==s[c])||t.thickness!==i||t.opacity!==r||t.pageIndex!==o},O(Uc,"_type","ink"),O(Uc,"_editorType",ne.INK),O(Uc,"_defaultDrawingOptions",null);let mb=Uc;class yb extends cg{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const jg=8,sd=3;var Gl,Ee,vb,ti,Sk,Ak,wb,Tm,Ek,xk,Ck,bb,Sb,_k;class Vi{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},r,o,l,c){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${s} ${i} ${d}px ${t}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:m,actualBoundingBoxAscent:v,actualBoundingBoxDescent:A,fontBoundingBoxAscent:y,fontBoundingBoxDescent:b,width:S}=h.measureText(e),x=1.5,_=Math.ceil(Math.max(Math.abs(g)+Math.abs(m)||0,S)*x),T=Math.ceil(Math.max(Math.abs(v)+Math.abs(A)||d,Math.abs(y)+Math.abs(b)||d)*x);u=new OffscreenCanvas(_,T),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,_,T),h.fillStyle="black",h.fillText(e,_*(x-1)/2,T*(3-x)/2);const k=E(this,Ee,bb).call(this,h.getImageData(0,0,_,T).data),R=E(this,Ee,Ck).call(this,k),D=E(this,Ee,Sb).call(this,R),M=E(this,Ee,wb).call(this,k,_,T,D);return this.processDrawnLines({lines:{curves:M,width:_,height:T},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,r){const[o,l,c]=E(this,Ee,_k).call(this,e),[u,h]=E(this,Ee,xk).call(this,o,l,c,Math.hypot(l,c)*a(this,Gl).sigmaSFactor,a(this,Gl).sigmaR,a(this,Gl).kernelSize),d=E(this,Ee,Sb).call(this,h),f=E(this,Ee,wb).call(this,u,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:o,areContours:l}){i%180!==0&&([t,s]=[s,t]);const{curves:c,width:u,height:h}=e,d=e.thickness??0,f=[],g=Math.min(t/u,s/h),m=g/t,v=g/s,A=[];for(const{points:b}of c){const S=o?E(this,Ee,Ek).call(this,b):b;if(!S)continue;A.push(S);const x=S.length,_=new Float32Array(x),T=new Float32Array(3*(x===2?2:x-2));if(f.push({line:T,points:_}),x===2){_[0]=S[0]*m,_[1]=S[1]*v,T.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[k,R,D,M]=S;k*=m,R*=v,D*=m,M*=v,_.set([k,R,D,M],0),T.set([NaN,NaN,NaN,NaN,k,R],0);for(let I=4;I<x;I+=2){const H=_[I]=S[I]*m,W=_[I+1]=S[I+1]*v;T.set(G.createBezierPoints(k,R,D,M,H,W),(I-2)*3),[k,R,D,M]=[D,M,H,W]}}if(f.length===0)return null;const y=l?new yb:new cg;return y.build(f,t,s,1,i,l?0:d,r),{outline:y,newCurves:A,areContours:l,thickness:d,width:u,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:r}){let o=1/0,l=-1/0,c=0;for(const S of e){c+=S.length;for(let x=2,_=S.length;x<_;x++){const T=S[x]-S[x-2];o=Math.min(o,T),l=Math.max(l,T)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const h=e.length,d=jg+sd*h,f=new Uint32Array(d);let g=0;f[g++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*u.BYTES_PER_ELEMENT,f[g++]=0,f[g++]=i,f[g++]=r,f[g++]=t?0:1,f[g++]=Math.max(0,Math.floor(s??0)),f[g++]=h,f[g++]=u.BYTES_PER_ELEMENT;for(const S of e)f[g++]=S.length-2,f[g++]=S[0],f[g++]=S[1];const m=new CompressionStream("deflate-raw"),v=m.writable.getWriter();await v.ready,v.write(f);const A=u.prototype.constructor;for(const S of e){const x=new A(S.length-2);for(let _=2,T=S.length;_<T;_++)x[_-2]=S[_]-S[_-2];v.write(x)}v.close();const y=await new Response(m.readable).arrayBuffer(),b=new Uint8Array(y);return E_(b)}static async decompressSignature(e){try{const t=MD(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const S of s)o||(o=new Uint8Array(new Uint32Array(S.buffer,0,4)[0])),o.set(S,l),l+=S.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=c[2],d=c[3],f=c[4]===0,g=c[5],m=c[6],v=c[7],A=[],y=(jg+sd*m)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(v){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(o.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(o.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(o.buffer,y);break}l=0;for(let S=0;S<m;S++){const x=c[sd*S+jg],_=new Float32Array(x+2);A.push(_);for(let T=0;T<sd-1;T++)_[T]=c[sd*S+jg+T+1];for(let T=0;T<x;T++)_[T+2]=_[T]+b[l++]}return{areContours:f,thickness:g,outlines:A,width:h,height:d}}catch(t){return se(`decompressSignature: ${t}`),null}}}Gl=new WeakMap,Ee=new WeakSet,vb=function(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i},ti=new WeakMap,Sk=function(e,t,s,i,r,o,l){const c=E(this,Ee,vb).call(this,s,i,r,o);for(let u=0;u<8;u++){const h=(-u+c-l+16)%8,d=a(this,ti)[2*h],f=a(this,ti)[2*h+1];if(e[(s+d)*t+(i+f)]!==0)return h}return-1},Ak=function(e,t,s,i,r,o,l){const c=E(this,Ee,vb).call(this,s,i,r,o);for(let u=0;u<8;u++){const h=(u+c+l+16)%8,d=a(this,ti)[2*h],f=a(this,ti)[2*h+1];if(e[(s+d)*t+(i+f)]!==0)return h}return-1},wb=function(e,t,s,i){const r=e.length,o=new Int32Array(r);for(let h=0;h<r;h++)o[h]=e[h]<=i?1:0;for(let h=1;h<s-1;h++)o[h*t]=o[h*t+t-1]=0;for(let h=0;h<t;h++)o[h]=o[t*s-1-h]=0;let l=1,c;const u=[];for(let h=1;h<s-1;h++){c=1;for(let d=1;d<t-1;d++){const f=h*t+d,g=o[f];if(g===0)continue;let m=h,v=d;if(g===1&&o[f-1]===0)l+=1,v-=1;else if(g>=1&&o[f+1]===0)l+=1,v+=1,g>1&&(c=g);else{g!==1&&(c=Math.abs(g));continue}const A=[d,h],y=v===d+1,b={isHole:y,points:A,id:l,parent:0};u.push(b);let S;for(const I of u)if(I.id===c){S=I;break}S?S.isHole?b.parent=y?S.parent:c:b.parent=y?c:S.parent:b.parent=y?c:0;const x=E(this,Ee,Sk).call(this,o,t,h,d,m,v,0);if(x===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let _=a(this,ti)[2*x],T=a(this,ti)[2*x+1];const k=h+_,R=d+T;m=k,v=R;let D=h,M=d;for(;;){const I=E(this,Ee,Ak).call(this,o,t,D,M,m,v,1);_=a(this,ti)[2*I],T=a(this,ti)[2*I+1];const H=D+_,W=M+T;A.push(W,H);const z=D*t+M;if(o[z+1]===0?o[z]=-l:o[z]===1&&(o[z]=l),H===h&&W===d&&D===k&&M===R){o[f]!==1&&(c=Math.abs(o[f]));break}else m=D,v=M,D=H,M=W}}}return u},Tm=function(e,t,s,i){if(s-t<=4){for(let k=t;k<s-2;k+=2)i.push(e[k],e[k+1]);return}const r=e[t],o=e[t+1],l=e[s-4]-r,c=e[s-3]-o,u=Math.hypot(l,c),h=l/u,d=c/u,f=h*o-d*r,g=c/l,m=1/u,v=Math.atan(g),A=Math.cos(v),y=Math.sin(v),b=m*(Math.abs(A)+Math.abs(y)),S=m*(1-b+b**2),x=Math.max(Math.atan(Math.abs(y+A)*S),Math.atan(Math.abs(y-A)*S));let _=0,T=t;for(let k=t+2;k<s-2;k+=2){const R=Math.abs(f-h*e[k+1]+d*e[k]);R>_&&(T=k,_=R)}_>(u*x)**2?(E(this,Ee,Tm).call(this,e,t,T+2,i),E(this,Ee,Tm).call(this,e,T,s,i)):i.push(r,o)},Ek=function(e){const t=[],s=e.length;return E(this,Ee,Tm).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},xk=function(e,t,s,i,r,o){const l=new Float32Array(o**2),c=-2*i**2,u=o>>1;for(let v=0;v<o;v++){const A=(v-u)**2;for(let y=0;y<o;y++)l[v*o+y]=Math.exp((A+(y-u)**2)/c)}const h=new Float32Array(256),d=-2*r**2;for(let v=0;v<256;v++)h[v]=Math.exp(v**2/d);const f=e.length,g=new Uint8Array(f),m=new Uint32Array(256);for(let v=0;v<s;v++)for(let A=0;A<t;A++){const y=v*t+A,b=e[y];let S=0,x=0;for(let T=0;T<o;T++){const k=v+T-u;if(!(k<0||k>=s))for(let R=0;R<o;R++){const D=A+R-u;if(D<0||D>=t)continue;const M=e[k*t+D],I=l[T*o+R]*h[Math.abs(M-b)];S+=M*I,x+=I}}const _=g[y]=Math.round(S/x);m[_]++}return[g,m]},Ck=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},bb=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let l=0,c=s.length;l<c;l++){const u=s[l]=e[l<<2];i=Math.max(i,u),r=Math.min(r,u)}const o=255/(i-r);for(let l=0,c=s.length;l<c;l++)s[l]=(s[l]-r)*o;return s},Sb=function(e){let t,s=-1/0,i=-1/0;const r=e.findIndex(c=>c!==0);let o=r,l=r;for(t=r;t<256;t++){const c=e[t];c>s&&(t-o>i&&(i=t-o,l=t-1),s=c,o=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},_k=function(e){const t=e,{width:s,height:i}=e,{maxDim:r}=a(this,Gl);let o=s,l=i;if(s>r||i>r){let f=s,g=i,m=Math.log2(Math.max(s,i)/r);const v=Math.floor(m);m=m===v?v-1:v;for(let y=0;y<m;y++){o=Math.ceil(f/2),l=Math.ceil(g/2);const b=new OffscreenCanvas(o,l);b.getContext("2d").drawImage(e,0,0,f,g,0,0,o,l),f=o,g=l,e!==t&&e.close(),e=b.transferToImageBitmap()}const A=Math.min(r/o,r/l);o=Math.round(o*A),l=Math.round(l*A)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,l);const h=u.getImageData(0,0,o,l).data;return[E(this,Ee,bb).call(this,h),o,l]},w(Vi,Ee),w(Vi,Gl,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Vi,ti,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class YS extends gk{constructor(){super(),super.updateProperties({fill:ze._defaultLineColor,"stroke-width":0})}clone(){const e=new YS;return e.updateAll(this),e}}class KS extends dv{constructor(e){super(e),super.updateProperties({stroke:ze._defaultLineColor,"stroke-width":1})}clone(){const e=new KS(this._viewParameters);return e.updateAll(this),e}}var Xo,zi,Yo,ql;const Vn=class Vn extends my{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});w(this,Xo,!1);w(this,zi,null);w(this,Yo,null);w(this,ql,null);this._willKeepAspectRatio=!0,p(this,Yo,t.signatureData||null),p(this,zi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){ze.initialize(t,s),this._defaultDrawingOptions=new YS,this._defaultDrawnSignatureOptions=new KS(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return le(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,zi)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(a(this,Yo)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:h}=a(this,Yo),{rawDims:{pageWidth:d,pageHeight:f},rotation:g}=this.parent.viewport,m=Vi.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:g,innerMargin:Vn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(m,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,zi)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){p(this,ql,t),this.addEditToolbar()}getUuid(){return a(this,ql)}get description(){return a(this,zi)}set description(t){p(this,zi,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:i,width:r,height:o}=a(this,Yo),l=Math.max(r,o),c=Vi.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:i,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,i,r){const{x:o,y:l}=this,{outline:c}=p(this,Yo,t);p(this,Xo,c instanceof yb),this.description=i;let u;a(this,Xo)?u=Vn.getDefaultDrawingOptions():(u=Vn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let d=s/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return Vi.process(t,s,i,r,Vn._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:i,pageHeight:r},rotation:o}=this.parent.viewport;return Vi.extractContoursFromText(t,s,i,r,o,Vn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return Vi.processDrawnLines({lines:t,pageWidth:s,pageHeight:i,rotation:r,innerMargin:Vn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=Vn.getDefaultDrawingOptions():(this._drawingOptions=Vn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:a(this,Xo),color:[0,0,0],thickness:a(this,Xo)?0:r});return this.addComment(o),t?(o.paths={lines:s,points:i},o.uuid=a(this,ql),o.isCopy=!0):o.lines=s,a(this,zi)&&(o.accessibilityData={type:"Figure",alt:a(this,zi)}),o}static deserializeDraw(t,s,i,r,o,l){return l.areContours?yb.deserialize(t,s,i,r,o,l):cg.deserialize(t,s,i,r,o,l)}static async deserialize(t,s,i){var o;const r=await super.deserialize(t,s,i);return p(r,Xo,t.areContours),r.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",p(r,ql,t.uuid),r}};Xo=new WeakMap,zi=new WeakMap,Yo=new WeakMap,ql=new WeakMap,O(Vn,"_type","signature"),O(Vn,"_editorType",ne.SIGNATURE),O(Vn,"_defaultDrawingOptions",null);let Ab=Vn;var Ye,Dt,Ko,Dr,Qo,yh,Nr,Xl,Ui,as,vh,ve,Td,kd,km,Pm,Rm,xb,Lm,Tk;class Eb extends ze{constructor(t){super({...t,name:"stampEditor"});w(this,ve);w(this,Ye,null);w(this,Dt,null);w(this,Ko,null);w(this,Dr,null);w(this,Qo,null);w(this,yh,"");w(this,Nr,null);w(this,Xl,!1);w(this,Ui,null);w(this,as,!1);w(this,vh,!1);p(this,Dr,t.bitmapUrl),p(this,Qo,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){ze.initialize(t,s)}static isHandlingMimeForPasting(t){return ly.includes(t)}static paste(t,s){s.pasteEditor({mode:ne.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;a(this,Dt)&&(p(this,Ye,null),this._uiManager.imageManager.deleteId(a(this,Dt)),(t=a(this,Nr))==null||t.remove(),p(this,Nr,null),a(this,Ui)&&(clearTimeout(a(this,Ui)),p(this,Ui,null))),super.remove()}rebuild(){if(!this.parent){a(this,Dt)&&E(this,ve,km).call(this);return}super.rebuild(),this.div!==null&&(a(this,Dt)&&a(this,Nr)===null&&E(this,ve,km).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(a(this,Ko)||a(this,Ye)||a(this,Dr)||a(this,Qo)||a(this,Dt)||a(this,Xl))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,Xl)||(a(this,Ye)?E(this,ve,Pm).call(this):E(this,ve,km).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(p(this,Dt,i),r&&p(this,Ye,r),p(this,Xl,!1),E(this,ve,Pm).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Ui)!==null&&clearTimeout(a(this,Ui)),p(this,Ui,setTimeout(()=>{p(this,Ui,null),E(this,ve,xb).call(this)},200))}copyCanvas(t,s,i=!1){t||(t=224);const{width:r,height:o}=a(this,Ye),l=new ui;let c=a(this,Ye),u=r,h=o,d=null;if(s){if(r>s||o>s){const k=Math.min(s/r,s/o);u=Math.floor(r*k),h=Math.floor(o*k)}d=document.createElement("canvas");const g=d.width=Math.ceil(u*l.sx),m=d.height=Math.ceil(h*l.sy);a(this,as)||(c=E(this,ve,Rm).call(this,g,m));const v=d.getContext("2d");v.filter=this._uiManager.hcmFilter;let A="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":ID.isDarkMode&&(A="#8f8f9d",y="#42414d");const b=15,S=b*l.sx,x=b*l.sy,_=new OffscreenCanvas(S*2,x*2),T=_.getContext("2d");T.fillStyle=A,T.fillRect(0,0,S*2,x*2),T.fillStyle=y,T.fillRect(0,0,S,x),T.fillRect(S,x,S,x),v.fillStyle=v.createPattern(_,"repeat"),v.fillRect(0,0,g,m),v.drawImage(c,0,0,c.width,c.height,0,0,g,m)}let f=null;if(i){let g,m;if(l.symmetric&&c.width<t&&c.height<t)g=c.width,m=c.height;else if(c=a(this,Ye),r>t||o>t){const y=Math.min(t/r,t/o);g=Math.floor(r*y),m=Math.floor(o*y),a(this,as)||(c=E(this,ve,Rm).call(this,g,m))}const A=new OffscreenCanvas(g,m).getContext("2d",{willReadFrequently:!0});A.drawImage(c,0,0,c.width,c.height,0,0,g,m),f={width:g,height:m,data:A.getImageData(0,0,g,m).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(t,s,i){var A;let r=null,o=!1;if(t instanceof $T){const{data:{rect:y,rotation:b,id:S,structParent:x,popupRef:_,richText:T,contentsObj:k,creationDate:R,modificationDate:D},container:M,parent:{page:{pageNumber:I}},canvas:H}=t;let W,z;H?(delete t.canvas,{id:W,bitmap:z}=i.imageManager.getFromCanvas(M.id,H),H.remove()):(o=!0,t._hasNoCanvas=!0);const Z=((A=await s._structTree.getAriaAttributes(`${BS}${S}`))==null?void 0:A.get("aria-label"))||"";r=t={annotationType:ne.STAMP,bitmapId:W,bitmap:z,pageIndex:I-1,rect:y.slice(0),rotation:b,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:Z},isSvg:!1,structParent:x,popupRef:_,richText:T,comment:(k==null?void 0:k.str)||null,creationDate:R,modificationDate:D}}const l=await super.deserialize(t,s,i),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:g}=t;o?(i.addMissingCanvas(t.id,l),p(l,Xl,!0)):d&&i.imageManager.isValidId(d)?(p(l,Dt,d),u&&p(l,Ye,u)):p(l,Dr,h),p(l,as,f);const[m,v]=l.pageDimensions;return l.width=(c[2]-c[0])/m,l.height=(c[3]-c[1])/v,g&&(l.altTextData=g),l._initialData=r,t.comment&&l.setCommentData(t),p(l,vh,!!r),l}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:a(this,Dt),isSvg:a(this,as)});if(this.addComment(i),t)return i.bitmapUrl=E(this,ve,Lm).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=E(this,ve,Tk).call(this,i);return c.isSame?null:(c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(s===null)return i;s.stamps||(s.stamps=new Map);const l=a(this,as)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(a(this,Dt)))s.stamps.set(a(this,Dt),{area:l,serialized:i}),i.bitmap=E(this,ve,Lm).call(this,!1);else if(a(this,as)){const c=s.stamps.get(a(this,Dt));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=E(this,ve,Lm).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Ye=new WeakMap,Dt=new WeakMap,Ko=new WeakMap,Dr=new WeakMap,Qo=new WeakMap,yh=new WeakMap,Nr=new WeakMap,Xl=new WeakMap,Ui=new WeakMap,as=new WeakMap,vh=new WeakMap,ve=new WeakSet,Td=function(t,s=!1){if(!t){this.remove();return}p(this,Ye,t.bitmap),s||(p(this,Dt,t.id),p(this,as,t.isSvg)),t.file&&p(this,yh,t.file.name),E(this,ve,Pm).call(this)},kd=function(){if(p(this,Ko,null),this._uiManager.enableWaiting(!1),!!a(this,Nr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Ye)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Ye)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},km=function(){if(a(this,Dt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Dt)).then(i=>E(this,ve,Td).call(this,i,!0)).finally(()=>E(this,ve,kd).call(this));return}if(a(this,Dr)){const i=a(this,Dr);p(this,Dr,null),this._uiManager.enableWaiting(!0),p(this,Ko,this._uiManager.imageManager.getFromUrl(i).then(r=>E(this,ve,Td).call(this,r)).finally(()=>E(this,ve,kd).call(this)));return}if(a(this,Qo)){const i=a(this,Qo);p(this,Qo,null),this._uiManager.enableWaiting(!0),p(this,Ko,this._uiManager.imageManager.getFromFile(i).then(r=>E(this,ve,Td).call(this,r)).finally(()=>E(this,ve,kd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=ly.join(",");const s=this._uiManager._signal;p(this,Ko,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,ve,Td).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>E(this,ve,kd).call(this))),t.click()},Pm=function(){var u;const{div:t}=this;let{width:s,height:i}=a(this,Ye);const[r,o]=this.pageDimensions,l=.75;if(this.width)s=this.width*r,i=this.height*o;else if(s>l*r||i>l*o){const h=Math.min(l*r/s,l*o/i);s*=h,i*=h}this._uiManager.enableWaiting(!1);const c=p(this,Nr,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=s/r,this.height=i/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),E(this,ve,xb).call(this),a(this,vh)||(this.parent.addUndoableEditor(this),p(this,vh,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,yh)&&this.div.setAttribute("aria-description",a(this,yh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Rm=function(t,s){const{width:i,height:r}=a(this,Ye);let o=i,l=r,c=a(this,Ye);for(;o>2*t||l>2*s;){const u=o,h=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=d.transferToImageBitmap()}return c},xb=function(){const[t,s]=this.parentDimensions,{width:i,height:r}=this,o=new ui,l=Math.ceil(i*t*o.sx),c=Math.ceil(r*s*o.sy),u=a(this,Nr);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=a(this,as)?a(this,Ye):E(this,ve,Rm).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},Lm=function(t){if(t){if(a(this,as)){const r=this._uiManager.imageManager.getSvgUrl(a(this,Dt));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=a(this,Ye),s.getContext("2d").drawImage(a(this,Ye),0,0),s.toDataURL()}if(a(this,as)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Xr.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Xr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,Ye),0,0,a(this,Ye).width,a(this,Ye).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,Ye))},Tk=function(t){var l;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===s,o=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},O(Eb,"_type","stamp"),O(Eb,"_editorType",ne.STAMP);var Yl,wh,Jo,Zo,Ir,Dn,ea,bh,Sh,ni,Or,Nt,Fr,ta,Ah,K,na,Oe,Cb,kk,yi,_b,Tb,Mm;const Vs=class Vs{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:h}){w(this,Oe);w(this,Yl);w(this,wh,!1);w(this,Jo,null);w(this,Zo,null);w(this,Ir,null);w(this,Dn,new Map);w(this,ea,!1);w(this,bh,!1);w(this,Sh,!1);w(this,ni,null);w(this,Or,null);w(this,Nt,null);w(this,Fr,null);w(this,ta,null);w(this,Ah,-1);w(this,K);const d=[...a(Vs,na).values()];if(!Vs._initialized){Vs._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),p(this,K,e),this.pageIndex=t,this.div=s,p(this,Yl,r),p(this,Jo,o),this.viewport=u,p(this,Nt,c),this.drawLayer=l,this._structTree=i,a(this,K).addLayer(this)}get isEmpty(){return a(this,Dn).size===0}get isInvisible(){return this.isEmpty&&a(this,K).getMode()===ne.NONE}updateToolbar(e){a(this,K).updateToolbar(e)}updateMode(e=a(this,K).getMode()){switch(E(this,Oe,Mm).call(this),e){case ne.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ne.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ne.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===ne.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of a(Vs,na).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=a(this,Nt))==null?void 0:t.div)}setEditingState(e){a(this,K).setEditingState(e)}addCommands(e){a(this,K).addCommands(e)}cleanUndoStack(e){a(this,K).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=a(this,Jo))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;p(this,Sh,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=a(this,ta))==null||s.abort(),p(this,ta,null);const e=new Set;for(const i of a(this,Oe,Cb))i.enableEditing(),i.show(!0),i.annotationElementId&&(a(this,K).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=a(this,Jo);if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),a(this,K).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}p(this,Sh,!1),a(this,K)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(p(this,bh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),a(this,Nt)&&!a(this,ta)){p(this,ta,new AbortController);const i=a(this,K).combinedSignal(a(this,ta));a(this,Nt).div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:c,timeStamp:u}=r,h=a(this,Ah);if(u-h>500){p(this,Ah,u);return}p(this,Ah,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(l,c);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let g;const m=new RegExp(`^${rf}[0-9]+$`);for(const A of f)if(m.test(A.id)){g=A.id;break}if(!g)return;const v=a(this,Dn).get(g);(v==null?void 0:v.annotationElementId)===null&&(r.stopPropagation(),r.preventDefault(),v.dblclick(r))},{signal:i,capture:!0})}const e=a(this,Jo);if(e){const i=new Map,r=new Map;for(const l of a(this,Oe,Cb)){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){i.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);(s=this.getEditableAnnotation(l.annotationElementId))==null||s.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(a(this,K).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=r.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=i.get(c),u&&(a(this,K).addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}E(this,Oe,Mm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const i of a(Vs,na).values())t.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),p(this,bh,!1)}getEditableAnnotation(e){var t;return((t=a(this,Jo))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){a(this,K).getActive()!==e&&a(this,K).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=a(this,Nt))!=null&&e.div&&!a(this,Fr)){p(this,Fr,new AbortController);const t=a(this,K).combinedSignal(a(this,Fr));a(this,Nt).div.addEventListener("pointerdown",E(this,Oe,kk).bind(this),{signal:t}),a(this,Nt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=a(this,Nt))!=null&&e.div&&a(this,Fr)&&(a(this,Fr).abort(),p(this,Fr,null),a(this,Nt).div.classList.remove("highlighting"))}enableClick(){if(a(this,Zo))return;p(this,Zo,new AbortController);const e=a(this,K).combinedSignal(a(this,Zo));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=a(this,Zo))==null||e.abort(),p(this,Zo,null)}attach(e){a(this,Dn).set(e.id,e);const{annotationElementId:t}=e;t&&a(this,K).isDeletedAnnotationElement(t)&&a(this,K).removeDeletedAnnotationElement(e)}detach(e){var t;a(this,Dn).delete(e.id),(t=a(this,Yl))==null||t.removePointerInTextLayer(e.contentDiv),!a(this,bh)&&e.annotationElementId&&a(this,K).addDeletedAnnotationElement(e)}remove(e){this.detach(e),a(this,K).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(a(this,K).addDeletedAnnotationElement(e.annotationElementId),ze.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),a(this,K).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!a(this,Sh)),a(this,K).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!a(this,Ir)&&(e._focusEventsAllowed=!1,p(this,Ir,setTimeout(()=>{p(this,Ir,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:a(this,K)._signal}),t.focus())},0))),e._structTreeParentId=(s=a(this,Yl))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of a(this,Dn).values())if(t.uid===e)return t;return null}getNextId(){return a(this,K).getId()}combinedSignal(e){return a(this,K).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=a(this,Oe,yi))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await a(this,K).updateMode(e.mode);const{offsetX:s,offsetY:i}=E(this,Oe,Tb).call(this),r=this.getNextId(),o=E(this,Oe,_b).call(this,{parent:this,id:r,x:s,y:i,uiManager:a(this,K),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=a(Vs,na).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,a(this,K)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=E(this,Oe,_b).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:a(this,K),isCentered:t,...s});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(E(this,Oe,Tb).call(this),!0,e)}setSelected(e){a(this,K).setSelected(e)}toggleSelected(e){a(this,K).toggleSelected(e)}unselect(e){a(this,K).unselect(e)}pointerup(e){var i;const{isMac:t}=Ft.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!a(this,ea)||(p(this,ea,!1),(i=a(this,Oe,yi))!=null&&i.isDrawer&&a(this,Oe,yi).supportMultipleDrawings))return;if(!a(this,wh)){p(this,wh,!0);return}const s=a(this,K).getMode();if(s===ne.STAMP||s===ne.SIGNATURE){a(this,K).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(a(this,K).getMode()===ne.HIGHLIGHT&&this.enableTextSelection(),a(this,ea)){p(this,ea,!1);return}const{isMac:t}=Ft.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(p(this,ea,!0),(i=a(this,Oe,yi))!=null&&i.isDrawer){this.startDrawingSession(e);return}const s=a(this,K).getActive();p(this,wh,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),a(this,ni)){a(this,Oe,yi).startDrawing(this,a(this,K),!1,e);return}a(this,K).setCurrentDrawingSession(this),p(this,ni,new AbortController);const t=a(this,K).combinedSignal(a(this,ni));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(p(this,Or,null),this.commitOrRemove())},{signal:t}),a(this,Oe,yi).startDrawing(this,a(this,K),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&p(this,Or,t);return}a(this,Or)&&setTimeout(()=>{var t;(t=a(this,Or))==null||t.focus(),p(this,Or,null)},0)}endDrawingSession(e=!1){return a(this,ni)?(a(this,K).setCurrentDrawingSession(null),a(this,ni).abort(),p(this,ni,null),p(this,Or,null),a(this,Oe,yi).endDrawing(e)):null}findNewParent(e,t,s){const i=a(this,K).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return a(this,ni)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,ni)&&a(this,Oe,yi).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=a(this,K).getActive())==null?void 0:e.parent)===this&&(a(this,K).commitOrRemove(),a(this,K).setActiveEditor(null)),a(this,Ir)&&(clearTimeout(a(this,Ir)),p(this,Ir,null));for(const s of a(this,Dn).values())(t=a(this,Yl))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,a(this,Dn).clear(),a(this,K).removeLayer(this)}render({viewport:e}){this.viewport=e,ya(this.div,e);for(const t of a(this,K).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){a(this,K).commitOrRemove(),E(this,Oe,Mm).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,ya(this.div,{rotation:s}),t!==s)for(const i of a(this,Dn).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return a(this,K).viewParameters.realScale}};Yl=new WeakMap,wh=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,Ir=new WeakMap,Dn=new WeakMap,ea=new WeakMap,bh=new WeakMap,Sh=new WeakMap,ni=new WeakMap,Or=new WeakMap,Nt=new WeakMap,Fr=new WeakMap,ta=new WeakMap,Ah=new WeakMap,K=new WeakMap,na=new WeakMap,Oe=new WeakSet,Cb=function(){return a(this,Dn).size!==0?a(this,Dn).values():a(this,K).getEditors(this.pageIndex)},kk=function(e){a(this,K).unselectAll();const{target:t}=e;if(t===a(this,Nt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&a(this,Nt).div.contains(t)){const{isMac:s}=Ft.platform;if(e.button!==0||e.ctrlKey&&s)return;a(this,K).showAllEditors("highlight",!0,!0),a(this,Nt).div.classList.add("free"),this.toggleDrawing(),gy.startHighlighting(this,a(this,K).direction==="ltr",{target:a(this,Nt).div,x:e.x,y:e.y}),a(this,Nt).div.addEventListener("pointerup",()=>{a(this,Nt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,K)._signal}),e.preventDefault()}},yi=function(){return a(Vs,na).get(a(this,K).getMode())},_b=function(e){const t=a(this,Oe,yi);return t?new t.prototype.constructor(e):null},Tb=function(){const{x:e,y:t,width:s,height:i}=this.boundingClientRect,r=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+i),u=(r+l)/2-e,h=(o+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Mm=function(){for(const e of a(this,Dn).values())e.isEmpty()&&e.remove()},O(Vs,"_initialized",!1),w(Vs,na,new Map([ob,mb,Eb,gy,Ab].map(e=>[e._editorType,e])));let yy=Vs;var si,gn,Kl,qp,Fy,Pk,Xi,kb,Rk,Pb;const St=class St{constructor({pageIndex:e}){w(this,Xi);w(this,si,null);w(this,gn,new Map);w(this,Kl,new Map);this.pageIndex=e}setParent(e){if(!a(this,si)){p(this,si,e);return}if(a(this,si)!==e){if(a(this,gn).size>0)for(const t of a(this,gn).values())t.remove(),e.append(t);p(this,si,e)}}static get _svgFactory(){return le(this,"_svgFactory",new ff)}draw(e,t=!1,s=!1){const i=bt(St,qp)._++,r=E(this,Xi,kb).call(this),o=St._svgFactory.createElement("defs");r.append(o);const l=St._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&a(this,Kl).set(i,l);const u=s?E(this,Xi,Rk).call(this,o,c):null,h=St._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,e),a(this,gn).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=bt(St,qp)._++,i=E(this,Xi,kb).call(this),r=St._svgFactory.createElement("defs");i.append(r);const o=St._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const d=St._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=St._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=St._svgFactory.createElement("use");d.append(g),g.setAttribute("href",`#${l}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const u=St._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),a(this,gn).set(s,i),s}finalizeDraw(e,t){a(this,Kl).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:i,rootClass:r,path:o}=t,l=typeof e=="number"?a(this,gn).get(e):e;if(l){if(s&&E(this,Xi,Pb).call(this,l,s),i&&E(c=St,Fy,Pk).call(c,l,i),r){const{classList:u}=l;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=l.firstChild.firstChild;E(this,Xi,Pb).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const s=a(this,gn).get(e);s&&(a(t,si).append(s),a(this,gn).delete(e),a(t,gn).set(e,s))}remove(e){a(this,Kl).delete(e),a(this,si)!==null&&(a(this,gn).get(e).remove(),a(this,gn).delete(e))}destroy(){p(this,si,null);for(const e of a(this,gn).values())e.remove();a(this,gn).clear(),a(this,Kl).clear()}};si=new WeakMap,gn=new WeakMap,Kl=new WeakMap,qp=new WeakMap,Fy=new WeakSet,Pk=function(e,[t,s,i,r]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},Xi=new WeakSet,kb=function(){const e=St._svgFactory.create(1,1,!0);return a(this,si).append(e),e.setAttribute("aria-hidden",!0),e},Rk=function(e,t){const s=St._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=St._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},Pb=function(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)},w(St,Fy),w(St,qp,0);let vy=St;globalThis._pdfjsTestingUtils={HighlightOutliner:lb};globalThis.pdfjsLib={AbortException:qr,AnnotationEditorLayer:yy,AnnotationEditorParamsType:fe,AnnotationEditorType:ne,AnnotationEditorUIManager:va,AnnotationLayer:XS,AnnotationMode:$i,AnnotationType:ut,applyOpacity:k_,build:LT,ColorPicker:df,createValidAbsoluteUrl:IS,CSSConstants:T_,DOMSVGFactory:ff,DrawLayer:vy,FeatureTest:Ft,fetchData:Hh,findContrastColor:P_,getDocument:VS,getFilenameFromUrl:x_,getPdfFilenameFromUrl:C_,getRGB:$h,getUuid:FS,getXfaPageViewport:__,GlobalWorkerOptions:Ns,ImageKind:Bd,InvalidPDFException:ay,isDataScheme:og,isPdfFile:uv,isValidExplicitDest:lT,MathClamp:on,noContextMenu:ms,normalizeUnicode:A_,OPS:Lh,OutputScale:ui,PasswordResponses:b_,PDFDataRangeTransport:WS,PDFDateString:lf,PDFWorker:Mh,PermissionFlag:w_,PixelsPerInch:Xr,RenderingCancelledException:cv,renderRichText:zS,ResponseException:of,setLayerDimensions:ya,shadow:le,SignatureExtractor:Vi,stopEvent:et,SupportedImageMimeTypes:ly,TextLayer:uf,TouchManager:cf,updateUrlHash:OS,Util:q,VerbosityLevel:sg,version:hf,XfaLayer:jS};const lI=Object.freeze(Object.defineProperty({__proto__:null,AbortException:qr,AnnotationEditorLayer:yy,AnnotationEditorParamsType:fe,AnnotationEditorType:ne,AnnotationEditorUIManager:va,AnnotationLayer:XS,AnnotationMode:$i,AnnotationType:ut,CSSConstants:T_,ColorPicker:df,DOMSVGFactory:ff,DrawLayer:vy,FeatureTest:Ft,GlobalWorkerOptions:Ns,ImageKind:Bd,InvalidPDFException:ay,MathClamp:on,OPS:Lh,OutputScale:ui,PDFDataRangeTransport:WS,PDFDateString:lf,PDFWorker:Mh,PasswordResponses:b_,PermissionFlag:w_,PixelsPerInch:Xr,RenderingCancelledException:cv,ResponseException:of,SignatureExtractor:Vi,SupportedImageMimeTypes:ly,TextLayer:uf,TouchManager:cf,Util:q,VerbosityLevel:sg,XfaLayer:jS,applyOpacity:k_,build:LT,createValidAbsoluteUrl:IS,fetchData:Hh,findContrastColor:P_,getDocument:VS,getFilenameFromUrl:x_,getPdfFilenameFromUrl:C_,getRGB:$h,getUuid:FS,getXfaPageViewport:__,isDataScheme:og,isPdfFile:uv,isValidExplicitDest:lT,noContextMenu:ms,normalizeUnicode:A_,renderRichText:zS,setLayerDimensions:ya,shadow:le,stopEvent:et,updateUrlHash:OS,version:hf},Symbol.toStringTag,{value:"Module"}));function Lk(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Lk(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function fv(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Lk(n))&&(s&&(s+=" "),s+=e);return s}var fE=Object.prototype.hasOwnProperty;function pE(n,e,t){for(t of n.keys())if(Yc(t,e))return t}function Yc(n,e){var t,s,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&Yc(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(i=s,i&&typeof i=="object"&&(i=pE(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(i=s[0],i&&typeof i=="object"&&(i=pE(e,i),!i)||!Yc(s[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(fE.call(n,t)&&++s&&!fE.call(e,t)||!(t in e)||!Yc(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function ug(n){let e=!1;return{promise:new Promise((s,i)=>{n.then(r=>!e&&s(r)).catch(r=>!e&&i(r))}),cancel(){e=!0}}}const cI=["onCopy","onCut","onPaste"],uI=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],hI=["onFocus","onBlur"],dI=["onInput","onInvalid","onReset","onSubmit"],fI=["onLoad","onError"],pI=["onKeyDown","onKeyPress","onKeyUp"],gI=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mI=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],yI=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],vI=["onSelect"],wI=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],bI=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],SI=["onScroll"],AI=["onWheel"],EI=["onAnimationStart","onAnimationEnd","onAnimationIteration"],xI=["onTransitionEnd"],CI=["onToggle"],_I=["onChange"],TI=[...cI,...uI,...hI,...dI,...fI,...pI,...gI,...mI,...yI,...vI,...wI,...bI,...SI,...AI,...EI,...xI,..._I,...CI];function Mk(n,e){const t={};for(const s of TI){const i=n[s];i&&(e?t[s]=r=>i(r,e(s)):t[s]=i)}return t}var kI="Invariant failed";function Ie(n,e){if(!n)throw new Error(kI)}var PI=function(){},RI=PI;const cn=xE(RI),Dk=P.createContext(null),LI="noopener noreferrer nofollow";class MI{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ie(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Ie(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||LI,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{Ie(this.pdfDocument),Ie(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ie(Array.isArray(t));const s=t[0];new Promise(i=>{Ie(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(r=>{i(r)}).catch(()=>{Ie(!1)}):typeof s=="number"?i(s):Ie(!1)}).then(i=>{const r=i+1;Ie(this.pdfViewer),Ie(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:r})})})}goToPage(e){const t=e-1;Ie(this.pdfViewer),Ie(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Kc({children:n,type:e}){return C.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const gE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function DI(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Dh(){return P.useReducer(DI,{value:void 0,error:void 0})}const pv=typeof window<"u",Nk=pv&&window.location.protocol==="file:";function NI(n){return typeof n<"u"}function _a(n){return NI(n)&&n!==null}function II(n){return typeof n=="string"}function OI(n){return n instanceof ArrayBuffer}function FI(n){return Ie(pv),n instanceof Blob}function Rb(n){return II(n)&&/^data:/.test(n)}function mE(n){Ie(Rb(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function BI(){return pv&&window.devicePixelRatio||1}const Ik="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function yE(){cn(!Nk,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Ik}`)}function jI(){cn(!Nk,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Ik}`)}function ac(n){n!=null&&n.cancel&&n.cancel()}function Lb(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function zI(n){return n.name==="RenderingCancelledException"}function UI(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:HI}=lI,$I=(n,e)=>{switch(e){case gE.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case gE.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function vE(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const VI=P.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:r,file:o,inputRef:l,imageResourcesPath:c,loading:u="Loading PDF",noData:h="No PDF file specified.",onItemClick:d,onLoadError:f,onLoadProgress:g,onLoadSuccess:m,onPassword:v=$I,onSourceError:A,onSourceSuccess:y,options:b,renderMode:S,rotate:x,scale:_,...T},k){const[R,D]=Dh(),{value:M,error:I}=R,[H,W]=Dh(),{value:z,error:Z}=H,B=P.useRef(new MI),j=P.useRef([]),N=P.useRef(void 0),$=P.useRef(void 0);o&&o!==N.current&&vE(o)&&(cn(!Yc(o,N.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),N.current=o),b&&b!==$.current&&(cn(!Yc(b,$.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),$.current=b);const J=P.useRef({scrollPageIntoView:Se=>{const{dest:Ge,pageNumber:wt,pageIndex:Tt=wt-1}=Se;if(d){d({dest:Ge,pageIndex:Tt,pageNumber:wt});return}const fc=j.current[Tt];if(fc){fc.scrollIntoView();return}cn(!1,`An internal link leading to page ${wt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});P.useImperativeHandle(k,()=>({linkService:B,pages:j,viewer:J}),[]);function te(){y&&y()}function Q(){I&&(cn(!1,I.toString()),A&&A(I))}function ie(){D({type:"RESET"})}P.useEffect(ie,[o,D]);const we=P.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return Rb(o)?{data:mE(o)}:(yE(),{url:o});if(o instanceof HI)return{range:o};if(OI(o))return{data:o};if(pv&&FI(o))return{data:await UI(o)};if(Ie(typeof o=="object"),Ie(vE(o)),"url"in o&&typeof o.url=="string"){if(Rb(o.url)){const{url:Se,...Ge}=o;return{data:mE(Se),...Ge}}yE()}return o},[o]);P.useEffect(()=>{const Se=ug(we());return Se.promise.then(Ge=>{D({type:"RESOLVE",value:Ge})}).catch(Ge=>{D({type:"REJECT",error:Ge})}),()=>{ac(Se)}},[we,D]),P.useEffect(()=>{if(!(typeof M>"u")){if(M===!1){Q();return}te()}},[M]);function Ve(){z&&(m&&m(z),j.current=new Array(z.numPages),B.current.setDocument(z))}function We(){Z&&(cn(!1,Z.toString()),f&&f(Z))}P.useEffect(function(){W({type:"RESET"})},[W,M]),P.useEffect(function(){if(!M)return;const Ge=b?{...M,...b}:M,wt=VS(Ge);g&&(wt.onProgress=g),v&&(wt.onPassword=v);const Tt=wt,fc=Tt.promise.then(Vh=>{W({type:"RESOLVE",value:Vh})}).catch(Vh=>{Tt.destroyed||W({type:"REJECT",error:Vh})});return()=>{fc.finally(()=>Tt.destroy())}},[b,W,M]),P.useEffect(()=>{if(!(typeof z>"u")){if(z===!1){We();return}Ve()}},[z]),P.useEffect(function(){B.current.setViewer(J.current),B.current.setExternalLinkRel(i),B.current.setExternalLinkTarget(r)},[i,r]);const be=P.useCallback((Se,Ge)=>{j.current[Se]=Ge},[]),Zr=P.useCallback(Se=>{delete j.current[Se]},[]),Hn=P.useMemo(()=>({imageResourcesPath:c,linkService:B.current,onItemClick:d,pdf:z,registerPage:be,renderMode:S,rotate:x,scale:_,unregisterPage:Zr}),[c,d,z,be,S,x,_,Zr]),Me=P.useMemo(()=>Mk(T,()=>z),[T,z]);function $n(){function Se(wt){return!!(wt!=null&&wt.pdf)}if(!Se(Hn))throw new Error("pdf is undefined");const Ge=typeof e=="function"?e(Hn):e;return C.jsx(Dk.Provider,{value:Hn,children:Ge})}function Ki(){return o?z==null?C.jsx(Kc,{type:"loading",children:typeof u=="function"?u():u}):z===!1?C.jsx(Kc,{type:"error",children:typeof s=="function"?s():s}):$n():C.jsx(Kc,{type:"no-data",children:typeof h=="function"?h():h})}return C.jsx("div",{className:fv("react-pdf__Document",t),ref:l,...Me,children:Ki()})});function Ok(){return P.useContext(Dk)}function Fk(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(r){for(var o=0,l=t;o<l.length;o++){var c=l[o];typeof c=="function"?c(r):c&&(c.current=r)}}}const Bk=P.createContext(null);function gv(){return P.useContext(Bk)}function WI(){const n=Ok(),e=gv();Ie(e);const t={...n,...e},{imageResourcesPath:s,linkService:i,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:u,pdf:h,renderForms:d,rotate:f,scale:g=1}=t;Ie(h),Ie(u),Ie(i);const[m,v]=Dh(),{value:A,error:y}=m,b=P.useRef(null);cn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function S(){A&&o&&o(A)}function x(){y&&(cn(!1,y.toString()),r&&r(y))}P.useEffect(function(){v({type:"RESET"})},[v,u]),P.useEffect(function(){if(!u)return;const D=ug(u.getAnnotations()),M=D;return D.promise.then(I=>{v({type:"RESOLVE",value:I})}).catch(I=>{v({type:"REJECT",error:I})}),()=>{ac(M)}},[v,u]),P.useEffect(()=>{if(A!==void 0){if(A===!1){x();return}S()}},[A]);function _(){c&&c()}function T(R){cn(!1,`${R}`),l&&l(R)}const k=P.useMemo(()=>u.getViewport({scale:g,rotation:f}),[u,f,g]);return P.useEffect(function(){if(!h||!u||!i||!A)return;const{current:D}=b;if(!D)return;const M=k.clone({dontFlip:!0}),I={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:h.annotationStorage,commentManager:null,div:D,l10n:null,linkService:i,page:u,structTreeLayer:null,viewport:M},H={annotations:A,annotationStorage:h.annotationStorage,div:D,imageResourcesPath:s,linkService:i,page:u,renderForms:d,viewport:M};D.innerHTML="";try{new XS(I).render(H),_()}catch(W){T(W)}return()=>{}},[A,s,i,u,h,d,k]),C.jsx("div",{className:fv("react-pdf__Page__annotations","annotationLayer"),ref:b})}const jk={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},GI=/^H(\d+)$/;function qI(n){return n in jk}function mv(n){return"children"in n}function zk(n){return mv(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function XI(n){const e={};if(mv(n)){const{role:t}=n,s=t.match(GI);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(qI(t)){const i=jk[t];i&&(e.role=i)}}return e}function Uk(n){const e={};if(mv(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),zk(n)){const[t]=n.children;if(t){const s=Uk(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function YI(n){return n?{...XI(n),...Uk(n)}:null}function Hk({className:n,node:e}){const t=P.useMemo(()=>YI(e),[e]),s=P.useMemo(()=>!mv(e)||zk(e)?null:e.children.map((i,r)=>C.jsx(Hk,{node:i},r)),[e]);return C.jsx("span",{className:n,...t,children:s})}function KI(){const n=gv();Ie(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,i]=Dh(),{value:r,error:o}=s,{customTextRenderer:l,page:c}=n;function u(){r&&t&&t(r)}function h(){o&&(cn(!1,o.toString()),e&&e(o))}return P.useEffect(function(){i({type:"RESET"})},[i,c]),P.useEffect(function(){if(l||!c)return;const f=ug(c.getStructTree()),g=f;return f.promise.then(m=>{i({type:"RESOLVE",value:m})}).catch(m=>{i({type:"REJECT",error:m})}),()=>ac(g)},[l,c,i]),P.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}u()}},[r]),r?C.jsx(Hk,{className:"react-pdf__Page__structTree structTree",node:r}):null}const wE=$i;function QI(n){const e=gv();Ie(e);const t={...e,...n},{_className:s,canvasBackground:i,devicePixelRatio:r=BI(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=t,{canvasRef:g}=n;Ie(c);const m=P.useRef(null);function v(){c&&l&&l(Lb(c,f))}function A(x){zI(x)||(cn(!1,x.toString()),o&&o(x))}const y=P.useMemo(()=>c.getViewport({scale:f*r,rotation:d}),[r,c,d,f]),b=P.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);P.useEffect(function(){if(!c)return;c.cleanup();const{current:_}=m;if(!_)return;_.width=y.width,_.height=y.height,_.style.width=`${Math.floor(b.width)}px`,_.style.height=`${Math.floor(b.height)}px`,_.style.visibility="hidden";const T={annotationMode:u?wE.ENABLE_FORMS:wE.ENABLE,canvas:_,canvasContext:_.getContext("2d",{alpha:!1}),viewport:y};i&&(T.background=i);const k=c.render(T),R=k;return k.promise.then(()=>{_.style.visibility="",v()}).catch(A),()=>ac(R)},[i,c,u,y,b]);const S=P.useCallback(()=>{const{current:x}=m;x&&(x.width=0,x.height=0)},[]);return P.useEffect(()=>S,[S]),C.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:Fk(g,m),style:{display:"block",userSelect:"none"},children:h?C.jsx(KI,{}):null})}function JI(n){return"str"in n}function ZI(){const n=gv();Ie(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:h}=n;Ie(o);const[d,f]=Dh(),{value:g,error:m}=d,v=P.useRef(null);cn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function A(){g&&s&&s(g)}function y(){m&&(cn(!1,m.toString()),t&&t(m))}P.useEffect(function(){f({type:"RESET"})},[o,f]),P.useEffect(function(){if(!o)return;const R=ug(o.getTextContent()),D=R;return R.promise.then(M=>{f({type:"RESOLVE",value:M})}).catch(M=>{f({type:"REJECT",error:M})}),()=>ac(D)},[o,f]),P.useEffect(()=>{if(g!==void 0){if(g===!1){y();return}A()}},[g]);const b=P.useCallback(()=>{r&&r()},[r]),S=P.useCallback(k=>{cn(!1,k.toString()),i&&i(k)},[i]);function x(){const k=v.current;k&&k.classList.add("selecting")}function _(){const k=v.current;k&&k.classList.remove("selecting")}const T=P.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return P.useLayoutEffect(function(){if(!o||!g)return;const{current:R}=v;if(!R)return;R.innerHTML="";const D=o.streamTextContent({includeMarkedContent:!0}),M={container:R,textContentSource:D,viewport:T},I=new uf(M),H=I;return I.render().then(()=>{const W=document.createElement("div");W.className="endOfContent",R.append(W);const z=R.querySelectorAll('[role="presentation"]');if(e){let Z=0;g.items.forEach((B,j)=>{if(!JI(B))return;const N=z[Z];if(!N)return;const $=e({pageIndex:l,pageNumber:c,itemIndex:j,...B});N.innerHTML=$,Z+=B.str&&B.hasEOL?2:1})}b()}).catch(S),()=>ac(H)},[e,S,b,o,l,c,g,T]),C.jsx("div",{className:fv("react-pdf__Page__textContent","textLayer"),onMouseUp:_,onMouseDown:x,ref:v})}const bE=1;function eO(n){const t={...Ok(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:o,children:l,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",height:g,inputRef:m,loading:v="Loading page",noData:A="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:b,onGetStructTreeError:S,onGetStructTreeSuccess:x,onGetTextError:_,onGetTextSuccess:T,onLoadError:k,onLoadSuccess:R,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:M,onRenderError:I,onRenderSuccess:H,onRenderTextLayerError:W,onRenderTextLayerSuccess:z,pageIndex:Z,pageNumber:B,pdf:j,registerPage:N,renderAnnotationLayer:$=!0,renderForms:J=!1,renderMode:te="canvas",renderTextLayer:Q=!0,rotate:ie,scale:we=bE,unregisterPage:Ve,width:We,...be}=t,[Zr,Hn]=Dh(),{value:Me,error:$n}=Zr,Ki=P.useRef(null);Ie(j);const Se=_a(B)?B-1:Z??null,Ge=B??(_a(Z)?Z+1:null),wt=ie??(Me?Me.rotate:null),Tt=P.useMemo(()=>{if(!Me)return null;let eo=1;const pc=we??bE;if(We||g){const to=Me.getViewport({scale:1,rotation:wt});We?eo=We/to.width:g&&(eo=g/to.height)}return pc*eo},[g,Me,wt,we,We]);P.useEffect(function(){return()=>{_a(Se)&&i&&Ve&&Ve(Se)}},[i,j,Se,Ve]);function fc(){if(R){if(!Me||!Tt)return;R(Lb(Me,Tt))}if(i&&N){if(!_a(Se)||!Ki.current)return;N(Se,Ki.current)}}function Vh(){$n&&(cn(!1,$n.toString()),k&&k($n))}P.useEffect(function(){Hn({type:"RESET"})},[Hn,j,Se]),P.useEffect(function(){if(!j||!Ge)return;const pc=ug(j.getPage(Ge)),to=pc;return pc.promise.then(vv=>{Hn({type:"RESOLVE",value:vv})}).catch(vv=>{Hn({type:"REJECT",error:vv})}),()=>ac(to)},[Hn,j,Ge]),P.useEffect(()=>{if(Me!==void 0){if(Me===!1){Vh();return}fc()}},[Me,Tt]);const yv=P.useMemo(()=>_a(Se)&&Ge&&_a(wt)&&_a(Tt)?{_className:s,canvasBackground:r,customTextRenderer:h,devicePixelRatio:d,onGetAnnotationsError:y,onGetAnnotationsSuccess:b,onGetStructTreeError:S,onGetStructTreeSuccess:x,onGetTextError:_,onGetTextSuccess:T,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:M,onRenderError:I,onRenderSuccess:H,onRenderTextLayerError:W,onRenderTextLayerSuccess:z,page:Me,pageIndex:Se,pageNumber:Ge,renderForms:J,renderTextLayer:Q,rotate:wt,scale:Tt}:null,[s,r,h,d,y,b,S,x,_,T,D,M,I,H,W,z,Me,Se,Ge,J,Q,wt,Tt]),$k=P.useMemo(()=>Mk(be,()=>Me&&(Tt?Lb(Me,Tt):void 0)),[be,Me,Tt]),hg=`${Se}@${Tt}/${wt}`;function Vk(){switch(te){case"custom":return Ie(u),C.jsx(u,{},`${hg}_custom`);case"none":return null;case"canvas":default:return C.jsx(QI,{canvasRef:o},`${hg}_canvas`)}}function Wk(){return Q?C.jsx(ZI,{},`${hg}_text`):null}function Gk(){return $?C.jsx(WI,{},`${hg}_annotations`):null}function qk(){function eo(to){return!!(to!=null&&to.page)}if(!eo(yv))throw new Error("page is undefined");const pc=typeof l=="function"?l(yv):l;return C.jsxs(Bk.Provider,{value:yv,children:[Vk(),Wk(),Gk(),pc]})}function Xk(){return Ge?j===null||Me===void 0||Me===null?C.jsx(Kc,{type:"loading",children:typeof v=="function"?v():v}):j===!1||Me===!1?C.jsx(Kc,{type:"error",children:typeof f=="function"?f():f}):qk():C.jsx(Kc,{type:"no-data",children:typeof A=="function"?A():A})}return C.jsx("div",{className:fv(s,c),"data-page-number":Ge,ref:Fk(m,Ki),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Tt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...$k,children:Xk()})}jI();Ns.workerSrc="pdf.worker.mjs";Ns.workerSrc=`https://unpkg.com/pdfjs-dist@${hf}/build/pdf.worker.min.mjs`;const tO=()=>{const{id:n}=t2(),e=Ca(),[t,s]=P.useState(null),[i,r]=P.useState(!0),[o,l]=P.useState(null),[c,u]=P.useState(1),[h,d]=P.useState(null),[f,g]=P.useState("info");P.useEffect(()=>{n&&(async()=>{try{const S=(await pe.get(`${Sn}/books/${n}`)).data;s(S);const _=`${Sn.replace("/api","")}${S.file_url}`;d(_),console.log("Book loaded. Download URL:",_)}catch(b){console.error("Error fetching book:",b)}finally{r(!1)}})()},[n]);const m=async()=>{try{await pe.post(`${Sn}/books/${n}/download`);const y=document.createElement("a");if(y.href=h,y.download=`${t.title}.pdf`,document.body.appendChild(y),y.click(),document.body.removeChild(y),"serviceWorker"in navigator&&"indexedDB"in window){const b={id:t.id,title:t.title,fileUrl:h,downloadedAt:new Date().toISOString()};localStorage.setItem(`book_${t.id}`,JSON.stringify(b))}}catch(y){console.error("Error downloading book:",y)}},v=({numPages:y})=>{l(y),console.log("PDF loaded successfully:",y,"pages")},A=y=>{console.error("PDF load error:",y)};return i?C.jsx("div",{className:"container",children:"Chargement..."}):t?C.jsx("div",{className:"book-detail-page",children:C.jsxs("div",{className:"container",children:[C.jsxs("button",{onClick:()=>e("/library"),className:"btn btn-secondary back-btn",children:[C.jsx(yD,{size:18,style:{verticalAlign:"middle",marginRight:6}})," Retour"]}),C.jsx("div",{className:"book-header",children:C.jsxs("div",{className:"book-info",children:[C.jsx("h1",{children:t.title}),t.author&&C.jsxs("p",{className:"author",children:["Par ",t.author]}),t.description&&C.jsx("p",{className:"description",children:t.description}),C.jsxs("div",{className:"book-details",children:[C.jsx("span",{className:"category-badge",children:t.category}),t.file_size&&C.jsxs("span",{className:"file-size",children:[(t.file_size/(1024*1024)).toFixed(2)," MB"]})]}),C.jsxs("div",{className:"book-actions",children:[C.jsxs("button",{onClick:m,className:"btn btn-primary",children:[C.jsx(pD,{size:18,style:{verticalAlign:"middle",marginRight:6}})," Tlcharger"]}),h&&h.endsWith(".pdf")&&C.jsx("button",{onClick:()=>{console.log("Toggle view mode. Current:",f,"Download URL:",h),g(f==="info"?"read":"info")},className:"btn btn-success",children:f==="info"?C.jsxs(C.Fragment,{children:[C.jsx(ov,{size:18,style:{verticalAlign:"middle",marginRight:6}})," Lire"]}):C.jsx(C.Fragment,{children:" Retour aux informations"})})]}),C.jsx("p",{className:"offline-note small-note",children:"Aprs tlchargement, ce livre reste accessible hors ligne pendant 7 jours."})]})}),f==="read"&&h&&h.endsWith(".pdf")&&C.jsxs("div",{className:"pdf-viewer",children:[C.jsxs("div",{className:"pdf-controls",children:[C.jsxs("button",{onClick:()=>u(Math.max(1,c-1)),disabled:c<=1,className:"btn btn-secondary",children:[C.jsx(gD,{size:18,style:{verticalAlign:"middle",marginRight:6}})," Prcdent"]}),C.jsxs("span",{children:["Page ",c," sur ",o||"..."]}),C.jsxs("button",{onClick:()=>u(Math.min(o||1,c+1)),disabled:c>=(o||1),className:"btn btn-secondary",children:["Suivant ",C.jsx(mD,{size:18,style:{verticalAlign:"middle",marginLeft:6}})]})]}),C.jsx("div",{className:"pdf-container",children:C.jsx(VI,{file:h,onLoadSuccess:v,onLoadError:A,loading:C.jsx("div",{children:"Chargement du PDF..."}),error:C.jsx("div",{children:"Erreur lors du chargement du PDF. Vrifiez la console pour plus de dtails."}),options:{cMapUrl:`https://unpkg.com/pdfjs-dist@${hf}/cmaps/`,cMapPacked:!0,standardFontDataUrl:`https://unpkg.com/pdfjs-dist@${hf}/standard_fonts/`,withCredentials:!1},children:C.jsx(eO,{pageNumber:c,scale:1.5,renderTextLayer:!0,renderAnnotationLayer:!0})})})]})]})}):C.jsx("div",{className:"container",children:C.jsxs("div",{className:"card",children:[C.jsx("p",{children:"Livre non trouv"}),C.jsx("button",{onClick:()=>e("/library"),className:"btn btn-primary",children:"Retour  la bibliothque"})]})})},SE=[{id:"ex-1",type:"exercise",title:"Respiration consciente (avec bulles)",description:"Pratique simple pour calmer le corps et lesprit en utilisant la respiration et une activit ludique.",content:"Asseyez-vous confortablement. Inspirez lentement par le nez en comptant jusqu' 4, retenez 1, puis soufflez en faisant des bulles ou en imaginant souffler une bougie en comptant jusqu' 6. Rptez 6  10 fois. Concentrez-vous sur la sensation de lair qui entre et sort. Cette activit combine la respiration consciente et un geste doux pour apaiser le systme nerveux."},{id:"ex-2",type:"exercise",title:"Ancrage 5-4-3-2-1",description:"Technique de grounding pour ramener lattention au prsent  laide des sens.",content:"Regardez autour de vous et nommez 5 choses que vous voyez. Touchez 4 objets et notez leurs textures. coutez et identifiez 3 sons. Sentez 2 odeurs ou notez deux choses que vous pourriez sentir. Dgustez ou imaginez 1 got. Respirez profondment entre chaque tape. Cette mthode aide  rduire lanxit en ancrant lattention sur linstant prsent."},{id:"ex-3",type:"exercise",title:"Expression par le dessin",description:"Exprimez vos motions sans mots  utile pour enfants et adultes.",content:"Prenez du papier et des crayons. Dessinez ce que vous ressentez en couleurs, formes ou symboles, sans chercher  tre parfait. Aprs 1015 minutes, observez le dessin : quelles motions apparaissent ? Cela permet dextrioriser et de mieux comprendre ses ressentis."},{id:"ex-4",type:"exercise",title:"Bocal de gratitude",description:"Petit rituel pour cultiver la gratitude et le bien-tre au quotidien.",content:"Chaque jour, notez une petite chose positive sur un papier et mettez-la dans un bocal. Quand vous vous sentez triste ou stress, ouvrez quelques papiers et relisez-les. Ce geste renforce la vision positive et aide  reconnatre les ressources personnelles."},{id:"ex-5",type:"exercise",title:"Affirmations  Je suis ",description:"Renforce lestime et la confiance par des noncs positifs.",content:"Devant un miroir, dites  voix haute 3 affirmations commenant par  Je suis  (par ex.  Je suis capable ,  Je suis digne dcoute ,  Je suis en scurit ). Rptez chaque affirmation lentement 3 fois. Vous pouvez les crire et les garder sur un papier visible."},{id:"story-1",type:"story",title:"Lhistoire de la petite bulle",description:"Une courte histoire pour aider  comprendre la respiration consciente.",content:"Il tait une fois une petite bulle qui voyageait doucement dans lair. Quand elle grandissait, elle inspirait calme et lumire ; quand elle rtrcissait, elle emportait avec elle les nuages sombres. Chaque fois que le vent soufflait trop fort, la bulle apprenait  respirer plus lentement et retrouvait son chemin. La bulle rappelle que prendre une respiration lente nous aide  retrouver notre calme."},{id:"story-2",type:"story",title:"Le jardin des 5 sens",description:"Conte court pour pratiquer lancrage sensoriel.",content:"Dans un jardin, un enfant explore cinq chemins: un sentier color (vue), un tapis rugueux (toucher), une fontaine qui chante (son), un coin de fleurs parfumes (odorat) et une bote de biscuits (got). En visitant chacun, lenfant apprend  revenir au prsent et  se sentir en scurit dans son corps. Ce jardin symbolise comment nos sens nous reconnectent  linstant."},{id:"story-3",type:"story",title:"La bote  dessins magique",description:"Histoire encourageant lexpression des motions par lart.",content:"Une bote  dessins magique transformait chaque trait en couleur dmotion. Quand un enfant dessinait sa colre, la couleur devenait lumire et se calmait. En dessinant la joie, la pice silluminait. La bote rappelle que mettre des motions sur papier les rend plus faciles  comprendre et  partager."}],nO=()=>{const[n,e]=P.useState([]),[t,s]=P.useState(!0),[i,r]=P.useState(""),[o,l]=P.useState("");P.useEffect(()=>{(async()=>{try{s(!0),l("");const h={};i&&(h.type=i);const d=await pe.get(`${Sn}/mental-health`,{params:h});Array.isArray(d.data)&&d.data.length>0?e(d.data):e(c(i))}catch(h){console.error("Error fetching resources:",h),l("Impossible de charger les ressources. Ressayez plus tard."),e(c(i))}finally{s(!1)}})()},[i]);const c=u=>u?SE.filter(h=>h.type===u):SE;return C.jsx("div",{className:"mental-health-page",children:C.jsxs("div",{className:"container",children:[C.jsxs("div",{className:"page-header",children:[C.jsx("h1",{children:"Sant Mentale"}),C.jsx("p",{children:"Ressources pour votre bien-tre motionnel et mental"})]}),o&&C.jsx("div",{className:"alert error-alert",children:o}),C.jsxs("div",{className:"categories",children:[C.jsx("button",{className:`category-btn ${i===""?"active":""}`,onClick:()=>r(""),children:"Tous"}),C.jsx("button",{className:`category-btn ${i==="exercise"?"active":""}`,onClick:()=>r("exercise"),children:"Exercices"}),C.jsx("button",{className:`category-btn ${i==="story"?"active":""}`,onClick:()=>r("story"),children:"Histoires"})]}),t?C.jsx("div",{className:"loading",children:"Chargement..."}):n.length===0?C.jsx("div",{className:"no-resources",children:C.jsx("p",{children:"Aucune ressource disponible pour le moment."})}):C.jsx("div",{className:"grid",children:n.map(u=>C.jsxs("div",{className:"resource-card",children:[C.jsx("div",{className:"resource-icon",children:u.type==="exercise"?C.jsx(wD,{size:36}):C.jsx(rw,{size:36})}),C.jsx("h3",{children:u.title}),u.description&&C.jsx("p",{className:"resource-description",children:u.description}),u.content&&C.jsx("div",{className:"resource-content",children:C.jsx("p",{children:u.content})}),u.file_url&&C.jsx("a",{href:`${Sn.replace("/api","")}${u.file_url}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary",children:"Voir la ressource"})]},u.id))}),C.jsx("div",{className:"info-section",children:C.jsxs("div",{className:"card",children:[C.jsx("h2",{children:"Pourquoi la sant mentale est importante"}),C.jsx("p",{children:"La sant mentale est essentielle pour votre bien-tre global. Ces ressources vous aident  comprendre vos motions,  grer le stress, et  dvelopper des comptences pour faire face aux dfis quotidiens."})]})})]})})},sO=()=>{const[n,e]=P.useState([]),[t,s]=P.useState([]),[i,r]=P.useState(!0),[o,l]=P.useState(""),[c,u]=P.useState(""),h=Ca();P.useEffect(()=>{(async()=>{try{if(r(!0),u(""),o==="book"){const g=await pe.get(`${Sn}/books`,{params:{category:"entrepreneurship"}});s(g.data),e([])}else{const g={};o&&(g.type=o);const m=await pe.get(`${Sn}/entrepreneurship`,{params:g});e(m.data),s([])}}catch(g){console.error("Error fetching contents:",g),u("Impossible de charger le contenu entrepreneurial.")}finally{r(!1)}})()},[o]);const d=f=>f==="lesson"?C.jsx(ov,{size:36}):f==="case_study"?C.jsx(dD,{size:36}):C.jsx(rw,{size:36});return C.jsx("div",{className:"entrepreneurship-page",children:C.jsxs("div",{className:"container",children:[C.jsxs("div",{className:"page-header",children:[C.jsx("h1",{children:"Entrepreneuriat"}),C.jsx("p",{children:"Devenez les futurs leaders de la RDC et de l'Afrique"})]}),c&&C.jsx("div",{className:"alert error-alert",children:c}),C.jsxs("div",{className:"categories",children:[C.jsx("button",{className:`category-btn ${o===""?"active":""}`,onClick:()=>l(""),children:"Tous"}),C.jsx("button",{className:`category-btn ${o==="lesson"?"active":""}`,onClick:()=>l("lesson"),children:"Leons"}),C.jsx("button",{className:`category-btn ${o==="case_study"?"active":""}`,onClick:()=>l("case_study"),children:"tudes de Cas"}),C.jsx("button",{className:`category-btn ${o==="book"?"active":""}`,onClick:()=>l("book"),children:"Livres"})]}),i?C.jsx("div",{className:"loading",children:"Chargement..."}):o==="book"&&t.length===0||o!=="book"&&n.length===0?C.jsx("div",{className:"no-contents",children:C.jsx("p",{children:"Aucun contenu disponible pour le moment."})}):C.jsx("div",{className:"grid",children:o==="book"?t.map(f=>C.jsxs("div",{className:"content-card",children:[C.jsx("div",{className:"content-icon",children:C.jsx(rw,{size:36})}),C.jsx("h3",{children:f.title}),f.author&&C.jsxs("p",{className:"content-description",children:["Par ",f.author]}),f.description&&C.jsx("div",{className:"content-text",children:C.jsx("p",{children:f.description})}),C.jsx("button",{onClick:()=>h(`/book/${f.id}`),className:"btn btn-primary",children:"Voir le livre"})]},f.id)):n.map(f=>C.jsxs("div",{className:"content-card",children:[C.jsx("div",{className:"content-icon",children:d(f.type)}),C.jsx("h3",{children:f.title}),f.description&&C.jsx("p",{className:"content-description",children:f.description}),f.content&&C.jsx("div",{className:"content-text",children:C.jsx("p",{children:f.content})}),f.file_url&&C.jsx("a",{href:`${Sn.replace("/api","")}${f.file_url}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary",children:"Voir le contenu"})]},f.id))}),C.jsx("div",{className:"info-section",children:C.jsxs("div",{className:"card",children:[C.jsx("h2",{children:"Votre avenir entrepreneurial"}),C.jsx("p",{children:"L'entrepreneuriat est une voie puissante vers l'autonomie et le dveloppement. Ces ressources vous fournissent des connaissances et l'inspiration pour crer votre propre activit."})]})})]})})},iO=()=>{const{user:n}=Uh(),[e,t]=P.useState([]),[s,i]=P.useState(!0),[r,o]=P.useState({username:"",password:"",role:"student"}),[l,c]=P.useState("");P.useEffect(()=>{n&&n.role==="admin"&&u()},[n]);const u=async()=>{try{const d=await pe.get(`${Sn}/users`);t(d.data)}catch(d){console.error("Error fetching users:",d)}finally{i(!1)}},h=async d=>{var f,g;d.preventDefault();try{await pe.post(`${Sn}/auth/register`,r),c("Utilisateur cr avec succs"),o({username:"",password:"",role:"student"}),u()}catch(m){c(((g=(f=m.response)==null?void 0:f.data)==null?void 0:g.message)||"Erreur lors de la cration")}};return(n==null?void 0:n.role)!=="admin"?C.jsx("div",{className:"container",children:C.jsxs("div",{className:"card",children:[C.jsx("h2",{children:"Accs refus"}),C.jsx("p",{children:"Cette page est rserve aux administrateurs."})]})}):C.jsx("div",{className:"admin-panel",children:C.jsxs("div",{className:"container",children:[C.jsxs("div",{className:"page-header",children:[C.jsx("h1",{children:"Panneau d'Administration"}),C.jsx("p",{children:"Grer les utilisateurs et le systme"})]}),C.jsxs("div",{className:"admin-section",children:[C.jsxs("div",{className:"card",children:[C.jsx("h2",{children:"Crer un nouvel utilisateur"}),l&&C.jsx("div",{className:`message ${l.includes("succs")?"success":"error"}`,children:l}),C.jsxs("form",{onSubmit:h,children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Nom d'utilisateur"}),C.jsx("input",{type:"text",value:r.username,onChange:d=>o({...r,username:d.target.value}),required:!0})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Mot de passe"}),C.jsx("input",{type:"password",value:r.password,onChange:d=>o({...r,password:d.target.value}),required:!0,minLength:6})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Rle"}),C.jsxs("select",{value:r.role,onChange:d=>o({...r,role:d.target.value}),children:[C.jsx("option",{value:"student",children:"tudiant"}),C.jsx("option",{value:"teacher",children:"Enseignant"}),C.jsx("option",{value:"admin",children:"Administrateur"})]})]}),C.jsx("button",{type:"submit",className:"btn btn-primary",children:"Crer l'utilisateur"})]})]}),C.jsxs("div",{className:"card",children:[C.jsx("h2",{children:"Liste des utilisateurs"}),s?C.jsx("p",{children:"Chargement..."}):C.jsxs("table",{className:"users-table",children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{children:"ID"}),C.jsx("th",{children:"Nom d'utilisateur"}),C.jsx("th",{children:"Rle"}),C.jsx("th",{children:"Date de cration"})]})}),C.jsx("tbody",{children:e.map(d=>C.jsxs("tr",{children:[C.jsx("td",{children:d.id}),C.jsx("td",{children:d.username}),C.jsx("td",{children:C.jsx("span",{className:`role-badge role-${d.role}`,children:d.role==="admin"?"Administrateur":d.role==="teacher"?"Enseignant":"tudiant"})}),C.jsx("td",{children:new Date(d.created_at).toLocaleDateString("fr-FR")})]},d.id))})]})]})]})]})})},rO=()=>{Uh();const n=Ca(),[e,t]=P.useState({title:"",author:"",category:"education",description:""}),[s,i]=P.useState(null),[r,o]=P.useState(!1),[l,c]=P.useState(""),u=async h=>{var f,g;if(h.preventDefault(),!s){c("Veuillez slectionner un fichier");return}o(!0),c("");const d=new FormData;d.append("file",s),d.append("title",e.title),d.append("author",e.author),d.append("category",e.category),d.append("description",e.description);try{await pe.post(`${Sn}/books`,d,{headers:{"Content-Type":"multipart/form-data"}}),c("Livre upload avec succs!"),setTimeout(()=>{n("/library")},2e3)}catch(m){c(((g=(f=m.response)==null?void 0:f.data)==null?void 0:g.message)||"Erreur lors de l'upload")}finally{o(!1)}};return C.jsx("div",{className:"upload-page",children:C.jsxs("div",{className:"container",children:[C.jsxs("div",{className:"page-header",children:[C.jsx("h1",{children:"Tlverser un livre"}),C.jsx("p",{children:"Ajoutez un nouveau livre  la bibliothque"})]}),C.jsxs("div",{className:"upload-card",children:[l&&C.jsx("div",{className:`message ${l.includes("succs")?"success":"error"}`,children:l}),C.jsxs("form",{onSubmit:u,children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"title",children:"Titre *"}),C.jsx("input",{type:"text",id:"title",value:e.title,onChange:h=>t({...e,title:h.target.value}),required:!0,placeholder:"Titre du livre"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"author",children:"Auteur"}),C.jsx("input",{type:"text",id:"author",value:e.author,onChange:h=>t({...e,author:h.target.value}),placeholder:"Nom de l'auteur"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"category",children:"Catgorie *"}),C.jsxs("select",{id:"category",value:e.category,onChange:h=>t({...e,category:h.target.value}),required:!0,children:[C.jsx("option",{value:"education",children:"ducation"}),C.jsx("option",{value:"mental_health",children:"Sant Mentale"}),C.jsx("option",{value:"entrepreneurship",children:"Entrepreneuriat"})]})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"description",children:"Description"}),C.jsx("textarea",{id:"description",value:e.description,onChange:h=>t({...e,description:h.target.value}),rows:"4",placeholder:"Description du livre"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"file",children:"Fichier * (PDF, EPUB, TXT - Max 50MB)"}),C.jsx("input",{type:"file",id:"file",accept:".pdf,.epub,.txt",onChange:h=>i(h.target.files[0]),required:!0}),s&&C.jsxs("p",{className:"file-info",children:["Fichier slectionn: ",s.name," (",(s.size/(1024*1024)).toFixed(2)," MB)"]})]}),C.jsxs("div",{className:"form-actions",children:[C.jsx("button",{type:"submit",className:"btn btn-primary",disabled:r,children:r?"Tlversement...":"Tlverser le livre"}),C.jsx("button",{type:"button",onClick:()=>n("/library"),className:"btn btn-secondary",children:"Annuler"})]})]})]})]})})},oO=()=>{var t;const e=(t=uc().state)==null?void 0:t.message;return C.jsx("div",{className:"unauthorized-page",children:C.jsx("div",{className:"container",children:C.jsxs("div",{className:"card",children:[C.jsx("h1",{children:"Accs refus"}),C.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),e&&C.jsx("p",{className:"unauthorized-note",children:e}),C.jsxs("div",{className:"unauthorized-actions",children:[C.jsx(vn,{to:"/",className:"btn btn-primary",children:"Retour  l'accueil"}),C.jsx(vn,{to:"/login",className:"btn btn-secondary",children:"Changer de profil"})]})]})})})};function aO(){return C.jsx(sD,{children:C.jsx(x2,{children:C.jsxs("div",{className:"App",children:[C.jsx(iD,{}),C.jsxs(y2,{children:[C.jsx(Hs,{path:"/",element:C.jsx(bD,{})}),C.jsx(Hs,{path:"/login",element:C.jsx(SD,{})}),C.jsx(Hs,{path:"/library",element:C.jsx(AD,{})}),C.jsx(Hs,{path:"/book/:id",element:C.jsx(tO,{})}),C.jsx(Hs,{path:"/mental-health",element:C.jsx(nO,{})}),C.jsx(Hs,{path:"/entrepreneurship",element:C.jsx(sO,{})}),C.jsx(Hs,{path:"/admin",element:C.jsx(F1,{children:C.jsx(iO,{})})}),C.jsx(Hs,{path:"/upload",element:C.jsx(F1,{allowedRoles:["admin","teacher"],children:C.jsx(rO,{})})}),C.jsx(Hs,{path:"/unauthorized",element:C.jsx(oO,{})}),C.jsx(Hs,{path:"*",element:C.jsx(J0,{to:"/"})})]})]})})})}const lO=i0.createRoot(document.getElementById("root"));lO.render(C.jsx(Wi.StrictMode,{children:C.jsx(aO,{})}));
